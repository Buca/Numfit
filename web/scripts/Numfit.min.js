(()=>{var vc=class{static degree;static variables;constructor(n,c,r=1){this.positions=n,this.values=c,this.dimension=r;let X=this.constructor.degree,h=this.constructor.variables,x=(X+1)**h,o=this.values.constructor;this.coefficients=new o(r*x).fill(0),this.update()}get variables(){}get degree(){}update(){return this.coefficients=this.constructor.coefficients(this.positions,this.values,this.dimension,this.coefficients),this}translate(n){let c=this.constructor.variables,r=this.positions,X=r.length;for(let h=0;h<X;h+=c)if(c===1&&typeof n=="number")r[h]+=n;else for(let x=0;x<c;x++)r[h+x]+=n[x];return this}scale(n,c){let r=this.constructor.variables,X=this.positions,h=X.length;for(let x=0;x<h;x+=r)if(r===1&&typeof n=="number"&&typeof c=="number"){let o=X[x];X[x]=(o-c)*n+c}else for(let o=0;o<r;o++){let t=X[x+o],v=n[o],s=c[o];X[x+o]=(t-s)*v+s}return this}evaluate(n,c=0,r,X=0){let h=this.dimension,x=this.constructor.degree,o=this.constructor.variables,t=x+1,v=!r;r||(r=new this.values.constructor(h));let s=(x+1)**o;for(let f=0;f<h;f++){r[X+f]=0;for(let Y=0;Y<s;Y++){let b=this.coefficients[f*s+Y],q=1;for(let w=0;w<o;w++){let g=Math.floor(Y/t**w%t);typeof n=="number"?q*=n**g:q*=n[c+w]**g}r[X+f]+=b*q}}return h===1?r[X]:r}step(n,c,r,X){let h=this.dimension,x=this.constructor.variables,o=1;for(let s=0;s<x;s++){let f=typeof n=="number"?n:n[s],Y=typeof c=="number"?c:c[s],b=typeof r=="number"?r:r[s];o*=Math.floor(Math.abs(Y-f)/b)+1}o*=h;let t=new this.positions.constructor(x),v;X?v=new this.values.constructor(h).fill(0):v=new this.values.constructor(o).fill(0);for(let s=0;s<o;s+=h){let f=1;for(let Y=0;Y<x;Y++){let b=typeof n=="number"?n:n[Y],q=typeof c=="number"?c:c[Y],w=typeof n=="number"?r:r[Y],g=Math.floor((q-b)/w)+1,k=Math.floor(s/(h*f))%g;t[Y]=b+k*w,f*=g}X?X(x>1?t:t[0],this.evaluate(t,0,v,0)):this.evaluate(t,0,v,s)}return X?this:v}segment(n,c,r,X){let h=this.constructor.variables,x=new this.positions.constructor(h);for(let o=0;o<h;o++){let t=typeof n=="number"?n:n[o],v=typeof c=="number"?c:c[o],s=typeof r=="number"?r:r[o];x[o]=(v-t)/(s-1)}return this.step(n,c,x)}map(n,c){let r=this.constructor.variables,X=this.dimension,h=X*n.length,x=new this.positions.constructor(r),o;c?o=new this.values.constructor(X):o=new this.values.constructor(h).fill(0);for(let t=0,v=0;t<n.length;t+=r){for(let s=0;s<r;s++)x[s]=n[t+s];c?c(r>1?x:x[0],this.evaluate(x,0,o,0)):this.evaluate(x,0,o,t)}return c?this:o}};var En=class extends vc{static degree=1;static variables=1;static coefficients(n,c,r=1,X,h=0){X||(X=new c.constructor(r*2));let x=n[0],t=n[1]-x;for(let v=0,s=0;v<r;v++){let f=c[v],b=(c[v+r]-f)/t,q=f-x*b;X[h+s++]=q,X[h+s++]=b}return X}static evaluate(n,c,r=1,X,h,x=0){let o=!h;h||(h=new c.constructor(r));let t=n[0],s=n[1]-t,f=0;for(let Y=0;Y<r;Y++){let b=c[f++],w=(c[f++]-b)/s,g=b-t*w,k=typeof X=="number"?X:X[0];h[x+Y]=w*k+g}return r===1?h[x]:h}constructor(n,c,r=1){super(n,c,r)}};globalThis.Linear=En;var An=class extends vc{static degree=1;static variables=2;static coefficients(n,c,r=1,X,h=0){X||(X=c.constructor(r*4));let x=n[0],o=n[1],t=n[2],v=n[3],s=1/((t-x)*(v-o)),f=r;for(let Y=0,b=0;Y<r;Y++){let q=Y,w=c[q],g=c[q+=r],k=c[q+=r],e=c[q+=r];X[h+b++]=(t*v*w-t*o*k-x*v*g+x*o*e)*s,X[h+b++]=(-v*w+o*k+v*g-o*e)*s,X[h+b++]=(-t*w+t*k+x*g-x*e)*s,X[h+b++]=(w-k-g+e)*s}return X}static evaluate(n,c,r=1,X,h,x=0){h||(h=new c.constructor(r));let o=X[0],t=X[1],v=n[0],s=n[1],f=n[2],Y=n[3],b=(o-f)/(v-f),q=(o-v)/(f-v),w=(t-Y)/(s-Y),g=(t-s)/(Y-s),k=r;for(let e=0,d=0;e<r;e++){let y=e,l=c[y],A=c[y+=k],j=c[y+=k],m=c[y+=k],D=l*b+A*q,I=j*b+m*q;h[x+e]=D*w+I*g}return r===1?h[x]:h}constructor(n,c,r=1){super(n,c,r)}};globalThis.Bilinear=An;var Fn=class extends vc{static degree=1;static variables=3;static evaluate(n,c,r=1,X,h,x=0){h||(h=c.constructor(r));let o=X[0],t=X[1],v=X[2],s=n[0],f=n[1],Y=n[2],b=n[3],q=n[4],w=n[5],g=(o-b)/(s-b),k=(o-s)/(b-s),e=(t-q)/(f-q),d=(t-f)/(q-f),y=(v-w)/(Y-w),l=(v-Y)/(w-Y),A=0;for(let j=0,m=0;j<r;j++){let D=j,I=c[D],G=c[D+=r],F=c[D+=r],M=c[D+=r],R=c[D+=r],N=c[D+=r],W=c[D+=r],L=c[D+=r],z=I*g+G*k,S=F*g+M*k,Z=R*g+N*k,U=W*g+L*k,V=z*e+S*d,P=Z*e+U*d;h[x+m++]=V*y+P*l}return r===1?h[0]:h}static coefficients(n,c,r=1,X,h,x=0){h||(h=new c.constructor(r*8));let o=n[0],t=n[1],v=n[2],s=n[3],f=n[4],Y=n[5],b=1/((s-o)*(f-t)*(Y-v));for(let q=0,w=0;q<r;q++){let g=q,k=c[g],e=c[g+=r],d=c[g+=r],y=c[g+=r],l=c[g+=r],A=c[g+=r],j=c[g+=r],m=c[g+=r],D=(-k*s*f*Y+l*s*f*v+d*s*t*Y-j*s*t*v+e*o*f*Y-A*o*f*v-y*o*t*Y+m*o*t*v)*b,I=(k*f*Y-l*f*v-d*t*Y+j*t*v-e*f*Y+A*f*v+y*t*Y-m*t*v)*b,G=(k*s*Y-l*s*v-d*s*Y+j*s*v-e*o*Y+A*o*v+y*o*Y-m*o*v)*b,F=(-k*Y+l*v+d*Y-j*v+e*Y-A*v-y*Y+m*v)*b,M=(k*s*f-l*s*f-d*s*t+j*s*t-e*o*f+A*o*f+y*o*t-m*o*t)*b,R=(-k*f+l*f+d*t-j*t+e*f-A*f-y*t+m*t)*b,N=(-k*s+l*s+d*s-j*s+e*o-A*o-y*o+m*o)*b,W=(k-l-d+j-e+A+y-m)*b;h[x+w++]=D,h[x+w++]=I,h[x+w++]=G,h[x+w++]=F,h[x+w++]=M,h[x+w++]=R,h[x+w++]=N,h[x+w++]=W}return h}constructor(n,c,r=1){super(n,c,r)}evaluate(n,c=0,r,X=0){r||(r=new this.values.constructor(this.dimension));let h=n[c+0],x=n[c+1],o=n[c+2];for(let t=0;t<this.dimension;t++){let v=this.coefficients[8*t+0],s=this.coefficients[8*t+1],f=this.coefficients[8*t+2],Y=this.coefficients[8*t+3],b=this.coefficients[8*t+4],q=this.coefficients[8*t+5],w=this.coefficients[8*t+6],g=this.coefficients[8*t+7];r[X+t]=-(v+s*h+f*x+Y*h*x+(b+q*h+w*x+g*h*x)*o)}return r}};globalThis.Trilinear=Fn;var Mn=class extends vc{static degree=2;static variables=1;static coefficients(n,c,r=1,X,h=0){X||(X=new c.constructor(3*r));let x=n[0],o=n[1],t=n[2],v=1/((x-o)*(x-t)),s=1/((o-x)*(o-t)),f=1/((t-x)*(t-o)),Y=r;for(let b=0,q=0;b<Y;b++){let w=b,g=c[w]*v,k=c[w+=Y]*s,e=c[w+=Y]*f,d=g*o*t+k*x*t+e*x*o,y=-(g*(o+t)+k*(x+t)+e*(x+o)),l=g+k+e;X[h+q++]=d,X[h+q++]=y,X[h+q++]=l}return X}static evaluate(n,c,r=1,X,h,x=0){h=h||new c.constructor(r);let o=typeof X=="number"?X:X[0],t=n[0],v=n[1],s=n[2],f=o-t,Y=o-v,b=o-s,q=1/(t-v),w=1/(t-s),g=1/(v-s),k=Y*b*q*w,e=-f*b*q*g,d=f*Y*q*w;for(let y=0;y<r;y++){let l=y,A=c[l],j=c[l+=r],m=c[l+=r];h[x+y]=k*A+e*j+d*m}return r===1?h[x]:h}constructor(n,c,r=1){super(n,c,r)}};globalThis.Quadratic=Mn;var mn=class extends vc{static degree=2;static variables=2;static evaluate(n,c,r=1,X,h,x=0){h||(h=new c.constructor(r));let o=X[0],t=X[1],v=n[0],s=n[1],f=n[2],Y=n[3],b=n[4],q=n[5],w=v-f,g=v-b,k=f-b,e=o-v,d=o-f,y=o-b,l=t-s,A=t-Y,j=t-q,m=s-Y,D=s-q,I=Y-q,G=d*y/(w*g),F=-(e*y)/(w*k),M=e*d/(g*k),R=A*j/(m*D),N=-(l*j)/(m*I),W=l*A/(D*I);for(let L=0;L<r;L++){let z=L,S=c[z],Z=c[z+=r],U=c[z+=r],V=c[z+=r],P=c[z+=r],B=c[z+=r],C=c[z+=r],i=c[z+=r],O=c[z+=r],nc=G*S+F*Z+M*U,H=G*V+F*P+M*B,p=G*C+F*i+M*O;h[x+L]=R*nc+N*H+W*p}return r===1?h[x]:h}static coefficients(n,c,r=1,X,h=0){X||(X=new c.constructor(r*9));let x=n[0],o=n[1],t=n[2],v=n[3],s=n[4],f=n[5],Y=x*t,b=x*s,q=t*s,w=o*v,g=o*f,k=v*f,e=1/((x-t)*(x-s)),d=1/((t-x)*(t-s)),y=1/((s-x)*(s-t)),l=1/((o-v)*(o-f)),A=1/((v-o)*(v-f)),j=1/((f-o)*(f-v)),m=e*l,D=d*l,I=y*l,G=e*A,F=d*A,M=y*A,R=e*j,N=d*j,W=y*j,L=r,z=c;for(let S=0,Z=0;S<L;S++){let U=S,V=z[U]*m,P=z[U+=L]*G,B=z[U+=L]*R,C=z[U+=L]*D,i=z[U+=L]*F,O=z[U+=L]*N,nc=z[U+=L]*I,H=z[U+=L]*M,p=z[U+=L]*W,$=k*(V*q+C*b+nc*Y)+g*(P*q+i*b+H*Y)+w*(B*q+O*b+p*Y),jc=-(v+f)*(V*q-C*b-nc*Y)-(o+f)*(P*q-i*b-H*Y)-(o+v)*(B*q-O*b-p*Y),Tc=-(t+s)*(V*k-P*g-B*w)-(x+s)*(C*k-i*g-O*w)-(x+t)*(nc*k-H*g-p*w),_c=V*k-C*k-nc*k+P*g-i*g-H*g+B*w-O*w-p*w,tc=V*q-P*q-B*q+C*b-i*b-O*b+nc*Y-H*Y-p*Y,u=(v+f)*(V*(t+s)+C*(x+s)+nc*(x+t))+(o+f)*(P*(t+s)+i*(x+s)+H*(x+t))+(o+v)*(B*(t+s)+O*(x+s)+p*(x+t)),cc=-(v+f)*(V+C+nc)-(o+f)*(P+i+H)-(o+v)*(B+O+p),fc=-(t+s)*(V+P+B)-(x+s)*(C+i+O)-(x+t)*(nc+H+p),Ec=V+C+nc+P+i+H+B+O+p;X[h+Z++]=$,X[h+Z++]=jc,X[h+Z++]=_c,X[h+Z++]=Tc,X[h+Z++]=u,X[h+Z++]=cc,X[h+Z++]=tc,X[h+Z++]=fc,X[h+Z++]=Ec}return X}constructor(n,c,r=1){super(n,c,r)}};globalThis.Biquadratic=mn;var Nn=class extends vc{static degree=2;static variables=3;static coefficients(n,c,r=1,X,h=0){X||(X=new c.constructor(r*27));let x=n[0],o=n[1],t=n[2],v=n[3],s=n[4],f=n[5],Y=n[6],b=n[7],q=n[8],w=1/((x-v)*(x-Y)),g=1/((v-x)*(v-Y)),k=1/((Y-x)*(Y-v)),e=1/((o-s)*(o-b)),d=1/((s-o)*(s-b)),y=1/((b-o)*(b-s)),l=1/((t-f)*(t-q)),A=1/((f-t)*(f-q)),j=1/((q-t)*(q-f)),m=w*e*l,D=g*e*l,I=k*e*l,G=w*d*l,F=g*d*l,M=k*d*l,R=w*y*l,N=g*y*l,W=k*y*l,L=w*e*A,z=g*e*A,S=k*e*A,Z=w*d*A,U=g*d*A,V=k*d*A,P=w*y*A,B=g*y*A,C=k*y*A,i=w*e*j,O=g*e*j,nc=k*e*j,H=w*d*j,p=g*d*j,$=k*d*j,jc=w*y*j,Tc=g*y*j,_c=k*y*j,tc=new Float32Array(9),u=new Float32Array(9),cc=new Float32Array(9);tc[0]=v*Y,tc[1]=x*Y,tc[2]=x*v,tc[3]=-(v+Y),tc[4]=-(x+Y),tc[5]=-(x+v),tc[6]=1,tc[7]=1,tc[8]=1,u[0]=s*b,u[1]=o*b,u[2]=o*s,u[3]=-(s+b),u[4]=-(o+b),u[5]=-(o+s),u[6]=1,u[7]=1,u[8]=1,cc[0]=f*q,cc[1]=t*q,cc[2]=t*f,cc[3]=-(f+q),cc[4]=-(t+q),cc[5]=-(t+f),cc[6]=1,cc[7]=1,cc[8]=1;for(let fc=0,Ec=c,Q=r,Ac=0;fc<Q;fc++){let J=fc,wc=c[J]*m,gc=c[J+=Q]*D,qc=c[J+=Q]*I,zc=c[J+=Q]*G,kc=c[J+=Q]*F,Zc=c[J+=Q]*M,lc=c[J+=Q]*R,Dc=c[J+=Q]*N,Pc=c[J+=Q]*W,Sc=c[J+=Q]*L,Uc=c[J+=Q]*z,Vc=c[J+=Q]*S,Wc=c[J+=Q]*Z,$c=c[J+=Q]*U,ac=c[J+=Q]*V,Fc=c[J+=Q]*P,Mc=c[J+=Q]*B,mc=c[J+=Q]*C,Nc=c[J+=Q]*i,K=c[J+=Q]*O,oc=c[J+=Q]*nc,Bc=c[J+=Q]*H,sc=c[J+=Q]*p,rc=c[J+=Q]*$,ic=c[J+=Q]*jc,Oc=c[J+=Q]*Tc,pc=c[J+=Q]*_c;for(let Lc=0,Cc=0;Lc<3;Lc++){let uc=cc[Cc++],cn=cc[Cc++],nn=cc[Cc++];for(let Qc=0,Gc=0;Qc<3;Qc++){let Hc=u[Gc++],Ic=u[Gc++],Jc=u[Gc++];for(let Rc=0,Kc=0;Rc<3;Rc++){let Yc=tc[Kc++],Xc=tc[Kc++],bc=tc[Kc++];X[h+Ac++]=uc*(Hc*(Yc*wc+Xc*gc+bc*qc)+Ic*(Yc*zc+Xc*kc+bc*Zc)+Jc*(Yc*lc+Xc*Dc+bc*Pc))+cn*(Hc*(Yc*Sc+Xc*Uc+bc*Vc)+Ic*(Yc*Wc+Xc*$c+bc*ac)+Jc*(Yc*Fc+Xc*Mc+bc*mc))+nn*(Hc*(Yc*Nc+Xc*K+bc*oc)+Ic*(Yc*Bc+Xc*sc+bc*rc)+Jc*(Yc*ic+Xc*Oc+bc*pc))}}}}return X}static evaluate(n,c,r=1,X,h,x=0){h=h||new c.constructor(r);let o=X[0],t=X[1],v=X[2],s=n[0],f=n[1],Y=n[2],b=n[3],q=n[4],w=n[5],g=n[6],k=n[7],e=n[8],d=(o-b)*(o-g)/((s-b)*(s-g)),y=(o-s)*(o-g)/((b-s)*(b-g)),l=(o-s)*(o-b)/((g-s)*(g-b)),A=(t-q)*(t-k)/((f-q)*(f-k)),j=(t-f)*(t-k)/((q-f)*(q-k)),m=(t-f)*(t-q)/((k-f)*(k-q)),D=(v-w)*(v-e)/((Y-w)*(Y-e)),I=(v-Y)*(v-e)/((w-Y)*(w-e)),G=(v-Y)*(v-w)/((e-Y)*(e-w)),F=c,M=r;for(let R=0;R<M;R++){let N=R,W=F[N]*d+F[N+=M]*y+F[N+=M]*l,L=F[N+=M]*d+F[N+=M]*y+F[N+=M]*l,z=F[N+=M]*d+F[N+=M]*y+F[N+=M]*l,S=F[N+=M]*d+F[N+=M]*y+F[N+=M]*l,Z=F[N+=M]*d+F[N+=M]*y+F[N+=M]*l,U=F[N+=M]*d+F[N+=M]*y+F[N+=M]*l,V=F[N+=M]*d+F[N+=M]*y+F[N+=M]*l,P=F[N+=M]*d+F[N+=M]*y+F[N+=M]*l,B=F[N+=M]*d+F[N+=M]*y+F[N+=M]*l,C=W*A+L*j+z*m,i=S*A+Z*j+U*m,O=V*A+P*j+B*m;h[x+R]=C*D+i*I+O*G}return r===1?h[x]:h}constructor(n,c,r=1){super(n,c,r)}};globalThis.Triquadratic=Nn;var Dn=class extends vc{static degree=3;static variables=1;static evaluate(n,c,r=1,X,h,x=0){h||(h=new c.constructor(r));let o=typeof X=="number"?X:X[0],t=n[0],v=n[1],s=n[2],f=n[3],Y=t-v,b=t-s,q=t-f,w=v-s,g=v-f,k=s-f,e=o-t,d=o-v,y=o-s,l=o-f,A=d*y*l/(Y*b*q),j=-e*y*l/(Y*w*g),m=e*d*l/(b*w*k),D=-e*d*y/(q*g*k),I=r;for(let G=0;G<I;G++){let F=G,M=c[F],R=c[F+=I],N=c[F+=I],W=c[F+=I];h[x+G]=M*A+R*j+N*m+W*D}return I===1?h[x]:h}static coefficients(n,c,r=1,X,h=0){X||(X=new c.constructor(4*r));let x=n[0],o=n[1],t=n[2],v=n[3],s=x*o,f=x*t,Y=x*v,b=o*t,q=o*v,w=t*v,g=s*t,k=s*v,e=f*v,d=b*v,y=1/(x**3-(s+f+Y)*x+(g+k+e)-d),l=1/(o**3-(s+b+q)*o+(g+k+d)-e),A=1/(t**3-(f+b+w)*t+(g+e+d)-k),j=1/(v**3-(Y+q+w)*v+(k+e+d)-g),m=r;for(let D=0,I=0;D<r;D++){let G=D,F=c[G]*y,M=c[G+=m]*l,R=c[G+=m]*A,N=c[G+=m]*j,W=-(F*d+M*e+R*k+N*g),L=F*(b+q+w)+M*(f+Y+w)+R*(s+Y+q)+N*(s+f+b),z=-(F*(o+t+v)+M*(x+t+v)+R*(x+o+v)+N*(x+o+t)),S=F+M+R+N;X[h+I++]=W,X[h+I++]=L,X[h+I++]=z,X[h+I++]=S}return X}constructor(n,c,r=1){super(n,c,r)}};globalThis.Cubic=Dn;function dc(a,n,c){return(a[0]*n[0]+a[1]*n[1]+a[2]*n[2]+a[3]*n[3])*c[0]+(a[0]*n[4]+a[1]*n[5]+a[2]*n[6]+a[3]*n[7])*c[1]+(a[0]*n[8]+a[1]*n[9]+a[2]*n[10]+a[3]*n[11])*c[2]+(a[0]*n[12]+a[1]*n[13]+a[2]*n[14]+a[3]*n[15])*c[3]}var Pn=class extends vc{static degree=3;static variables=2;static coefficients(n,c,r=1,X,h=0){X||(X=new c.constructor(r*16));let x=n[0],o=n[1],t=n[2],v=n[3],s=n[4],f=n[5],Y=n[6],b=n[7],q=x*t,w=x*s,g=x*Y,k=t*s,e=t*Y,d=s*Y,y=q*s,l=q*Y,A=w*Y,j=k*Y,m=k+e+d,D=w+g+d,I=q+g+e,G=q+w+k,F=t+s+Y,M=x+s+Y,R=x+t+Y,N=x+t+s,W=[-j,-A,-l,-y],L=[m,D,I,G],z=[-F,-M,-R,-N],S=[1,1,1,1],Z=x-t,U=x-s,V=x-Y,P=t-s,B=t-Y,C=s-Y,i=o*v,O=o*f,nc=o*b,H=v*f,p=v*b,$=f*b,jc=i*f,Tc=i*b,_c=O*b,tc=H*b,u=o-v,cc=o-f,fc=o-b,Ec=v-f,Q=v-b,Ac=f-b,J=1/(Z*U*V),wc=-1/(Z*P*B),gc=1/(U*P*C),qc=-1/(V*B*C),zc=1/(u*cc*fc),kc=-1/(u*Ec*Q),Zc=1/(cc*Ec*Ac),lc=-1/(fc*Q*Ac),Dc=H+p+$,Pc=O+nc+$,Sc=i+nc+p,Uc=i+O+H,Vc=v+f+b,Wc=o+f+b,$c=o+v+b,ac=o+v+f,Fc=[-tc,-_c,-Tc,-jc],Mc=[Dc,Pc,Sc,Uc],mc=[-Vc,-Wc,-$c,-ac],Nc=S,K=new Float32Array(16),oc=r;for(let Bc=0,sc=0;Bc<oc;Bc++){let rc=Bc,ic=c[rc],Oc=c[rc+=oc],pc=c[rc+=oc],Lc=c[rc+=oc],Cc=c[rc+=oc],uc=c[rc+=oc],cn=c[rc+=oc],nn=c[rc+=oc],Qc=c[rc+=oc],Gc=c[rc+=oc],Hc=c[rc+=oc],Ic=c[rc+=oc],Jc=c[rc+=oc],Rc=c[rc+=oc],Kc=c[rc+=oc],Yc=c[rc+=oc];K[0]=ic*J*zc,K[1]=Oc*wc*zc,K[2]=pc*gc*zc,K[3]=Lc*qc*zc,K[4]=Cc*J*kc,K[5]=uc*wc*kc,K[6]=cn*gc*kc,K[7]=nn*qc*kc,K[8]=Qc*J*Zc,K[9]=Gc*wc*Zc,K[10]=Hc*gc*Zc,K[11]=Ic*qc*Zc,K[12]=Jc*J*lc,K[13]=Rc*wc*lc,K[14]=Kc*gc*lc,K[15]=Yc*qc*lc,X[h+sc++]=dc(W,K,Fc),X[h+sc++]=dc(L,K,Fc),X[h+sc++]=dc(z,K,Fc),X[h+sc++]=dc(S,K,Fc),X[h+sc++]=dc(W,K,Mc),X[h+sc++]=dc(L,K,Mc),X[h+sc++]=dc(z,K,Mc),X[h+sc++]=dc(S,K,Mc),X[h+sc++]=dc(W,K,mc),X[h+sc++]=dc(L,K,mc),X[h+sc++]=dc(z,K,mc),X[h+sc++]=dc(S,K,mc),X[h+sc++]=dc(W,K,Nc),X[h+sc++]=dc(L,K,Nc),X[h+sc++]=dc(z,K,Nc),X[h+sc++]=dc(S,K,Nc)}return X}static evaluate(n,c,r=1,X,h,x=0){h||(h=new c.constructor(r));let o=X[0],t=X[1],v=n[0],s=n[1],f=n[2],Y=n[3],b=n[4],q=n[5],w=n[6],g=n[7],k=o-v,e=o-f,d=o-b,y=o-w,l=v-f,A=v-b,j=v-w,m=f-b,D=f-w,I=b-w,G=t-s,F=t-Y,M=t-q,R=t-g,N=s-Y,W=s-q,L=s-g,z=Y-q,S=Y-g,Z=q-g,U=e*d*y/(l*A*j),V=-k*d*y/(l*m*D),P=k*e*y/(A*m*I),B=-k*e*d/(j*D*I),C=F*M*R/(N*W*L),i=-G*M*R/(N*z*S),O=G*F*R/(W*z*Z),nc=-G*F*M/(L*S*Z),H=r;for(let p=0;p<H;p++){let $=p,jc=c[$],Tc=c[$+=H],_c=c[$+=H],tc=c[$+=H],u=c[$+=H],cc=c[$+=H],fc=c[$+=H],Ec=c[$+=H],Q=c[$+=H],Ac=c[$+=H],J=c[$+=H],wc=c[$+=H],gc=c[$+=H],qc=c[$+=H],zc=c[$+=H],kc=c[$+=H],Zc=jc*U+Tc*V+_c*P+tc*B,lc=u*U+cc*V+fc*P+Ec*B,Dc=Q*U+Ac*V+J*P+wc*B,Pc=gc*U+qc*V+zc*P+kc*B;h[x+p]=Zc*C+lc*i+Dc*O+Pc*nc}return H===1?h[x]:h}constructor(n,c,r=1){super(n,c,r)}};globalThis.Bicubic=Pn;var Bn=class extends vc{static degree=3;static variables=3;static coefficients(n,c,r=1,X,h=0){X||(X=new c.constructor(64));let x=n[0],o=n[1],t=n[2],v=n[3],s=n[4],f=n[5],Y=n[6],b=n[7],q=n[8],w=n[9],g=n[10],k=n[11],e=new n.constructor(4),d=new n.constructor(4),y=new n.constructor(4);e[0]=1/((x-v)*(x-Y)*(x-w)),e[1]=1/((v-x)*(v-Y)*(v-w)),e[2]=1/((Y-x)*(Y-v)*(Y-w)),e[3]=1/((w-x)*(w-v)*(w-Y)),d[0]=1/((o-s)*(o-b)*(o-g)),d[1]=1/((s-o)*(s-b)*(s-g)),d[2]=1/((b-o)*(b-s)*(b-g)),d[3]=1/((g-o)*(g-s)*(g-b)),y[0]=1/((t-f)*(t-q)*(t-k)),y[1]=1/((f-t)*(f-q)*(f-k)),y[2]=1/((q-t)*(q-f)*(q-k)),y[3]=1/((k-t)*(k-f)*(k-q));let l=x*v,A=x*Y,j=x*w,m=v*Y,D=v*w,I=Y*w,G=o*s,F=o*b,M=o*g,R=s*b,N=s*g,W=b*g,L=t*f,z=t*q,S=t*k,Z=f*q,U=f*k,V=q*k,P=new Float32Array(16),B=new Float32Array(16),C=new Float32Array(16);P[0]=-m*w,P[1]=-A*w,P[2]=-l*w,P[3]=-l*Y,P[4]=m+D+I,P[5]=A+j+I,P[6]=l+j+D,P[7]=l+A+m,P[8]=-(v+Y+w),P[9]=-(x+Y+w),P[10]=-(x+v+w),P[11]=-(x+v+Y),P[12]=1,P[13]=1,P[14]=1,P[15]=1,B[0]=-R*g,B[1]=-F*g,B[2]=-G*g,B[3]=-G*b,B[4]=R+N+W,B[5]=F+M+W,B[6]=G+M+N,B[7]=G+F+R,B[8]=-(s+b+g),B[9]=-(o+b+g),B[10]=-(o+s+g),B[11]=-(o+s+b),B[12]=1,B[13]=1,B[14]=1,B[15]=1,C[0]=-Z*k,C[1]=-z*k,C[2]=-L*k,C[3]=-L*q,C[4]=Z+U+V,C[5]=z+S+V,C[6]=L+S+U,C[7]=L+z+Z,C[8]=-(f+q+k),C[9]=-(t+q+k),C[10]=-(t+f+k),C[11]=-(t+f+q),C[12]=1,C[13]=1,C[14]=1,C[15]=1;let i=e[0]*d[0]*y[0],O=e[1]*d[0]*y[0],nc=e[2]*d[0]*y[0],H=e[3]*d[0]*y[0],p=e[0]*d[1]*y[0],$=e[1]*d[1]*y[0],jc=e[2]*d[1]*y[0],Tc=e[3]*d[1]*y[0],_c=e[0]*d[2]*y[0],tc=e[1]*d[2]*y[0],u=e[2]*d[2]*y[0],cc=e[3]*d[2]*y[0],fc=e[0]*d[3]*y[0],Ec=e[1]*d[3]*y[0],Q=e[2]*d[3]*y[0],Ac=e[3]*d[3]*y[0],J=e[0]*d[0]*y[1],wc=e[1]*d[0]*y[1],gc=e[2]*d[0]*y[1],qc=e[3]*d[0]*y[1],zc=e[0]*d[1]*y[1],kc=e[1]*d[1]*y[1],Zc=e[2]*d[1]*y[1],lc=e[3]*d[1]*y[1],Dc=e[0]*d[2]*y[1],Pc=e[1]*d[2]*y[1],Sc=e[2]*d[2]*y[1],Uc=e[3]*d[2]*y[1],Vc=e[0]*d[3]*y[1],Wc=e[1]*d[3]*y[1],$c=e[2]*d[3]*y[1],ac=e[3]*d[3]*y[1],Fc=e[0]*d[0]*y[2],Mc=e[1]*d[0]*y[2],mc=e[2]*d[0]*y[2],Nc=e[3]*d[0]*y[2],K=e[0]*d[1]*y[2],oc=e[1]*d[1]*y[2],Bc=e[2]*d[1]*y[2],sc=e[3]*d[1]*y[2],rc=e[0]*d[2]*y[2],ic=e[1]*d[2]*y[2],Oc=e[2]*d[2]*y[2],pc=e[3]*d[2]*y[2],Lc=e[0]*d[3]*y[2],Cc=e[1]*d[3]*y[2],uc=e[2]*d[3]*y[2],cn=e[3]*d[3]*y[2],nn=e[0]*d[0]*y[3],Qc=e[1]*d[0]*y[3],Gc=e[2]*d[0]*y[3],Hc=e[3]*d[0]*y[3],Ic=e[0]*d[1]*y[3],Jc=e[1]*d[1]*y[3],Rc=e[2]*d[1]*y[3],Kc=e[3]*d[1]*y[3],Yc=e[0]*d[2]*y[3],Xc=e[1]*d[2]*y[3],bc=e[2]*d[2]*y[3],yn=e[3]*d[2]*y[3],dn=e[0]*d[3]*y[3],Yn=e[1]*d[3]*y[3],fn=e[2]*d[3]*y[3],Xn=e[3]*d[3]*y[3];for(let tn=0,T=r,_=c;tn<T;tn++){let E=tn,bn=_[E]*i,wn=_[E+=T]*O,gn=_[E+=T]*nc,qn=_[E+=T]*H,zn=_[E+=T]*p,kn=_[E+=T]*$,Zn=_[E+=T]*jc,ln=_[E+=T]*Tc,jn=_[E+=T]*_c,Tn=_[E+=T]*tc,_n=_[E+=T]*u,In=_[E+=T]*cc,Jn=_[E+=T]*fc,Kn=_[E+=T]*Ec,Ln=_[E+=T]*Q,Qn=_[E+=T]*Ac,Rn=_[E+=T]*J,Sn=_[E+=T]*wc,Un=_[E+=T]*gc,Vn=_[E+=T]*qc,Wn=_[E+=T]*zc,$n=_[E+=T]*kc,an=_[E+=T]*Zc,On=_[E+=T]*lc,pn=_[E+=T]*Dc,un=_[E+=T]*Pc,ct=_[E+=T]*Sc,nt=_[E+=T]*Uc,tt=_[E+=T]*Vc,ot=_[E+=T]*Wc,st=_[E+=T]*$c,rt=_[E+=T]*ac,vt=_[E+=T]*Fc,et=_[E+=T]*Mc,xt=_[E+=T]*mc,ht=_[E+=T]*Nc,yt=_[E+=T]*K,dt=_[E+=T]*oc,Yt=_[E+=T]*Bc,ft=_[E+=T]*sc,Xt=_[E+=T]*rc,bt=_[E+=T]*ic,wt=_[E+=T]*Oc,gt=_[E+=T]*pc,qt=_[E+=T]*Lc,zt=_[E+=T]*Cc,kt=_[E+=T]*uc,Zt=_[E+=T]*cn,lt=_[E+=T]*nn,jt=_[E+=T]*Qc,Tt=_[E+=T]*Gc,_t=_[E+=T]*Hc,Et=_[E+=T]*Ic,At=_[E+=T]*Jc,Ft=_[E+=T]*Rc,Mt=_[E+=T]*Kc,mt=_[E+=T]*Yc,Nt=_[E+=T]*Xc,Dt=_[E+=T]*bc,Pt=_[E+=T]*yn,Bt=_[E+=T]*dn,Ct=_[E+=T]*Yn,Gt=_[E+=T]*fn,Ht=_[E+=T]*Xn;for(let Cn=0,on=0,It=0;Cn<4;Cn++){let Jt=C[on++],Kt=C[on++],Lt=C[on++],Qt=C[on++];for(let Gn=0,sn=0;Gn<4;Gn++){let rn=B[sn++],vn=B[sn++],en=B[sn++],xn=B[sn++];for(let Hn=0,hn=0;Hn<4;Hn++){let ec=P[hn++],xc=P[hn++],hc=P[hn++],yc=P[hn++];X[h+64*tn+It++]=Jt*(rn*(ec*bn+xc*wn+hc*gn+yc*qn)+vn*(ec*zn+xc*kn+hc*Zn+yc*ln)+en*(ec*jn+xc*Tn+hc*_n+yc*In)+xn*(ec*Jn+xc*Kn+hc*Ln+yc*Qn))+Kt*(rn*(ec*Rn+xc*Sn+hc*Un+yc*Vn)+vn*(ec*Wn+xc*$n+hc*an+yc*On)+en*(ec*pn+xc*un+hc*ct+yc*nt)+xn*(ec*tt+xc*ot+hc*st+yc*rt))+Lt*(rn*(ec*vt+xc*et+hc*xt+yc*ht)+vn*(ec*yt+xc*dt+hc*Yt+yc*ft)+en*(ec*Xt+xc*bt+hc*wt+yc*gt)+xn*(ec*qt+xc*zt+hc*kt+yc*Zt))+Qt*(rn*(ec*lt+xc*jt+hc*Tt+yc*_t)+vn*(ec*Et+xc*At+hc*Ft+yc*Mt)+en*(ec*mt+xc*Nt+hc*Dt+yc*Pt)+xn*(ec*Bt+xc*Ct+hc*Gt+yc*Ht))}}}}return X}static evaluate(n,c,r=1,X,h,x=0){h=h||new c.constructor(r);let o=X[0],t=X[1],v=X[2],s=n[0],f=n[1],Y=n[2],b=n[3],q=n[4],w=n[5],g=n[6],k=n[7],e=n[8],d=n[9],y=n[10],l=n[11],A=(o-b)*(o-g)*(o-d)/((s-b)*(s-g)*(s-d)),j=(o-s)*(o-g)*(o-d)/((b-s)*(b-g)*(b-d)),m=(o-s)*(o-b)*(o-d)/((g-s)*(g-b)*(g-d)),D=(o-s)*(o-b)*(o-g)/((d-s)*(d-b)*(d-g)),I=(t-q)*(t-k)*(t-y)/((f-q)*(f-k)*(f-y)),G=(t-f)*(t-k)*(t-y)/((q-f)*(q-k)*(q-y)),F=(t-f)*(t-q)*(t-y)/((k-f)*(k-q)*(k-y)),M=(t-f)*(t-q)*(t-k)/((y-f)*(y-q)*(y-k)),R=(v-w)*(v-e)*(v-l)/((Y-w)*(Y-e)*(Y-l)),N=(v-Y)*(v-e)*(v-l)/((w-Y)*(w-e)*(w-l)),W=(v-Y)*(v-w)*(v-l)/((e-Y)*(e-w)*(e-l)),L=(v-Y)*(v-w)*(v-e)/((l-Y)*(l-w)*(l-e)),z=r;for(let S=0;S<z;S++){let Z=S,U=c[Z],V=c[Z+=z],P=c[Z+=z],B=c[Z+=z],C=c[Z+=z],i=c[Z+=z],O=c[Z+=z],nc=c[Z+=z],H=c[Z+=z],p=c[Z+=z],$=c[Z+=z],jc=c[Z+=z],Tc=c[Z+=z],_c=c[Z+=z],tc=c[Z+=z],u=c[Z+=z],cc=c[Z+=z],fc=c[Z+=z],Ec=c[Z+=z],Q=c[Z+=z],Ac=c[Z+=z],J=c[Z+=z],wc=c[Z+=z],gc=c[Z+=z],qc=c[Z+=z],zc=c[Z+=z],kc=c[Z+=z],Zc=c[Z+=z],lc=c[Z+=z],Dc=c[Z+=z],Pc=c[Z+=z],Sc=c[Z+=z],Uc=c[Z+=z],Vc=c[Z+=z],Wc=c[Z+=z],$c=c[Z+=z],ac=c[Z+=z],Fc=c[Z+=z],Mc=c[Z+=z],mc=c[Z+=z],Nc=c[Z+=z],K=c[Z+=z],oc=c[Z+=z],Bc=c[Z+=z],sc=c[Z+=z],rc=c[Z+=z],ic=c[Z+=z],Oc=c[Z+=z],pc=c[Z+=z],Lc=c[Z+=z],Cc=c[Z+=z],uc=c[Z+=z],cn=c[Z+=z],nn=c[Z+=z],Qc=c[Z+=z],Gc=c[Z+=z],Hc=c[Z+=z],Ic=c[Z+=z],Jc=c[Z+=z],Rc=c[Z+=z],Kc=c[Z+=z],Yc=c[Z+=z],Xc=c[Z+=z],bc=c[Z+=z],yn=U*A+V*j+P*m+B*D,dn=C*A+i*j+O*m+nc*D,Yn=H*A+p*j+$*m+jc*D,fn=Tc*A+_c*j+tc*m+u*D,Xn=cc*A+fc*j+Ec*m+Q*D,tn=Ac*A+J*j+wc*m+gc*D,T=qc*A+zc*j+kc*m+Zc*D,_=lc*A+Dc*j+Pc*m+Sc*D,E=Uc*A+Vc*j+Wc*m+$c*D,bn=ac*A+Fc*j+Mc*m+mc*D,wn=Nc*A+K*j+oc*m+Bc*D,gn=sc*A+rc*j+ic*m+Oc*D,qn=pc*A+Lc*j+Cc*m+uc*D,zn=cn*A+nn*j+Qc*m+Gc*D,kn=Hc*A+Ic*j+Jc*m+Rc*D,Zn=Kc*A+Yc*j+Xc*m+bc*D,ln=yn*I+dn*G+Yn*F+fn*M,jn=Xn*I+tn*G+T*F+_*M,Tn=E*I+bn*G+wn*F+gn*M,_n=qn*I+zn*G+kn*F+Zn*M;h[x+S]=ln*R+jn*N+Tn*W+_n*L}return r===1?h[x]:h}constructor(n,c,r){super(n,c,r)}};globalThis.Tricubic=Bn;})();
