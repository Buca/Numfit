(()=>{var oc=class{static degree;static variables;constructor(t,c,h=1){this.positions=t,this.values=c,this.dimension=h;let b=this.constructor.degree,f=this.constructor.variables,e=(b+1)**f,o=this.values.constructor;this.coefficients=new o(h*e).fill(0),this.update()}update(){return this.coefficients=this.constructor.coefficients(this.positions,this.values,this.dimension,this.coefficients),this}translate(t){let c=this.constructor.variables,h=this.positions,b=h.length;for(let f=0;f<b;f+=c)if(c===1&&typeof t=="number")h[f]+=t;else for(let e=0;e<c;e++)h[f+e]+=t[e];return this}scale(t,c){let h=this.constructor.variables,b=this.positions,f=b.length;for(let e=0;e<f;e+=h)if(h===1&&typeof t=="number"&&typeof c=="number"){let o=b[e];b[e]=(o-c)*t+c}else for(let o=0;o<h;o++){let n=b[e+o],s=t[o],r=c[o];b[e+o]=(n-r)*s+r}return this}evaluate(t,c=0,h,b=0){let f=this.dimension,e=this.constructor.degree,o=this.constructor.variables,n=e+1,s=!h;h||(h=new this.values.constructor(f));let r=(e+1)**o;for(let i=0;i<f;i++){h[b+i]=0;for(let X=0;X<r;X++){let w=this.coefficients[i*r+X],g=1;for(let l=0;l<o;l++){let z=Math.floor(X/n**l%n);typeof t=="number"?g*=t**z:g*=t[c+l]**z}h[b+i]+=w*g}}return f===1?h[b]:h}step(t,c,h,b){let f=this.dimension,e=this.constructor.variables,o=0;for(let r=0;r<e;r++){let i=typeof t=="number"?t:t[r],X=typeof c=="number"?c:c[r],w=typeof h=="number"?h:h[r];o+=Math.floor(Math.abs(X-i)/w)}o*=f;let n=new this.positions.constructor(e),s;b?s=new this.values.constructor(f).fill(0):s=new this.values.constructor(o).fill(0);for(let r=0;r<=o;r+=f){for(let i=0;i<e;i++){let X=Math.floor(r/e),w=typeof t=="number"?t:t[i],g=typeof t=="number"?h:h[i];n[i]=w+X*g}b?b(e>1?n:n[0],this.evaluate(n,0,s,0)):this.evaluate(n,0,s,r)}return b?this:s}segment(t,c,h,b){let f=this.dimension,e=this.constructor.variables,o=0;if(typeof h=="number")o+=h;else for(let r=0;r<e;r++)o+=h[r];o*=f;let n=new this.positions.constructor(f),s;b?s=this.values.constructor(f).fill(0):s=this.values.constructor(o).fill(0);for(let r=0;r<o;r+=f){for(let i=0;i<f;i++){let X=Math.floor(r/f),w=typeof t=="number"?t:t[i],g=typeof c=="number"?c:c[i],l=typeof h=="number"?h:h[i],z=(g-w)/l;n[i]=w+X*z}b?b(e>1?n:n[0],this.evaluate(n,0,s,0)):this.evaluate(n,0,s,r)}return b?this:s}map(t,c){let h=this.constructor.variables,b=this.dimension,f=b*t.length,e=new this.positions.constructor(h),o;c?o=new this.values.constructor(b):o=new this.values.constructor(f).fill(0);for(let n=0,s=0;n<t.length;n+=h){for(let r=0;r<h;r++)e[r]=t[n+r];c?c(h>1?e:e[0],this.evaluate(e,0,o,0)):this.evaluate(e,0,o,n)}return c?this:o}};var mt=class extends oc{static degree=1;static variables=1;static coefficients(t,c,h=1,b,f=0){b||(b=new c.constructor(h*2));let e=t[0],n=t[1]-e;for(let s=0,r=0;s<h;s++){let i=c[s],w=(c[s+h]-i)/n,g=i-e*w;b[f+r++]=g,b[f+r++]=w}return b}static evaluate(t,c,h=1,b,f,e=0){let o=!f;f||(f=new c.constructor(h));let n=t[0],r=t[1]-n,i=0;for(let X=0;X<h;X++){let w=c[i++],l=(c[i++]-w)/r,z=w-n*l,q=b[X];f[X+e]=l*q+z}if(h===1)f[e];else return f}constructor(t,c,h=1){super(t,c,h)}};globalThis.Linear=mt;var jt=class extends oc{static degree=1;static variables=2;static coefficients(t,c,h=1,b,f=0){b||(b=c.constructor(h*4));let e=t[0],o=t[1],n=t[2],s=t[3],r=1/((n-e)*(s-o)),i=h;for(let X=0,w=0;X<h;X++){let g=X,l=c[g],z=c[g+=h],q=c[g+=h],v=c[g+=h];b[f+w++]=(n*s*l-n*o*q-e*s*z+e*o*v)*r,b[f+w++]=(-s*l+o*q+s*z-o*v)*r,b[f+w++]=(-n*l+n*q+e*z-e*v)*r,b[f+w++]=(l-q-z+v)*r}return b}static evaluate(t,c,h=1,b,f,e=0){f||(f=new c.constructor(h));let o=b[0],n=b[1],s=t[0],r=t[1],i=t[2],X=t[3],w=(o-i)/(s-i),g=(o-s)/(i-s),l=(n-X)/(r-X),z=(n-r)/(X-r),q=h;for(let v=0,Y=0;v<h;v++){let d=v,k=c[d],_=c[d+=q],m=c[d+=q],F=c[d+=q],N=k*w+_*g,J=m*w+F*g;f[e+v]=N*l+J*z}if(h===1)f[e];else return f}constructor(t,c,h=1){super(t,c,h)}};globalThis.Bilinear=jt;var Tt=class extends oc{static degree=1;static variables=3;static evaluate(t,c,h=1,b,f,e=0){f||(f=c.constructor(h));let o=b[0],n=b[1],s=b[2],r=t[0],i=t[1],X=t[2],w=t[3],g=t[4],l=t[5],z=(o-w)/(r-w),q=(o-r)/(w-r),v=(n-g)/(i-g),Y=(n-i)/(g-i),d=(s-l)/(X-l),k=(s-X)/(l-X),_=0;for(let m=0,F=0;m<h;m++){let N=m,J=c[N],H=c[N+=h],A=c[N+=h],M=c[N+=h],L=c[N+=h],D=c[N+=h],U=c[N+=h],Q=c[N+=h],a=J*z+H*q,R=A*z+M*q,Z=L*z+D*q,V=U*z+Q*q,W=a*v+R*Y,P=Z*v+V*Y;f[e+F++]=W*d+P*k}return h===1?f[0]:f}static coefficients(t,c,h=1,b,f,e=0){f||(f=new c.constructor(h*8));let o=t[0],n=t[1],s=t[2],r=t[3],i=t[4],X=t[5],w=1/((r-o)*(i-n)*(X-s));for(let g=0,l=0;g<h;g++){let z=g,q=c[z],v=c[z+=h],Y=c[z+=h],d=c[z+=h],k=c[z+=h],_=c[z+=h],m=c[z+=h],F=c[z+=h],N=(-q*r*i*X+k*r*i*s+Y*r*n*X-m*r*n*s+v*o*i*X-_*o*i*s-d*o*n*X+F*o*n*s)*w,J=(q*i*X-k*i*s-Y*n*X+m*n*s-v*i*X+_*i*s+d*n*X-F*n*s)*w,H=(q*r*X-k*r*s-Y*r*X+m*r*s-v*o*X+_*o*s+d*o*X-F*o*s)*w,A=(-q*X+k*s+Y*X-m*s+v*X-_*s-d*X+F*s)*w,M=(q*r*i-k*r*i-Y*r*n+m*r*n-v*o*i+_*o*i+d*o*n-F*o*n)*w,L=(-q*i+k*i+Y*n-m*n+v*i-_*i-d*n+F*n)*w,D=(-q*r+k*r+Y*r-m*r+v*o-_*o-d*o+F*o)*w,U=(q-k-Y+m-v+_+d-F)*w;f[e+l++]=N,f[e+l++]=J,f[e+l++]=H,f[e+l++]=A,f[e+l++]=M,f[e+l++]=L,f[e+l++]=D,f[e+l++]=U}return f}constructor(t,c,h=1){super(t,c,h)}evaluate(t,c=0,h,b=0){h||(h=new this.values.constructor(this.dimension));let f=t[c+0],e=t[c+1],o=t[c+2];for(let n=0;n<this.dimension;n++){let s=this.coefficients[8*n+0],r=this.coefficients[8*n+1],i=this.coefficients[8*n+2],X=this.coefficients[8*n+3],w=this.coefficients[8*n+4],g=this.coefficients[8*n+5],l=this.coefficients[8*n+6],z=this.coefficients[8*n+7];h[b+n]=-(s+r*f+i*e+X*f*e+(w+g*f+l*e+z*f*e)*o)}return h}};globalThis.Trilinear=Tt;var Et=class extends oc{static degree=2;static variables=1;static coefficients(t,c,h=1,b,f=0){b||(b=new c.constructor(3*h));let e=t[0],o=t[1],n=t[2],s=1/((e-o)*(e-n)),r=1/((o-e)*(o-n)),i=1/((n-e)*(n-o)),X=h;for(let w=0,g=0;w<X;w++){let l=w,z=c[l]*s,q=c[l+=X]*r,v=c[l+=X]*i,Y=z*o*n+q*e*n+v*e*o,d=-(z*(o+n)+q*(e+n)+v*(e+o)),k=z+q+v;b[f+g++]=Y,b[f+g++]=d,b[f+g++]=k}return b}static evaluate(t,c,h=1,b,f,e=0){f=f||new c.constructor(h);let o=typeof b=="number"?b:b[0],n=t[0],s=t[1],r=t[2],i=o-n,X=o-s,w=o-r,g=1/(n-s),l=1/(n-r),z=1/(s-r),q=X*w*g*l,v=-i*w*g*z,Y=i*X*g*l;for(let d=0;d<h;d++){let k=d,_=c[k],m=c[k+=h],F=c[k+=h];f[e+d]=q*_-v*m+Y*F}return h===1?f[e]:f}constructor(t,c,h=1){super(t,c,h)}};globalThis.Quadratic=Et;var _t=class extends oc{static degree=2;static variables=2;static evaluate(t,c,h=1,b,f,e=0){let o=x0-x1,n=x0-x2,s=x1-x2,r=x-x0,i=x-x1,X=x-x2,w=i*X/(d01*d02),g=-(i*X)/(d01*d02),l=i*X/(d01*d02),z=w*w00-g*w10+l*w20,q=w*w01-g*w11+l*w21,v=w*w02-g*w12+l*w22,Y=y-y0,d=y-y1,k=y-y2,_=y0-y1,m=y0-y2,F=y1-y2;return d*k/(_*m)*z-Y*k/(_*F)*q+Y*d/(_*m)*v}static coefficients(t,c,h=1,b,f=0){b||(b=new c.constructor(h*9));let e=t[0],o=t[1],n=t[2],s=t[3],r=t[4],i=t[5],X=e*n,w=e*r,g=n*r,l=o*s,z=o*i,q=s*i,v=1/((e-n)*(e-r)),Y=1/((n-e)*(n-r)),d=1/((r-e)*(r-n)),k=1/((o-s)*(o-i)),_=1/((s-o)*(s-i)),m=1/((i-o)*(i-s)),F=v*k,N=Y*k,J=d*k,H=v*_,A=Y*_,M=d*_,L=v*m,D=Y*m,U=d*m,Q=h,a=c;for(let R=0,Z=0;R<Q;R++){let V=R,W=a[V]*F,P=a[V+=Q]*H,B=a[V+=Q]*L,C=a[V+=Q]*N,$=a[V+=Q]*A,u=a[V+=Q]*D,ec=a[V+=Q]*J,sc=a[V+=Q]*M,vc=a[V+=Q]*U,gc=q*(W*g+C*w+ec*X)+z*(P*g+$*w+sc*X)+l*(B*g+u*w+vc*X),_c=-(s+i)*(W*g-C*w-ec*X)-(o+i)*(P*g-$*w-sc*X)-(o+s)*(B*g-u*w-vc*X),Gc=-(n+r)*(W*q-P*z-B*l)-(e+r)*(C*q-$*z-u*l)-(e+n)*(ec*q-sc*z-vc*l),Ac=W*q-C*q-ec*q+P*z-$*z-sc*z+B*l-u*l-vc*l,rc=W*g-P*g-B*g+C*w-$*w-u*w+ec*X-sc*X-vc*X,cc=(s+i)*(W*(n+r)+C*(e+r)+ec*(e+n))+(o+i)*(P*(n+r)+$*(e+r)+sc*(e+n))+(o+s)*(B*(n+r)+u*(e+r)+vc*(e+n)),tc=-(s+i)*(W+C+ec)-(o+i)*(P+$+sc)-(o+s)*(B+u+vc),bc=-(n+r)*(W+P+B)-(e+r)*(C+$+u)-(e+n)*(ec+sc+vc),Fc=W+C+ec+P+$+sc+B+u+vc;b[f+Z++]=gc,b[f+Z++]=_c,b[f+Z++]=Ac,b[f+Z++]=Gc,b[f+Z++]=cc,b[f+Z++]=tc,b[f+Z++]=rc,b[f+Z++]=bc,b[f+Z++]=Fc}return b}constructor(t,c,h=1){super(t,c,h)}};globalThis.Biquadratic=_t;var At=class extends oc{static degree=2;static variables=3;static coefficients(t,c,h=1,b,f=0){b||(b=new c.constructor(h*27));let e=t[0],o=t[1],n=t[2],s=t[3],r=t[4],i=t[5],X=t[6],w=t[7],g=t[8],l=1/((e-s)*(e-X)),z=1/((s-e)*(s-X)),q=1/((X-e)*(X-s)),v=1/((o-r)*(o-w)),Y=1/((r-o)*(r-w)),d=1/((w-o)*(w-r)),k=1/((n-i)*(n-g)),_=1/((i-n)*(i-g)),m=1/((g-n)*(g-i)),F=l*v*k,N=z*v*k,J=q*v*k,H=l*Y*k,A=z*Y*k,M=q*Y*k,L=l*d*k,D=z*d*k,U=q*d*k,Q=l*v*_,a=z*v*_,R=q*v*_,Z=l*Y*_,V=z*Y*_,W=q*Y*_,P=l*d*_,B=z*d*_,C=q*d*_,$=l*v*m,u=z*v*m,ec=q*v*m,sc=l*Y*m,vc=z*Y*m,gc=q*Y*m,_c=l*d*m,Gc=z*d*m,Ac=q*d*m,rc=new Float32Array(9),cc=new Float32Array(9),tc=new Float32Array(9);rc[0]=s*X,rc[1]=e*X,rc[2]=e*s,rc[3]=-(s+X),rc[4]=-(e+X),rc[5]=-(e+s),rc[6]=1,rc[7]=1,rc[8]=1,cc[0]=r*w,cc[1]=o*w,cc[2]=o*r,cc[3]=-(r+w),cc[4]=-(o+w),cc[5]=-(o+r),cc[6]=1,cc[7]=1,cc[8]=1,tc[0]=i*g,tc[1]=n*g,tc[2]=n*i,tc[3]=-(i+g),tc[4]=-(n+g),tc[5]=-(n+i),tc[6]=1,tc[7]=1,tc[8]=1;for(let bc=0,Fc=c,K=h,Hc=0;bc<K;bc++){let I=bc,zc=c[I]*F,qc=c[I+=K]*N,wc=c[I+=K]*J,ac=c[I+=K]*H,Zc=c[I+=K]*A,kc=c[I+=K]*M,Mc=c[I+=K]*L,Qc=c[I+=K]*D,Rc=c[I+=K]*U,Sc=c[I+=K]*Q,Uc=c[I+=K]*a,Vc=c[I+=K]*R,Wc=c[I+=K]*Z,$c=c[I+=K]*V,Oc=c[I+=K]*W,mc=c[I+=K]*P,jc=c[I+=K]*B,Tc=c[I+=K]*C,lc=c[I+=K]*$,G=c[I+=K]*u,O=c[I+=K]*ec,Nc=c[I+=K]*sc,nc=c[I+=K]*vc,p=c[I+=K]*gc,pc=c[I+=K]*_c,uc=c[I+=K]*Gc,ct=c[I+=K]*Ac;for(let Ic=0,Dc=0;Ic<3;Ic++){let tt=tc[Dc++],nt=tc[Dc++],ot=tc[Dc++];for(let Jc=0,Pc=0;Jc<3;Jc++){let Ec=cc[Pc++],Bc=cc[Pc++],Cc=cc[Pc++];for(let Kc=0,Lc=0;Kc<3;Kc++){let dc=rc[Lc++],Yc=rc[Lc++],Xc=rc[Lc++];b[f+Hc++]=tt*(Ec*(dc*zc+Yc*qc+Xc*wc)+Bc*(dc*ac+Yc*Zc+Xc*kc)+Cc*(dc*Mc+Yc*Qc+Xc*Rc))+nt*(Ec*(dc*Sc+Yc*Uc+Xc*Vc)+Bc*(dc*Wc+Yc*$c+Xc*Oc)+Cc*(dc*mc+Yc*jc+Xc*Tc))+ot*(Ec*(dc*lc+Yc*G+Xc*O)+Bc*(dc*Nc+Yc*nc+Xc*p)+Cc*(dc*pc+Yc*uc+Xc*ct))}}}}return b}static evaluate(t,c,h=1,b,f,e=0){f=f||new c.constructor(h);let o=b[0],n=b[1],s=b[2],r=t[0],i=t[1],X=t[2],w=t[3],g=t[4],l=t[5],z=t[6],q=t[7],v=t[8],Y=(o-w)*(o-z)/((r-w)*(r-z)),d=(o-r)*(o-z)/((w-r)*(w-z)),k=(o-r)*(o-w)/((z-r)*(z-w)),_=(n-g)*(n-q)/((i-g)*(i-q)),m=(n-i)*(n-q)/((g-i)*(g-q)),F=(n-i)*(n-g)/((q-i)*(q-g)),N=(s-l)*(s-v)/((X-l)*(X-v)),J=(s-X)*(s-v)/((l-X)*(l-v)),H=(s-X)*(s-l)/((v-X)*(v-l)),A=c,M=h;for(let L=0;L<M;L++){let D=L,U=A[D]*Y+A[D+=M]*d+A[D+=M]*k,Q=A[D+=M]*Y+A[D+=M]*d+A[D+=M]*k,a=A[D+=M]*Y+A[D+=M]*d+A[D+=M]*k,R=A[D+=M]*Y+A[D+=M]*d+A[D+=M]*k,Z=A[D+=M]*Y+A[D+=M]*d+A[D+=M]*k,V=A[D+=M]*Y+A[D+=M]*d+A[D+=M]*k,W=A[D+=M]*Y+A[D+=M]*d+A[D+=M]*k,P=A[D+=M]*Y+A[D+=M]*d+A[D+=M]*k,B=A[D+=M]*Y+A[D+=M]*d+A[D+=M]*k,C=U*_+Q*m+a*F,$=R*_+Z*m+V*F,u=W*_+P*m+B*F;f[e+L]=C*N+$*J+u*H}return h===1?f[e]:f}constructor(t,c,h=1){super(t,c,h)}};globalThis.Triquadratic=At;var Ft=class extends oc{static degree=3;static variables=1;static evaluate(t,c,h=1,b,f,e=0){f||(f=new c.constructor(h));let o=b[0],n=t[0],s=t[1],r=t[2],i=t[3],X=n-s,w=n-r,g=n-i,l=s-r,z=s-i,q=r-i,v=o-n,Y=o-s,d=o-r,k=o-i,_=Y*d*k/(X*w*g),m=v*d*k/(X*l*z),F=v*Y*k/(w*l*q),N=v*Y*d/(g*z*q),J=h;for(let H=0;H<J;H++){let A=H,M=c[A],L=c[A+=J],D=c[A+=J],U=c[A+=J];f[e+H]=M*_-L*m+D*F-U*N}return J===1?f[e]:f}static coefficients(t,c,h=1,b,f=0){b||(b=new c.constructor(4*h));let e=t[0],o=t[1],n=t[2],s=t[3],r=e*o,i=e*n,X=e*s,w=o*n,g=o*s,l=n*s,z=r*n,q=r*s,v=i*s,Y=w*s,d=1/(e**3-(r+i+X)*e+(z+q+v)-Y),k=1/(o**3-(r+w+g)*o+(z+q+Y)-v),_=1/(n**3-(i+w+l)*n+(z+v+Y)-q),m=1/(s**3-(X+g+l)*s+(q+v+Y)-z),F=h;for(let N=0,J=0;N<h;N++){let H=N,A=c[H]*d,M=c[H+=F]*k,L=c[H+=F]*_,D=c[H+=F]*m,U=-(A*Y+M*v+L*q+D*z),Q=A*(w+g+l)+M*(i+X+l)+L*(r+X+g)+D*(r+i+w),a=-(A*(o+n+s)+M*(e+n+s)+L*(e+o+s)+D*(e+o+n)),R=A+M+L+D;b[f+J++]=U,b[f+J++]=Q,b[f+J++]=a,b[f+J++]=R}return b}constructor(t,c,h=1){super(t,c,h)}};globalThis.Cubic=Ft;function ic(S,t,c){return(S[0]*t[0]+S[1]*t[1]+S[2]*t[2]+S[3]*t[3])*c[0]+(S[0]*t[4]+S[1]*t[5]+S[2]*t[6]+S[3]*t[7])*c[1]+(S[0]*t[8]+S[1]*t[9]+S[2]*t[10]+S[3]*t[11])*c[2]+(S[0]*t[12]+S[1]*t[13]+S[2]*t[14]+S[3]*t[15])*c[3]}var Mt=class extends oc{static degree=3;static variables=2;static coefficients(t,c,h=1,b,f=0){b||(b=new c.constructor(h*16));let e=t[0],o=t[1],n=t[2],s=t[3],r=t[4],i=t[5],X=t[6],w=t[7],g=e*n,l=e*r,z=e*X,q=n*r,v=n*X,Y=r*X,d=g*r,k=g*X,_=l*X,m=q*X,F=q+v+Y,N=l+z+Y,J=g+z+v,H=g+l+q,A=n+r+X,M=e+r+X,L=e+n+X,D=e+n+r,U=[-m,-_,-k,-d],Q=[F,N,J,H],a=[-A,-M,-L,-D],R=[1,1,1,1],Z=e-n,V=e-r,W=e-X,P=n-r,B=n-X,C=r-X,$=o*s,u=o*i,ec=o*w,sc=s*i,vc=s*w,gc=i*w,_c=$*i,Gc=$*w,Ac=u*w,rc=sc*w,cc=o-s,tc=o-i,bc=o-w,Fc=s-i,K=s-w,Hc=i-w,I=1/(Z*V*W),zc=-1/(Z*P*B),qc=1/(V*P*C),wc=-1/(W*B*C),ac=1/(cc*tc*bc),Zc=-1/(cc*Fc*K),kc=1/(tc*Fc*Hc),Mc=-1/(bc*K*Hc),Qc=sc+vc+gc,Rc=u+ec+gc,Sc=$+ec+vc,Uc=$+u+sc,Vc=s+i+w,Wc=o+i+w,$c=o+s+w,Oc=o+s+i,mc=[-rc,-Ac,-Gc,-_c],jc=[Qc,Rc,Sc,Uc],Tc=[-Vc,-Wc,-$c,-Oc],lc=R,G=new Float32Array(16),O=h;for(let Nc=0,nc=0;Nc<O;Nc++){let p=Nc,pc=c[p],uc=c[p+=O],ct=c[p+=O],Ic=c[p+=O],Dc=c[p+=O],tt=c[p+=O],nt=c[p+=O],ot=c[p+=O],Jc=c[p+=O],Pc=c[p+=O],Ec=c[p+=O],Bc=c[p+=O],Cc=c[p+=O],Kc=c[p+=O],Lc=c[p+=O],dc=c[p+=O];G[0]=pc*I*ac,G[1]=uc*zc*ac,G[2]=ct*qc*ac,G[3]=Ic*wc*ac,G[4]=Dc*I*Zc,G[5]=tt*zc*Zc,G[6]=nt*qc*Zc,G[7]=ot*wc*Zc,G[8]=Jc*I*kc,G[9]=Pc*zc*kc,G[10]=Ec*qc*kc,G[11]=Bc*wc*kc,G[12]=Cc*I*Mc,G[13]=Kc*zc*Mc,G[14]=Lc*qc*Mc,G[15]=dc*wc*Mc,b[f+nc++]=ic(U,G,mc),b[f+nc++]=ic(Q,G,mc),b[f+nc++]=ic(a,G,mc),b[f+nc++]=ic(R,G,mc),b[f+nc++]=ic(U,G,jc),b[f+nc++]=ic(Q,G,jc),b[f+nc++]=ic(a,G,jc),b[f+nc++]=ic(R,G,jc),b[f+nc++]=ic(U,G,Tc),b[f+nc++]=ic(Q,G,Tc),b[f+nc++]=ic(a,G,Tc),b[f+nc++]=ic(R,G,Tc),b[f+nc++]=ic(U,G,lc),b[f+nc++]=ic(Q,G,lc),b[f+nc++]=ic(a,G,lc),b[f+nc++]=ic(R,G,lc)}return b}static evaluate(t,c,h=1,b,f,e=0){f||(f=new c.constructor(h));let o=x-x0,n=x-x1,s=x-x2,r=x-x3,i=x0-x1,X=x0-x1,w=x0-x2,g=x1-x2,l=x1-x3,z=x2-x3,q=y-y0,v=y-y1,Y=y-y2,d=y-y3,k=y0-y1,_=y0-y1,m=y0-y2,F=y1-y2,N=y1-y3,J=y2-y3,H=n*s*r/(i*X*w),A=-o*s*r/(i*g*l),M=o*n*r/(X*g*z),L=-o*n*s/(w*l*z),D=v*Y*d/(k*_*m),U=-q*Y*d/(k*F*N),Q=q*v*d/(_*F*J),a=-q*v*Y/(m*N*J),R=v00*H+v10*A+v20*M+v30*L,Z=v01*H+v11*A+v21*M+v31*L,V=v02*H+v12*A+v22*M+v32*L,W=v03*H+v13*A+v23*M+v33*L;return R*D+Z*U+V*Q+W*a}constructor(t,c,h=1){super(t,c,h)}evaluate(t,c=0,h,b=0){let f=this.dimension;h||(h=new this.values.constructor(f));let e=t[0],o=t[1];for(let n=0,s=0;n<f;n++){let r=this.coefficients[s++],i=this.coefficients[s++],X=this.coefficients[s++],w=this.coefficients[s++],g=this.coefficients[s++],l=this.coefficients[s++],z=this.coefficients[s++],q=this.coefficients[s++],v=this.coefficients[s++],Y=this.coefficients[s++],d=this.coefficients[s++],k=this.coefficients[s++],_=this.coefficients[s++],m=this.coefficients[s++],F=this.coefficients[s++],N=this.coefficients[s++];h[n]=r+i*e+X*e**2+w*e**3+(g+l*e+z*e**2+q*e**3)*o+(v+Y*e+d*e**2+k*e**3)*o**2+(_+m*e+F*e**2+N*e**3)*o**3}return h}};globalThis.Bicubic=Mt;var Nt=class extends oc{static degree=3;static variables=3;static coefficients(t,c,h=1,b,f=0){b||(b=new c.constructor(64));let e=t[0],o=t[1],n=t[2],s=t[3],r=t[4],i=t[5],X=t[6],w=t[7],g=t[8],l=t[9],z=t[10],q=t[11],v=new t.constructor(4),Y=new t.constructor(4),d=new t.constructor(4);v[0]=1/((e-s)*(e-X)*(e-l)),v[1]=1/((s-e)*(s-X)*(s-l)),v[2]=1/((X-e)*(X-s)*(X-l)),v[3]=1/((l-e)*(l-s)*(l-X)),Y[0]=1/((o-r)*(o-w)*(o-z)),Y[1]=1/((r-o)*(r-w)*(r-z)),Y[2]=1/((w-o)*(w-r)*(w-z)),Y[3]=1/((z-o)*(z-r)*(z-w)),d[0]=1/((n-i)*(n-g)*(n-q)),d[1]=1/((i-n)*(i-g)*(i-q)),d[2]=1/((g-n)*(g-i)*(g-q)),d[3]=1/((q-n)*(q-i)*(q-g));let k=e*s,_=e*X,m=e*l,F=s*X,N=s*l,J=X*l,H=o*r,A=o*w,M=o*z,L=r*w,D=r*z,U=w*z,Q=n*i,a=n*g,R=n*q,Z=i*g,V=i*q,W=g*q,P=new Float32Array(16),B=new Float32Array(16),C=new Float32Array(16);P[0]=-F*l,P[1]=-_*l,P[2]=-k*l,P[3]=-k*X,P[4]=F+N+J,P[5]=_+m+J,P[6]=k+m+N,P[7]=k+_+F,P[8]=-(s+X+l),P[9]=-(e+X+l),P[10]=-(e+s+l),P[11]=-(e+s+X),P[12]=1,P[13]=1,P[14]=1,P[15]=1,B[0]=-L*z,B[1]=-A*z,B[2]=-H*z,B[3]=-H*w,B[4]=L+D+U,B[5]=A+M+U,B[6]=H+M+D,B[7]=H+A+L,B[8]=-(r+w+z),B[9]=-(o+w+z),B[10]=-(o+r+z),B[11]=-(o+r+w),B[12]=1,B[13]=1,B[14]=1,B[15]=1,C[0]=-Z*q,C[1]=-a*q,C[2]=-Q*q,C[3]=-Q*g,C[4]=Z+V+W,C[5]=a+R+W,C[6]=Q+R+V,C[7]=Q+a+Z,C[8]=-(i+g+q),C[9]=-(n+g+q),C[10]=-(n+i+q),C[11]=-(n+i+g),C[12]=1,C[13]=1,C[14]=1,C[15]=1;let $=v[0]*Y[0]*d[0],u=v[1]*Y[0]*d[0],ec=v[2]*Y[0]*d[0],sc=v[3]*Y[0]*d[0],vc=v[0]*Y[1]*d[0],gc=v[1]*Y[1]*d[0],_c=v[2]*Y[1]*d[0],Gc=v[3]*Y[1]*d[0],Ac=v[0]*Y[2]*d[0],rc=v[1]*Y[2]*d[0],cc=v[2]*Y[2]*d[0],tc=v[3]*Y[2]*d[0],bc=v[0]*Y[3]*d[0],Fc=v[1]*Y[3]*d[0],K=v[2]*Y[3]*d[0],Hc=v[3]*Y[3]*d[0],I=v[0]*Y[0]*d[1],zc=v[1]*Y[0]*d[1],qc=v[2]*Y[0]*d[1],wc=v[3]*Y[0]*d[1],ac=v[0]*Y[1]*d[1],Zc=v[1]*Y[1]*d[1],kc=v[2]*Y[1]*d[1],Mc=v[3]*Y[1]*d[1],Qc=v[0]*Y[2]*d[1],Rc=v[1]*Y[2]*d[1],Sc=v[2]*Y[2]*d[1],Uc=v[3]*Y[2]*d[1],Vc=v[0]*Y[3]*d[1],Wc=v[1]*Y[3]*d[1],$c=v[2]*Y[3]*d[1],Oc=v[3]*Y[3]*d[1],mc=v[0]*Y[0]*d[2],jc=v[1]*Y[0]*d[2],Tc=v[2]*Y[0]*d[2],lc=v[3]*Y[0]*d[2],G=v[0]*Y[1]*d[2],O=v[1]*Y[1]*d[2],Nc=v[2]*Y[1]*d[2],nc=v[3]*Y[1]*d[2],p=v[0]*Y[2]*d[2],pc=v[1]*Y[2]*d[2],uc=v[2]*Y[2]*d[2],ct=v[3]*Y[2]*d[2],Ic=v[0]*Y[3]*d[2],Dc=v[1]*Y[3]*d[2],tt=v[2]*Y[3]*d[2],nt=v[3]*Y[3]*d[2],ot=v[0]*Y[0]*d[3],Jc=v[1]*Y[0]*d[3],Pc=v[2]*Y[0]*d[3],Ec=v[3]*Y[0]*d[3],Bc=v[0]*Y[1]*d[3],Cc=v[1]*Y[1]*d[3],Kc=v[2]*Y[1]*d[3],Lc=v[3]*Y[1]*d[3],dc=v[0]*Y[2]*d[3],Yc=v[1]*Y[2]*d[3],Xc=v[2]*Y[2]*d[3],Yt=v[3]*Y[2]*d[3],Xt=v[0]*Y[3]*d[3],bt=v[1]*Y[3]*d[3],wt=v[2]*Y[3]*d[3],lt=v[3]*Y[3]*d[3];for(let st=0,T=h,E=c;st<T;st++){let j=st,rt=E[j]*$,et=E[j+=T]*u,gt=E[j+=T]*ec,Dt=E[j+=T]*sc,Pt=E[j+=T]*vc,Bt=E[j+=T]*gc,zt=E[j+=T]*_c,qt=E[j+=T]*Gc,at=E[j+=T]*Ac,Zt=E[j+=T]*rc,kt=E[j+=T]*cc,It=E[j+=T]*tc,Jt=E[j+=T]*bc,Kt=E[j+=T]*Fc,Lt=E[j+=T]*K,Qt=E[j+=T]*Hc,Rt=E[j+=T]*I,St=E[j+=T]*zc,Ut=E[j+=T]*qc,Vt=E[j+=T]*wc,Wt=E[j+=T]*ac,$t=E[j+=T]*Zc,Ot=E[j+=T]*kc,pt=E[j+=T]*Mc,ut=E[j+=T]*Qc,cn=E[j+=T]*Rc,tn=E[j+=T]*Sc,nn=E[j+=T]*Uc,on=E[j+=T]*Vc,sn=E[j+=T]*Wc,rn=E[j+=T]*$c,en=E[j+=T]*Oc,vn=E[j+=T]*mc,xn=E[j+=T]*jc,hn=E[j+=T]*Tc,yn=E[j+=T]*lc,fn=E[j+=T]*G,dn=E[j+=T]*O,Yn=E[j+=T]*Nc,Xn=E[j+=T]*nc,bn=E[j+=T]*p,wn=E[j+=T]*pc,ln=E[j+=T]*uc,gn=E[j+=T]*ct,zn=E[j+=T]*Ic,qn=E[j+=T]*Dc,an=E[j+=T]*tt,Zn=E[j+=T]*nt,kn=E[j+=T]*ot,mn=E[j+=T]*Jc,jn=E[j+=T]*Pc,Tn=E[j+=T]*Ec,En=E[j+=T]*Bc,_n=E[j+=T]*Cc,An=E[j+=T]*Kc,Fn=E[j+=T]*Lc,Mn=E[j+=T]*dc,Nn=E[j+=T]*Yc,Dn=E[j+=T]*Xc,Pn=E[j+=T]*Yt,Bn=E[j+=T]*Xt,Cn=E[j+=T]*bt,Gn=E[j+=T]*wt,Hn=E[j+=T]*lt;for(let Ct=0,vt=0,In=0;Ct<4;Ct++){let Jn=C[vt++],Kn=C[vt++],Ln=C[vt++],Qn=C[vt++];for(let Gt=0,xt=0;Gt<4;Gt++){let ht=B[xt++],yt=B[xt++],ft=B[xt++],it=B[xt++];for(let Ht=0,dt=0;Ht<4;Ht++){let xc=P[dt++],hc=P[dt++],yc=P[dt++],fc=P[dt++];b[f+64*st+In++]=Jn*(ht*(xc*rt+hc*et+yc*gt+fc*Dt)+yt*(xc*Pt+hc*Bt+yc*zt+fc*qt)+ft*(xc*at+hc*Zt+yc*kt+fc*It)+it*(xc*Jt+hc*Kt+yc*Lt+fc*Qt))+Kn*(ht*(xc*Rt+hc*St+yc*Ut+fc*Vt)+yt*(xc*Wt+hc*$t+yc*Ot+fc*pt)+ft*(xc*ut+hc*cn+yc*tn+fc*nn)+it*(xc*on+hc*sn+yc*rn+fc*en))+Ln*(ht*(xc*vn+hc*xn+yc*hn+fc*yn)+yt*(xc*fn+hc*dn+yc*Yn+fc*Xn)+ft*(xc*bn+hc*wn+yc*ln+fc*gn)+it*(xc*zn+hc*qn+yc*an+fc*Zn))+Qn*(ht*(xc*kn+hc*mn+yc*jn+fc*Tn)+yt*(xc*En+hc*_n+yc*An+fc*Fn)+ft*(xc*Mn+hc*Nn+yc*Dn+fc*Pn)+it*(xc*Bn+hc*Cn+yc*Gn+fc*Hn))}}}}return b}static evaluate(t,c,h=1,b,f,e=0){f=f||new c.constructor(h);let o=b[0],n=b[1],s=b[2],r=t[0],i=t[1],X=t[2],w=t[3],g=t[4],l=t[5],z=t[6],q=t[7],v=t[8],Y=t[9],d=t[10],k=t[11],_=(o-w)*(o-z)*(o-Y)/((r-w)*(r-z)*(r-Y)),m=(o-r)*(o-z)*(o-Y)/((w-r)*(w-z)*(w-Y)),F=(o-r)*(o-w)*(o-Y)/((z-r)*(z-w)*(z-Y)),N=(o-r)*(o-w)*(o-z)/((Y-r)*(Y-w)*(Y-z)),J=(n-g)*(n-q)*(n-d)/((i-g)*(i-q)*(i-d)),H=(n-i)*(n-q)*(n-d)/((g-i)*(g-q)*(g-d)),A=(n-i)*(n-g)*(n-d)/((q-i)*(q-g)*(q-d)),M=(n-i)*(n-g)*(n-q)/((d-i)*(d-g)*(d-q)),L=(s-l)*(s-v)*(s-k)/((X-l)*(X-v)*(X-k)),D=(s-X)*(s-v)*(s-k)/((l-X)*(l-v)*(l-k)),U=(s-X)*(s-l)*(s-k)/((v-X)*(v-l)*(v-k)),Q=(s-X)*(s-l)*(s-v)/((k-X)*(k-l)*(k-v)),a=h;for(let R=0;R<a;R++){let Z=R,V=c[Z],W=c[Z+=a],P=c[Z+=a],B=c[Z+=a],C=c[Z+=a],$=c[Z+=a],u=c[Z+=a],ec=c[Z+=a],sc=c[Z+=a],vc=c[Z+=a],gc=c[Z+=a],_c=c[Z+=a],Gc=c[Z+=a],Ac=c[Z+=a],rc=c[Z+=a],cc=c[Z+=a],tc=c[Z+=a],bc=c[Z+=a],Fc=c[Z+=a],K=c[Z+=a],Hc=c[Z+=a],I=c[Z+=a],zc=c[Z+=a],qc=c[Z+=a],wc=c[Z+=a],ac=c[Z+=a],Zc=c[Z+=a],kc=c[Z+=a],Mc=c[Z+=a],Qc=c[Z+=a],Rc=c[Z+=a],Sc=c[Z+=a],Uc=c[Z+=a],Vc=c[Z+=a],Wc=c[Z+=a],$c=c[Z+=a],Oc=c[Z+=a],mc=c[Z+=a],jc=c[Z+=a],Tc=c[Z+=a],lc=c[Z+=a],G=c[Z+=a],O=c[Z+=a],Nc=c[Z+=a],nc=c[Z+=a],p=c[Z+=a],pc=c[Z+=a],uc=c[Z+=a],ct=c[Z+=a],Ic=c[Z+=a],Dc=c[Z+=a],tt=c[Z+=a],nt=c[Z+=a],ot=c[Z+=a],Jc=c[Z+=a],Pc=c[Z+=a],Ec=c[Z+=a],Bc=c[Z+=a],Cc=c[Z+=a],Kc=c[Z+=a],Lc=c[Z+=a],dc=c[Z+=a],Yc=c[Z+=a],Xc=c[Z+=a],Yt=V*_+W*m+P*F+B*N,Xt=C*_+$*m+u*F+ec*N,bt=sc*_+vc*m+gc*F+_c*N,wt=sc*rx0+Ac*m+rc*F+cc*N,lt=tc*_+bc*m+Fc*F+K*N,st=Hc*_+I*m+zc*F+qc*N,T=wc*_+ac*m+Zc*F+kc*N,E=wc*rx0+Qc*m+Rc*F+Sc*N,j=Uc*_+Vc*m+Wc*F+$c*N,rt=Oc*_+mc*m+jc*F+Tc*N,et=lc*_+G*m+O*F+Nc*N,gt=lc*rx0+p*m+pc*F+uc*N,Dt=ct*_+Ic*m+Dc*F+tt*N,Pt=nt*_+ot*m+Jc*F+Pc*N,Bt=Ec*_+Bc*m+Cc*F+Kc*N,zt=Ec*rx0+dc*m+Yc*F+Xc*N,qt=Yt*J+Xt*H+bt*A+wt*M,at=lt*J+st*H+T*A+E*M,Zt=j*J+rt*H+et*A+gt*M,kt=j*J+rt*H+et*A+zt*M;f[e+R]=qt*L+at*D+Zt*U+kt*Q}return h===1?f[e]:f}constructor(t,c,h){super(t,c,h)}};globalThis.Tricubic=Nt;})();
