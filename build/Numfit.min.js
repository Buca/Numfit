(()=>{var oc=class{static degree;static variables;constructor(t,c,i=1){this.positions=t,this.values=c,this.dimension=i;let b=this.constructor.degree,h=this.constructor.variables,e=(b+1)**h,o=this.values.constructor;this.coefficients=new o(i*e).fill(0),this.update()}update(){return this.coefficients=this.constructor.coefficients(this.positions,this.values,this.dimension,this.coefficients),this}translate(t){let c=this.constructor.variables,i=this.positions,b=i.length;for(let h=0;h<b;h+=c)if(c===1&&typeof t=="number")i[h]+=t;else for(let e=0;e<c;e++)i[h+e]+=t[e];return this}scale(t,c){let i=this.constructor.variables,b=this.positions,h=b.length;for(let e=0;e<h;e+=i)if(i===1&&typeof t=="number"&&typeof c=="number"){let o=b[e];b[e]=(o-c)*t+c}else for(let o=0;o<i;o++){let n=b[e+o],s=t[o],r=c[o];b[e+o]=(n-r)*s+r}return this}evaluate(t,c=0,i,b=0){let h=this.dimension,e=this.constructor.degree,o=this.constructor.variables,n=e+1,s=!i;i||(i=new this.values.constructor(h));let r=(e+1)**o;for(let f=0;f<h;f++){i[b+f]=0;for(let X=0;X<r;X++){let l=this.coefficients[f*r+X],g=1;for(let w=0;w<o;w++){let z=Math.floor(X/n**w%n);typeof t=="number"?g*=t**z:g*=t[c+w]**z}i[b+f]+=l*g}}return h===1&&s?i[b]:i}step(t,c,i,b){let h=this.dimension,e=this.constructor.variables,o=0;for(let r=0;r<e;r++){let f=typeof t=="number"?t:t[r],X=typeof c=="number"?c:c[r],l=typeof i=="number"?i:i[r];o+=Math.floor(Math.abs(X-f)/l)}o*=h;let n=new this.positions.constructor(e),s;b?s=new this.values.constructor(h).fill(0):s=new this.values.constructor(o).fill(0);for(let r=0;r<=o;r+=h){for(let f=0;f<e;f++){let X=Math.floor(r/e),l=typeof t=="number"?t:t[f],g=typeof t=="number"?i:i[f];n[f]=l+X*g}b?b(n,this.evaluate(n,0,s,0)):this.evaluate(n,0,s,r)}return b?this:s}segment(t,c,i,b){let h=this.dimension,e=this.constructor.variables,o=0;if(typeof i=="number")o+=i;else for(let r=0;r<e;r++)o+=i[r];o*=h;let n=new this.positions.constructor(h),s;b?s=this.values.constructor(h).fill(0):s=this.values.constructor(o).fill(0);for(let r=0;r<o;r+=h){for(let f=0;f<h;f++){let X=Math.floor(r/h),l=typeof t=="number"?t:t[f],g=typeof c=="number"?c:c[f],w=typeof i=="number"?i:i[f],z=(g-l)/w;n[f]=l+X*z}b?b(n,this.evaluate(n,0,s,0)):this.evaluate(n,0,s,r)}return b?this:s}map(t,c){let i=this.constructor.variables,b=this.dimension,h=b*t.length,e=new this.positions.constructor(i),o;c?o=new this.values.constructor(b):o=new this.values.constructor(h).fill(0);for(let n=0,s=0;n<t.length;n+=i){for(let r=0;r<i;r++)e[r]=t[n+r];c?c(e,this.evaluate(e,0,o,0)):this.evaluate(e,0,o,n)}return console.log(o),c?this:o}};var mt=class extends oc{static degree=1;static variables=1;static coefficients(t,c,i=1,b,h=0){b||(b=new c.constructor(i*2));let e=t[0],n=t[1]-e;for(let s=0,r=0;s<i;s++){let f=c[s],l=(c[s+i]-f)/n,g=f-e*l;b[h+r++]=g,b[h+r++]=l}return b}static evaluate(t,c,i=1,b,h,e=0){let o=!h;h||(h=new c.constructor(i));let n=t[0],r=t[1]-n,f=0;for(let X=0;X<i;X++){let l=c[f++],w=(c[f++]-l)/r,z=l-n*w,q=b[X];h[X+e]=w*q+z}if(i===1)h[e];else return h}constructor(t,c,i=1){super(t,c,i)}};globalThis.Linear=mt;var jt=class extends oc{static degree=1;static variables=2;static coefficients(t,c,i=1,b,h=0){b||(b=c.constructor(i*4));let e=t[0],o=t[1],n=t[2],s=t[3],r=1/((n-e)*(s-o)),f=i;for(let X=0,l=0;X<i;X++){let g=X,w=c[g],z=c[g+=i],q=c[g+=i],v=c[g+=i];b[h+l++]=(n*s*w-n*o*q-e*s*z+e*o*v)*r,b[h+l++]=(-s*w+o*q+s*z-o*v)*r,b[h+l++]=(-n*w+n*q+e*z-e*v)*r,b[h+l++]=(w-q-z+v)*r}return b}static evaluate(t,c,i=1,b,h,e=0){h||(h=new c.constructor(i));let o=b[0],n=b[1],s=t[0],r=t[1],f=t[2],X=t[3],l=(o-f)/(s-f),g=(o-s)/(f-s),w=(n-X)/(r-X),z=(n-r)/(X-r),q=i;for(let v=0,Y=0;v<i;v++){let d=v,k=c[d],_=c[d+=q],m=c[d+=q],F=c[d+=q],N=k*l+_*g,J=m*l+F*g;h[e+v]=N*w+J*z}if(i===1)h[e];else return h}constructor(t,c,i=1){super(t,c,i)}};globalThis.Bilinear=jt;var Tt=class extends oc{static degree=1;static variables=3;static evaluate(t,c,i=1,b,h,e=0){h||(h=c.constructor(i));let o=b[0],n=b[1],s=b[2],r=t[0],f=t[1],X=t[2],l=t[3],g=t[4],w=t[5],z=(o-l)/(r-l),q=(o-r)/(l-r),v=(n-g)/(f-g),Y=(n-f)/(g-f),d=(s-w)/(X-w),k=(s-X)/(w-X),_=0;for(let m=0,F=0;m<i;m++){let N=m,J=c[N],H=c[N+=i],A=c[N+=i],M=c[N+=i],L=c[N+=i],D=c[N+=i],U=c[N+=i],Q=c[N+=i],a=J*z+H*q,R=A*z+M*q,Z=L*z+D*q,V=U*z+Q*q,W=a*v+R*Y,P=Z*v+V*Y;h[e+F++]=W*d+P*k}return i===1?h[0]:h}static coefficients(t,c,i=1,b,h,e=0){h||(h=new c.constructor(i*8));let o=t[0],n=t[1],s=t[2],r=t[3],f=t[4],X=t[5],l=1/((r-o)*(f-n)*(X-s));for(let g=0,w=0;g<i;g++){let z=g,q=c[z],v=c[z+=i],Y=c[z+=i],d=c[z+=i],k=c[z+=i],_=c[z+=i],m=c[z+=i],F=c[z+=i],N=(-q*r*f*X+k*r*f*s+Y*r*n*X-m*r*n*s+v*o*f*X-_*o*f*s-d*o*n*X+F*o*n*s)*l,J=(q*f*X-k*f*s-Y*n*X+m*n*s-v*f*X+_*f*s+d*n*X-F*n*s)*l,H=(q*r*X-k*r*s-Y*r*X+m*r*s-v*o*X+_*o*s+d*o*X-F*o*s)*l,A=(-q*X+k*s+Y*X-m*s+v*X-_*s-d*X+F*s)*l,M=(q*r*f-k*r*f-Y*r*n+m*r*n-v*o*f+_*o*f+d*o*n-F*o*n)*l,L=(-q*f+k*f+Y*n-m*n+v*f-_*f-d*n+F*n)*l,D=(-q*r+k*r+Y*r-m*r+v*o-_*o-d*o+F*o)*l,U=(q-k-Y+m-v+_+d-F)*l;h[e+w++]=N,h[e+w++]=J,h[e+w++]=H,h[e+w++]=A,h[e+w++]=M,h[e+w++]=L,h[e+w++]=D,h[e+w++]=U}return h}constructor(t,c,i=1){super(t,c,i)}evaluate(t,c=0,i,b=0){i||(i=new this.values.constructor(this.dimension));let h=t[c+0],e=t[c+1],o=t[c+2];for(let n=0;n<this.dimension;n++){let s=this.coefficients[8*n+0],r=this.coefficients[8*n+1],f=this.coefficients[8*n+2],X=this.coefficients[8*n+3],l=this.coefficients[8*n+4],g=this.coefficients[8*n+5],w=this.coefficients[8*n+6],z=this.coefficients[8*n+7];i[b+n]=-(s+r*h+f*e+X*h*e+(l+g*h+w*e+z*h*e)*o)}return i}};globalThis.Trilinear=Tt;var Et=class extends oc{static degree=2;static variables=1;static coefficients(t,c,i=1,b,h=0){b||(b=new c.constructor(3*i));let e=t[0],o=t[1],n=t[2],s=1/((e-o)*(e-n)),r=1/((o-e)*(o-n)),f=1/((n-e)*(n-o)),X=i;for(let l=0,g=0;l<X;l++){let w=l,z=c[w]*s,q=c[w+=X]*r,v=c[w+=X]*f,Y=z*o*n+q*e*n+v*e*o,d=-(z*(o+n)+q*(e+n)+v*(e+o)),k=z+q+v;b[h+g++]=Y,b[h+g++]=d,b[h+g++]=k}return b}static evaluate(t,c,i=1,b,h,e=0){h=h||new c.constructor(i);let o=typeof b=="number"?b:b[0],n=t[0],s=t[1],r=t[2],f=o-n,X=o-s,l=o-r,g=1/(n-s),w=1/(n-r),z=1/(s-r),q=X*l*g*w,v=-f*l*g*z,Y=f*X*g*w;for(let d=0;d<i;d++){let k=d,_=c[k],m=c[k+=i],F=c[k+=i];h[e+d]=q*_-v*m+Y*F}return i===1?h[e]:h}constructor(t,c,i=1){super(t,c,i)}};globalThis.Quadratic=Et;var _t=class extends oc{static degree=2;static variables=2;static evaluate(t,c,i=1,b,h,e=0){let o=x0-x1,n=x0-x2,s=x1-x2,r=x-x0,f=x-x1,X=x-x2,l=f*X/(d01*d02),g=-(f*X)/(d01*d02),w=f*X/(d01*d02),z=l*w00-g*w10+w*w20,q=l*w01-g*w11+w*w21,v=l*w02-g*w12+w*w22,Y=y-y0,d=y-y1,k=y-y2,_=y0-y1,m=y0-y2,F=y1-y2;return d*k/(_*m)*z-Y*k/(_*F)*q+Y*d/(_*m)*v}static coefficients(t,c,i=1,b,h=0){b||(b=new c.constructor(i*9));let e=t[0],o=t[1],n=t[2],s=t[3],r=t[4],f=t[5],X=e*n,l=e*r,g=n*r,w=o*s,z=o*f,q=s*f,v=1/((e-n)*(e-r)),Y=1/((n-e)*(n-r)),d=1/((r-e)*(r-n)),k=1/((o-s)*(o-f)),_=1/((s-o)*(s-f)),m=1/((f-o)*(f-s)),F=v*k,N=Y*k,J=d*k,H=v*_,A=Y*_,M=d*_,L=v*m,D=Y*m,U=d*m,Q=i,a=c;for(let R=0,Z=0;R<Q;R++){let V=R,W=a[V]*F,P=a[V+=Q]*H,B=a[V+=Q]*L,C=a[V+=Q]*N,$=a[V+=Q]*A,u=a[V+=Q]*D,ec=a[V+=Q]*J,sc=a[V+=Q]*M,vc=a[V+=Q]*U,gc=q*(W*g+C*l+ec*X)+z*(P*g+$*l+sc*X)+w*(B*g+u*l+vc*X),_c=-(s+f)*(W*g-C*l-ec*X)-(o+f)*(P*g-$*l-sc*X)-(o+s)*(B*g-u*l-vc*X),Gc=-(n+r)*(W*q-P*z-B*w)-(e+r)*(C*q-$*z-u*w)-(e+n)*(ec*q-sc*z-vc*w),Ac=W*q-C*q-ec*q+P*z-$*z-sc*z+B*w-u*w-vc*w,rc=W*g-P*g-B*g+C*l-$*l-u*l+ec*X-sc*X-vc*X,cc=(s+f)*(W*(n+r)+C*(e+r)+ec*(e+n))+(o+f)*(P*(n+r)+$*(e+r)+sc*(e+n))+(o+s)*(B*(n+r)+u*(e+r)+vc*(e+n)),tc=-(s+f)*(W+C+ec)-(o+f)*(P+$+sc)-(o+s)*(B+u+vc),bc=-(n+r)*(W+P+B)-(e+r)*(C+$+u)-(e+n)*(ec+sc+vc),Fc=W+C+ec+P+$+sc+B+u+vc;b[h+Z++]=gc,b[h+Z++]=_c,b[h+Z++]=Ac,b[h+Z++]=Gc,b[h+Z++]=cc,b[h+Z++]=tc,b[h+Z++]=rc,b[h+Z++]=bc,b[h+Z++]=Fc}return b}constructor(t,c,i=1){super(t,c,i)}};globalThis.Biquadratic=_t;var At=class extends oc{static degree=2;static variables=3;static coefficients(t,c,i=1,b,h=0){b||(b=new c.constructor(i*27));let e=t[0],o=t[1],n=t[2],s=t[3],r=t[4],f=t[5],X=t[6],l=t[7],g=t[8],w=1/((e-s)*(e-X)),z=1/((s-e)*(s-X)),q=1/((X-e)*(X-s)),v=1/((o-r)*(o-l)),Y=1/((r-o)*(r-l)),d=1/((l-o)*(l-r)),k=1/((n-f)*(n-g)),_=1/((f-n)*(f-g)),m=1/((g-n)*(g-f)),F=w*v*k,N=z*v*k,J=q*v*k,H=w*Y*k,A=z*Y*k,M=q*Y*k,L=w*d*k,D=z*d*k,U=q*d*k,Q=w*v*_,a=z*v*_,R=q*v*_,Z=w*Y*_,V=z*Y*_,W=q*Y*_,P=w*d*_,B=z*d*_,C=q*d*_,$=w*v*m,u=z*v*m,ec=q*v*m,sc=w*Y*m,vc=z*Y*m,gc=q*Y*m,_c=w*d*m,Gc=z*d*m,Ac=q*d*m,rc=new Float32Array(9),cc=new Float32Array(9),tc=new Float32Array(9);rc[0]=s*X,rc[1]=e*X,rc[2]=e*s,rc[3]=-(s+X),rc[4]=-(e+X),rc[5]=-(e+s),rc[6]=1,rc[7]=1,rc[8]=1,cc[0]=r*l,cc[1]=o*l,cc[2]=o*r,cc[3]=-(r+l),cc[4]=-(o+l),cc[5]=-(o+r),cc[6]=1,cc[7]=1,cc[8]=1,tc[0]=f*g,tc[1]=n*g,tc[2]=n*f,tc[3]=-(f+g),tc[4]=-(n+g),tc[5]=-(n+f),tc[6]=1,tc[7]=1,tc[8]=1;for(let bc=0,Fc=c,K=i,Hc=0;bc<K;bc++){let I=bc,zc=c[I]*F,qc=c[I+=K]*N,lc=c[I+=K]*J,ac=c[I+=K]*H,Zc=c[I+=K]*A,kc=c[I+=K]*M,Mc=c[I+=K]*L,Qc=c[I+=K]*D,Rc=c[I+=K]*U,Sc=c[I+=K]*Q,Uc=c[I+=K]*a,Vc=c[I+=K]*R,Wc=c[I+=K]*Z,$c=c[I+=K]*V,Oc=c[I+=K]*W,mc=c[I+=K]*P,jc=c[I+=K]*B,Tc=c[I+=K]*C,wc=c[I+=K]*$,G=c[I+=K]*u,O=c[I+=K]*ec,Nc=c[I+=K]*sc,nc=c[I+=K]*vc,p=c[I+=K]*gc,pc=c[I+=K]*_c,uc=c[I+=K]*Gc,ct=c[I+=K]*Ac;for(let Ic=0,Dc=0;Ic<3;Ic++){let tt=tc[Dc++],nt=tc[Dc++],ot=tc[Dc++];for(let Jc=0,Pc=0;Jc<3;Jc++){let Ec=cc[Pc++],Bc=cc[Pc++],Cc=cc[Pc++];for(let Kc=0,Lc=0;Kc<3;Kc++){let dc=rc[Lc++],Yc=rc[Lc++],Xc=rc[Lc++];b[h+Hc++]=tt*(Ec*(dc*zc+Yc*qc+Xc*lc)+Bc*(dc*ac+Yc*Zc+Xc*kc)+Cc*(dc*Mc+Yc*Qc+Xc*Rc))+nt*(Ec*(dc*Sc+Yc*Uc+Xc*Vc)+Bc*(dc*Wc+Yc*$c+Xc*Oc)+Cc*(dc*mc+Yc*jc+Xc*Tc))+ot*(Ec*(dc*wc+Yc*G+Xc*O)+Bc*(dc*Nc+Yc*nc+Xc*p)+Cc*(dc*pc+Yc*uc+Xc*ct))}}}}return b}static evaluate(t,c,i=1,b,h,e=0){h=h||new c.constructor(i);let o=b[0],n=b[1],s=b[2],r=t[0],f=t[1],X=t[2],l=t[3],g=t[4],w=t[5],z=t[6],q=t[7],v=t[8],Y=(o-l)*(o-z)/((r-l)*(r-z)),d=(o-r)*(o-z)/((l-r)*(l-z)),k=(o-r)*(o-l)/((z-r)*(z-l)),_=(n-g)*(n-q)/((f-g)*(f-q)),m=(n-f)*(n-q)/((g-f)*(g-q)),F=(n-f)*(n-g)/((q-f)*(q-g)),N=(s-w)*(s-v)/((X-w)*(X-v)),J=(s-X)*(s-v)/((w-X)*(w-v)),H=(s-X)*(s-w)/((v-X)*(v-w)),A=c,M=i;for(let L=0;L<M;L++){let D=L,U=A[D]*Y+A[D+=M]*d+A[D+=M]*k,Q=A[D+=M]*Y+A[D+=M]*d+A[D+=M]*k,a=A[D+=M]*Y+A[D+=M]*d+A[D+=M]*k,R=A[D+=M]*Y+A[D+=M]*d+A[D+=M]*k,Z=A[D+=M]*Y+A[D+=M]*d+A[D+=M]*k,V=A[D+=M]*Y+A[D+=M]*d+A[D+=M]*k,W=A[D+=M]*Y+A[D+=M]*d+A[D+=M]*k,P=A[D+=M]*Y+A[D+=M]*d+A[D+=M]*k,B=A[D+=M]*Y+A[D+=M]*d+A[D+=M]*k,C=U*_+Q*m+a*F,$=R*_+Z*m+V*F,u=W*_+P*m+B*F;h[e+L]=C*N+$*J+u*H}return i===1?h[e]:h}constructor(t,c,i=1){super(t,c,i)}};globalThis.Triquadratic=At;var Ft=class extends oc{static degree=3;static variables=1;static evaluate(t,c,i=1,b,h,e=0){h||(h=new c.constructor(i));let o=b[0],n=t[0],s=t[1],r=t[2],f=t[3],X=n-s,l=n-r,g=n-f,w=s-r,z=s-f,q=r-f,v=o-n,Y=o-s,d=o-r,k=o-f,_=Y*d*k/(X*l*g),m=v*d*k/(X*w*z),F=v*Y*k/(l*w*q),N=v*Y*d/(g*z*q),J=i;for(let H=0;H<J;H++){let A=H,M=c[A],L=c[A+=J],D=c[A+=J],U=c[A+=J];h[e+H]=M*_-L*m+D*F-U*N}return J===1?h[e]:h}static coefficients(t,c,i=1,b,h=0){b||(b=new c.constructor(4*i));let e=t[0],o=t[1],n=t[2],s=t[3],r=e*o,f=e*n,X=e*s,l=o*n,g=o*s,w=n*s,z=r*n,q=r*s,v=f*s,Y=l*s,d=1/(e**3-(r+f+X)*e+(z+q+v)-Y),k=1/(o**3-(r+l+g)*o+(z+q+Y)-v),_=1/(n**3-(f+l+w)*n+(z+v+Y)-q),m=1/(s**3-(X+g+w)*s+(q+v+Y)-z),F=i;for(let N=0,J=0;N<i;N++){let H=N,A=c[H]*d,M=c[H+=F]*k,L=c[H+=F]*_,D=c[H+=F]*m,U=-(A*Y+M*v+L*q+D*z),Q=A*(l+g+w)+M*(f+X+w)+L*(r+X+g)+D*(r+f+l),a=-(A*(o+n+s)+M*(e+n+s)+L*(e+o+s)+D*(e+o+n)),R=A+M+L+D;b[h+J++]=U,b[h+J++]=Q,b[h+J++]=a,b[h+J++]=R}return b}constructor(t,c,i=1){super(t,c,i)}};globalThis.Cubic=Ft;function ic(S,t,c){return(S[0]*t[0]+S[1]*t[1]+S[2]*t[2]+S[3]*t[3])*c[0]+(S[0]*t[4]+S[1]*t[5]+S[2]*t[6]+S[3]*t[7])*c[1]+(S[0]*t[8]+S[1]*t[9]+S[2]*t[10]+S[3]*t[11])*c[2]+(S[0]*t[12]+S[1]*t[13]+S[2]*t[14]+S[3]*t[15])*c[3]}var Mt=class extends oc{static degree=3;static variables=2;static coefficients(t,c,i=1,b,h=0){b||(b=new c.constructor(i*16));let e=t[0],o=t[1],n=t[2],s=t[3],r=t[4],f=t[5],X=t[6],l=t[7],g=e*n,w=e*r,z=e*X,q=n*r,v=n*X,Y=r*X,d=g*r,k=g*X,_=w*X,m=q*X,F=q+v+Y,N=w+z+Y,J=g+z+v,H=g+w+q,A=n+r+X,M=e+r+X,L=e+n+X,D=e+n+r,U=[-m,-_,-k,-d],Q=[F,N,J,H],a=[-A,-M,-L,-D],R=[1,1,1,1],Z=e-n,V=e-r,W=e-X,P=n-r,B=n-X,C=r-X,$=o*s,u=o*f,ec=o*l,sc=s*f,vc=s*l,gc=f*l,_c=$*f,Gc=$*l,Ac=u*l,rc=sc*l,cc=o-s,tc=o-f,bc=o-l,Fc=s-f,K=s-l,Hc=f-l,I=1/(Z*V*W),zc=-1/(Z*P*B),qc=1/(V*P*C),lc=-1/(W*B*C),ac=1/(cc*tc*bc),Zc=-1/(cc*Fc*K),kc=1/(tc*Fc*Hc),Mc=-1/(bc*K*Hc),Qc=sc+vc+gc,Rc=u+ec+gc,Sc=$+ec+vc,Uc=$+u+sc,Vc=s+f+l,Wc=o+f+l,$c=o+s+l,Oc=o+s+f,mc=[-rc,-Ac,-Gc,-_c],jc=[Qc,Rc,Sc,Uc],Tc=[-Vc,-Wc,-$c,-Oc],wc=R,G=new Float32Array(16),O=i;for(let Nc=0,nc=0;Nc<O;Nc++){let p=Nc,pc=c[p],uc=c[p+=O],ct=c[p+=O],Ic=c[p+=O],Dc=c[p+=O],tt=c[p+=O],nt=c[p+=O],ot=c[p+=O],Jc=c[p+=O],Pc=c[p+=O],Ec=c[p+=O],Bc=c[p+=O],Cc=c[p+=O],Kc=c[p+=O],Lc=c[p+=O],dc=c[p+=O];G[0]=pc*I*ac,G[1]=uc*zc*ac,G[2]=ct*qc*ac,G[3]=Ic*lc*ac,G[4]=Dc*I*Zc,G[5]=tt*zc*Zc,G[6]=nt*qc*Zc,G[7]=ot*lc*Zc,G[8]=Jc*I*kc,G[9]=Pc*zc*kc,G[10]=Ec*qc*kc,G[11]=Bc*lc*kc,G[12]=Cc*I*Mc,G[13]=Kc*zc*Mc,G[14]=Lc*qc*Mc,G[15]=dc*lc*Mc,b[h+nc++]=ic(U,G,mc),b[h+nc++]=ic(Q,G,mc),b[h+nc++]=ic(a,G,mc),b[h+nc++]=ic(R,G,mc),b[h+nc++]=ic(U,G,jc),b[h+nc++]=ic(Q,G,jc),b[h+nc++]=ic(a,G,jc),b[h+nc++]=ic(R,G,jc),b[h+nc++]=ic(U,G,Tc),b[h+nc++]=ic(Q,G,Tc),b[h+nc++]=ic(a,G,Tc),b[h+nc++]=ic(R,G,Tc),b[h+nc++]=ic(U,G,wc),b[h+nc++]=ic(Q,G,wc),b[h+nc++]=ic(a,G,wc),b[h+nc++]=ic(R,G,wc)}return b}static evaluate(t,c,i=1,b,h,e=0){h||(h=new c.constructor(i));let o=x-x0,n=x-x1,s=x-x2,r=x-x3,f=x0-x1,X=x0-x1,l=x0-x2,g=x1-x2,w=x1-x3,z=x2-x3,q=y-y0,v=y-y1,Y=y-y2,d=y-y3,k=y0-y1,_=y0-y1,m=y0-y2,F=y1-y2,N=y1-y3,J=y2-y3,H=n*s*r/(f*X*l),A=-o*s*r/(f*g*w),M=o*n*r/(X*g*z),L=-o*n*s/(l*w*z),D=v*Y*d/(k*_*m),U=-q*Y*d/(k*F*N),Q=q*v*d/(_*F*J),a=-q*v*Y/(m*N*J),R=v00*H+v10*A+v20*M+v30*L,Z=v01*H+v11*A+v21*M+v31*L,V=v02*H+v12*A+v22*M+v32*L,W=v03*H+v13*A+v23*M+v33*L;return R*D+Z*U+V*Q+W*a}constructor(t,c,i=1){super(t,c,i)}evaluate(t,c=0,i,b=0){let h=this.dimension;i||(i=new this.values.constructor(h));let e=t[0],o=t[1];for(let n=0,s=0;n<h;n++){let r=this.coefficients[s++],f=this.coefficients[s++],X=this.coefficients[s++],l=this.coefficients[s++],g=this.coefficients[s++],w=this.coefficients[s++],z=this.coefficients[s++],q=this.coefficients[s++],v=this.coefficients[s++],Y=this.coefficients[s++],d=this.coefficients[s++],k=this.coefficients[s++],_=this.coefficients[s++],m=this.coefficients[s++],F=this.coefficients[s++],N=this.coefficients[s++];i[n]=r+f*e+X*e**2+l*e**3+(g+w*e+z*e**2+q*e**3)*o+(v+Y*e+d*e**2+k*e**3)*o**2+(_+m*e+F*e**2+N*e**3)*o**3}return i}};globalThis.Bicubic=Mt;var Nt=class extends oc{static degree=3;static variables=3;static coefficients(t,c,i=1,b,h=0){b||(b=new c.constructor(64));let e=t[0],o=t[1],n=t[2],s=t[3],r=t[4],f=t[5],X=t[6],l=t[7],g=t[8],w=t[9],z=t[10],q=t[11],v=new t.constructor(4),Y=new t.constructor(4),d=new t.constructor(4);v[0]=1/((e-s)*(e-X)*(e-w)),v[1]=1/((s-e)*(s-X)*(s-w)),v[2]=1/((X-e)*(X-s)*(X-w)),v[3]=1/((w-e)*(w-s)*(w-X)),Y[0]=1/((o-r)*(o-l)*(o-z)),Y[1]=1/((r-o)*(r-l)*(r-z)),Y[2]=1/((l-o)*(l-r)*(l-z)),Y[3]=1/((z-o)*(z-r)*(z-l)),d[0]=1/((n-f)*(n-g)*(n-q)),d[1]=1/((f-n)*(f-g)*(f-q)),d[2]=1/((g-n)*(g-f)*(g-q)),d[3]=1/((q-n)*(q-f)*(q-g));let k=e*s,_=e*X,m=e*w,F=s*X,N=s*w,J=X*w,H=o*r,A=o*l,M=o*z,L=r*l,D=r*z,U=l*z,Q=n*f,a=n*g,R=n*q,Z=f*g,V=f*q,W=g*q,P=new Float32Array(16),B=new Float32Array(16),C=new Float32Array(16);P[0]=-F*w,P[1]=-_*w,P[2]=-k*w,P[3]=-k*X,P[4]=F+N+J,P[5]=_+m+J,P[6]=k+m+N,P[7]=k+_+F,P[8]=-(s+X+w),P[9]=-(e+X+w),P[10]=-(e+s+w),P[11]=-(e+s+X),P[12]=1,P[13]=1,P[14]=1,P[15]=1,B[0]=-L*z,B[1]=-A*z,B[2]=-H*z,B[3]=-H*l,B[4]=L+D+U,B[5]=A+M+U,B[6]=H+M+D,B[7]=H+A+L,B[8]=-(r+l+z),B[9]=-(o+l+z),B[10]=-(o+r+z),B[11]=-(o+r+l),B[12]=1,B[13]=1,B[14]=1,B[15]=1,C[0]=-Z*q,C[1]=-a*q,C[2]=-Q*q,C[3]=-Q*g,C[4]=Z+V+W,C[5]=a+R+W,C[6]=Q+R+V,C[7]=Q+a+Z,C[8]=-(f+g+q),C[9]=-(n+g+q),C[10]=-(n+f+q),C[11]=-(n+f+g),C[12]=1,C[13]=1,C[14]=1,C[15]=1;let $=v[0]*Y[0]*d[0],u=v[1]*Y[0]*d[0],ec=v[2]*Y[0]*d[0],sc=v[3]*Y[0]*d[0],vc=v[0]*Y[1]*d[0],gc=v[1]*Y[1]*d[0],_c=v[2]*Y[1]*d[0],Gc=v[3]*Y[1]*d[0],Ac=v[0]*Y[2]*d[0],rc=v[1]*Y[2]*d[0],cc=v[2]*Y[2]*d[0],tc=v[3]*Y[2]*d[0],bc=v[0]*Y[3]*d[0],Fc=v[1]*Y[3]*d[0],K=v[2]*Y[3]*d[0],Hc=v[3]*Y[3]*d[0],I=v[0]*Y[0]*d[1],zc=v[1]*Y[0]*d[1],qc=v[2]*Y[0]*d[1],lc=v[3]*Y[0]*d[1],ac=v[0]*Y[1]*d[1],Zc=v[1]*Y[1]*d[1],kc=v[2]*Y[1]*d[1],Mc=v[3]*Y[1]*d[1],Qc=v[0]*Y[2]*d[1],Rc=v[1]*Y[2]*d[1],Sc=v[2]*Y[2]*d[1],Uc=v[3]*Y[2]*d[1],Vc=v[0]*Y[3]*d[1],Wc=v[1]*Y[3]*d[1],$c=v[2]*Y[3]*d[1],Oc=v[3]*Y[3]*d[1],mc=v[0]*Y[0]*d[2],jc=v[1]*Y[0]*d[2],Tc=v[2]*Y[0]*d[2],wc=v[3]*Y[0]*d[2],G=v[0]*Y[1]*d[2],O=v[1]*Y[1]*d[2],Nc=v[2]*Y[1]*d[2],nc=v[3]*Y[1]*d[2],p=v[0]*Y[2]*d[2],pc=v[1]*Y[2]*d[2],uc=v[2]*Y[2]*d[2],ct=v[3]*Y[2]*d[2],Ic=v[0]*Y[3]*d[2],Dc=v[1]*Y[3]*d[2],tt=v[2]*Y[3]*d[2],nt=v[3]*Y[3]*d[2],ot=v[0]*Y[0]*d[3],Jc=v[1]*Y[0]*d[3],Pc=v[2]*Y[0]*d[3],Ec=v[3]*Y[0]*d[3],Bc=v[0]*Y[1]*d[3],Cc=v[1]*Y[1]*d[3],Kc=v[2]*Y[1]*d[3],Lc=v[3]*Y[1]*d[3],dc=v[0]*Y[2]*d[3],Yc=v[1]*Y[2]*d[3],Xc=v[2]*Y[2]*d[3],Yt=v[3]*Y[2]*d[3],Xt=v[0]*Y[3]*d[3],bt=v[1]*Y[3]*d[3],lt=v[2]*Y[3]*d[3],wt=v[3]*Y[3]*d[3];for(let st=0,T=i,E=c;st<T;st++){let j=st,rt=E[j]*$,et=E[j+=T]*u,gt=E[j+=T]*ec,Dt=E[j+=T]*sc,Pt=E[j+=T]*vc,Bt=E[j+=T]*gc,zt=E[j+=T]*_c,qt=E[j+=T]*Gc,at=E[j+=T]*Ac,Zt=E[j+=T]*rc,kt=E[j+=T]*cc,It=E[j+=T]*tc,Jt=E[j+=T]*bc,Kt=E[j+=T]*Fc,Lt=E[j+=T]*K,Qt=E[j+=T]*Hc,Rt=E[j+=T]*I,St=E[j+=T]*zc,Ut=E[j+=T]*qc,Vt=E[j+=T]*lc,Wt=E[j+=T]*ac,$t=E[j+=T]*Zc,Ot=E[j+=T]*kc,pt=E[j+=T]*Mc,ut=E[j+=T]*Qc,cn=E[j+=T]*Rc,tn=E[j+=T]*Sc,nn=E[j+=T]*Uc,on=E[j+=T]*Vc,sn=E[j+=T]*Wc,rn=E[j+=T]*$c,en=E[j+=T]*Oc,vn=E[j+=T]*mc,xn=E[j+=T]*jc,hn=E[j+=T]*Tc,yn=E[j+=T]*wc,fn=E[j+=T]*G,dn=E[j+=T]*O,Yn=E[j+=T]*Nc,Xn=E[j+=T]*nc,bn=E[j+=T]*p,ln=E[j+=T]*pc,wn=E[j+=T]*uc,gn=E[j+=T]*ct,zn=E[j+=T]*Ic,qn=E[j+=T]*Dc,an=E[j+=T]*tt,Zn=E[j+=T]*nt,kn=E[j+=T]*ot,mn=E[j+=T]*Jc,jn=E[j+=T]*Pc,Tn=E[j+=T]*Ec,En=E[j+=T]*Bc,_n=E[j+=T]*Cc,An=E[j+=T]*Kc,Fn=E[j+=T]*Lc,Mn=E[j+=T]*dc,Nn=E[j+=T]*Yc,Dn=E[j+=T]*Xc,Pn=E[j+=T]*Yt,Bn=E[j+=T]*Xt,Cn=E[j+=T]*bt,Gn=E[j+=T]*lt,Hn=E[j+=T]*wt;for(let Ct=0,vt=0,In=0;Ct<4;Ct++){let Jn=C[vt++],Kn=C[vt++],Ln=C[vt++],Qn=C[vt++];for(let Gt=0,xt=0;Gt<4;Gt++){let ht=B[xt++],yt=B[xt++],ft=B[xt++],it=B[xt++];for(let Ht=0,dt=0;Ht<4;Ht++){let xc=P[dt++],hc=P[dt++],yc=P[dt++],fc=P[dt++];b[h+64*st+In++]=Jn*(ht*(xc*rt+hc*et+yc*gt+fc*Dt)+yt*(xc*Pt+hc*Bt+yc*zt+fc*qt)+ft*(xc*at+hc*Zt+yc*kt+fc*It)+it*(xc*Jt+hc*Kt+yc*Lt+fc*Qt))+Kn*(ht*(xc*Rt+hc*St+yc*Ut+fc*Vt)+yt*(xc*Wt+hc*$t+yc*Ot+fc*pt)+ft*(xc*ut+hc*cn+yc*tn+fc*nn)+it*(xc*on+hc*sn+yc*rn+fc*en))+Ln*(ht*(xc*vn+hc*xn+yc*hn+fc*yn)+yt*(xc*fn+hc*dn+yc*Yn+fc*Xn)+ft*(xc*bn+hc*ln+yc*wn+fc*gn)+it*(xc*zn+hc*qn+yc*an+fc*Zn))+Qn*(ht*(xc*kn+hc*mn+yc*jn+fc*Tn)+yt*(xc*En+hc*_n+yc*An+fc*Fn)+ft*(xc*Mn+hc*Nn+yc*Dn+fc*Pn)+it*(xc*Bn+hc*Cn+yc*Gn+fc*Hn))}}}}return b}static evaluate(t,c,i=1,b,h,e=0){h=h||new c.constructor(i);let o=b[0],n=b[1],s=b[2],r=t[0],f=t[1],X=t[2],l=t[3],g=t[4],w=t[5],z=t[6],q=t[7],v=t[8],Y=t[9],d=t[10],k=t[11],_=(o-l)*(o-z)*(o-Y)/((r-l)*(r-z)*(r-Y)),m=(o-r)*(o-z)*(o-Y)/((l-r)*(l-z)*(l-Y)),F=(o-r)*(o-l)*(o-Y)/((z-r)*(z-l)*(z-Y)),N=(o-r)*(o-l)*(o-z)/((Y-r)*(Y-l)*(Y-z)),J=(n-g)*(n-q)*(n-d)/((f-g)*(f-q)*(f-d)),H=(n-f)*(n-q)*(n-d)/((g-f)*(g-q)*(g-d)),A=(n-f)*(n-g)*(n-d)/((q-f)*(q-g)*(q-d)),M=(n-f)*(n-g)*(n-q)/((d-f)*(d-g)*(d-q)),L=(s-w)*(s-v)*(s-k)/((X-w)*(X-v)*(X-k)),D=(s-X)*(s-v)*(s-k)/((w-X)*(w-v)*(w-k)),U=(s-X)*(s-w)*(s-k)/((v-X)*(v-w)*(v-k)),Q=(s-X)*(s-w)*(s-v)/((k-X)*(k-w)*(k-v)),a=i;for(let R=0;R<a;R++){let Z=R,V=c[Z],W=c[Z+=a],P=c[Z+=a],B=c[Z+=a],C=c[Z+=a],$=c[Z+=a],u=c[Z+=a],ec=c[Z+=a],sc=c[Z+=a],vc=c[Z+=a],gc=c[Z+=a],_c=c[Z+=a],Gc=c[Z+=a],Ac=c[Z+=a],rc=c[Z+=a],cc=c[Z+=a],tc=c[Z+=a],bc=c[Z+=a],Fc=c[Z+=a],K=c[Z+=a],Hc=c[Z+=a],I=c[Z+=a],zc=c[Z+=a],qc=c[Z+=a],lc=c[Z+=a],ac=c[Z+=a],Zc=c[Z+=a],kc=c[Z+=a],Mc=c[Z+=a],Qc=c[Z+=a],Rc=c[Z+=a],Sc=c[Z+=a],Uc=c[Z+=a],Vc=c[Z+=a],Wc=c[Z+=a],$c=c[Z+=a],Oc=c[Z+=a],mc=c[Z+=a],jc=c[Z+=a],Tc=c[Z+=a],wc=c[Z+=a],G=c[Z+=a],O=c[Z+=a],Nc=c[Z+=a],nc=c[Z+=a],p=c[Z+=a],pc=c[Z+=a],uc=c[Z+=a],ct=c[Z+=a],Ic=c[Z+=a],Dc=c[Z+=a],tt=c[Z+=a],nt=c[Z+=a],ot=c[Z+=a],Jc=c[Z+=a],Pc=c[Z+=a],Ec=c[Z+=a],Bc=c[Z+=a],Cc=c[Z+=a],Kc=c[Z+=a],Lc=c[Z+=a],dc=c[Z+=a],Yc=c[Z+=a],Xc=c[Z+=a],Yt=V*_+W*m+P*F+B*N,Xt=C*_+$*m+u*F+ec*N,bt=sc*_+vc*m+gc*F+_c*N,lt=sc*rx0+Ac*m+rc*F+cc*N,wt=tc*_+bc*m+Fc*F+K*N,st=Hc*_+I*m+zc*F+qc*N,T=lc*_+ac*m+Zc*F+kc*N,E=lc*rx0+Qc*m+Rc*F+Sc*N,j=Uc*_+Vc*m+Wc*F+$c*N,rt=Oc*_+mc*m+jc*F+Tc*N,et=wc*_+G*m+O*F+Nc*N,gt=wc*rx0+p*m+pc*F+uc*N,Dt=ct*_+Ic*m+Dc*F+tt*N,Pt=nt*_+ot*m+Jc*F+Pc*N,Bt=Ec*_+Bc*m+Cc*F+Kc*N,zt=Ec*rx0+dc*m+Yc*F+Xc*N,qt=Yt*J+Xt*H+bt*A+lt*M,at=wt*J+st*H+T*A+E*M,Zt=j*J+rt*H+et*A+gt*M,kt=j*J+rt*H+et*A+zt*M;h[e+R]=qt*L+at*D+Zt*U+kt*Q}return i===1?h[e]:h}constructor(t,c,i){super(t,c,i)}};globalThis.Tricubic=Nt;})();
