(()=>{var vc=class{static degree;static variables;constructor(n,c,r=1){this.positions=n,this.values=c,this.dimension=r;let f=this.constructor.degree,h=this.constructor.variables,x=(f+1)**h,o=this.values.constructor;this.coefficients=new o(r*x).fill(0),this.update()}get variables(){}get degree(){}update(){return this.coefficients=this.constructor.coefficients(this.positions,this.values,this.dimension,this.coefficients),this}translate(n){let c=this.constructor.variables,r=this.positions,f=r.length;for(let h=0;h<f;h+=c)if(c===1&&typeof n=="number")r[h]+=n;else for(let x=0;x<c;x++)r[h+x]+=n[x];return this}scale(n,c){let r=this.constructor.variables,f=this.positions,h=f.length;for(let x=0;x<h;x+=r)if(r===1&&typeof n=="number"&&typeof c=="number"){let o=f[x];f[x]=(o-c)*n+c}else for(let o=0;o<r;o++){let t=f[x+o],v=n[o],s=c[o];f[x+o]=(t-s)*v+s}return this}evaluate(n,c=0,r,f=0){let h=this.dimension,x=this.constructor.degree,o=this.constructor.variables,t=x+1,v=!r;r||(r=new this.values.constructor(h));let s=(x+1)**o;for(let X=0;X<h;X++){r[f+X]=0;for(let Y=0;Y<s;Y++){let b=this.coefficients[X*s+Y],q=1;for(let w=0;w<o;w++){let g=Math.floor(Y/t**w%t);typeof n=="number"?q*=n**g:q*=n[c+w]**g}r[f+X]+=b*q}}return h===1?r[f]:r}step(n,c,r,f){let h=this.dimension,x=this.constructor.variables,o=1;for(let s=0;s<x;s++){let X=typeof n=="number"?n:n[s],Y=typeof c=="number"?c:c[s],b=typeof r=="number"?r:r[s];o*=Math.abs(Y-X)/b+1}o*=h;let t=new this.positions.constructor(x),v;f?v=new this.values.constructor(h).fill(0):v=new this.values.constructor(Math.ceil(o)).fill(0);for(let s=0;s<=o;s+=h){let X=1;for(let Y=0;Y<x;Y++){let b=typeof n=="number"?n:n[Y],q=typeof c=="number"?c:c[Y],w=typeof n=="number"?r:r[Y],g=Math.floor(Math.abs(q-b)/w)+1,k=Math.floor(s/(h*X))%g;t[Y]=b+k*w,X*=g}f?f(x>1?t:t[0],this.evaluate(t,0,v,0)):this.evaluate(t,0,v,s)}return f?this:v}segment(n,c,r,f){let h=this.constructor.variables,x=new this.positions.constructor(h);for(let o=0;o<h;o++){let t=typeof n=="number"?n:n[o],v=typeof c=="number"?c:c[o],s=typeof r=="number"?r:r[o];x[o]=(v-t)/(s-1)}return this.step(n,c,x)}map(n,c){let r=this.constructor.variables,f=this.dimension,h=f*n.length,x=new this.positions.constructor(r),o;c?o=new this.values.constructor(f):o=new this.values.constructor(h).fill(0);for(let t=0,v=0;t<n.length;t+=r){for(let s=0;s<r;s++)x[s]=n[t+s];c?c(r>1?x:x[0],this.evaluate(x,0,o,0)):this.evaluate(x,0,o,t)}return c?this:o}};var En=class extends vc{static degree=1;static variables=1;static coefficients(n,c,r=1,f,h=0){f||(f=new c.constructor(r*2));let x=n[0],t=n[1]-x;for(let v=0,s=0;v<r;v++){let X=c[v],b=(c[v+r]-X)/t,q=X-x*b;f[h+s++]=q,f[h+s++]=b}return f}static evaluate(n,c,r=1,f,h,x=0){let o=!h;h||(h=new c.constructor(r));let t=n[0],s=n[1]-t,X=0;for(let Y=0;Y<r;Y++){let b=c[X++],w=(c[X++]-b)/s,g=b-t*w,k=typeof f=="number"?f:f[0];h[x+Y]=w*k+g}return r===1?h[x]:h}constructor(n,c,r=1){super(n,c,r)}};globalThis.Linear=En;var An=class extends vc{static degree=1;static variables=2;static coefficients(n,c,r=1,f,h=0){f||(f=c.constructor(r*4));let x=n[0],o=n[1],t=n[2],v=n[3],s=1/((t-x)*(v-o)),X=r;for(let Y=0,b=0;Y<r;Y++){let q=Y,w=c[q],g=c[q+=r],k=c[q+=r],e=c[q+=r];f[h+b++]=(t*v*w-t*o*k-x*v*g+x*o*e)*s,f[h+b++]=(-v*w+o*k+v*g-o*e)*s,f[h+b++]=(-t*w+t*k+x*g-x*e)*s,f[h+b++]=(w-k-g+e)*s}return f}static evaluate(n,c,r=1,f,h,x=0){h||(h=new c.constructor(r));let o=f[0],t=f[1],v=n[0],s=n[1],X=n[2],Y=n[3],b=(o-X)/(v-X),q=(o-v)/(X-v),w=(t-Y)/(s-Y),g=(t-s)/(Y-s),k=r;for(let e=0,d=0;e<r;e++){let y=e,l=c[y],A=c[y+=k],j=c[y+=k],m=c[y+=k],D=l*b+A*q,H=j*b+m*q;h[x+e]=D*w+H*g}return r===1?h[x]:h}constructor(n,c,r=1){super(n,c,r)}};globalThis.Bilinear=An;var Fn=class extends vc{static degree=1;static variables=3;static evaluate(n,c,r=1,f,h,x=0){h||(h=c.constructor(r));let o=f[0],t=f[1],v=f[2],s=n[0],X=n[1],Y=n[2],b=n[3],q=n[4],w=n[5],g=(o-b)/(s-b),k=(o-s)/(b-s),e=(t-q)/(X-q),d=(t-X)/(q-X),y=(v-w)/(Y-w),l=(v-Y)/(w-Y),A=0;for(let j=0,m=0;j<r;j++){let D=j,H=c[D],C=c[D+=r],F=c[D+=r],M=c[D+=r],Q=c[D+=r],N=c[D+=r],V=c[D+=r],K=c[D+=r],z=H*g+C*k,R=F*g+M*k,Z=Q*g+N*k,S=V*g+K*k,U=z*e+R*d,P=Z*e+S*d;h[x+m++]=U*y+P*l}return r===1?h[0]:h}static coefficients(n,c,r=1,f,h,x=0){h||(h=new c.constructor(r*8));let o=n[0],t=n[1],v=n[2],s=n[3],X=n[4],Y=n[5],b=1/((s-o)*(X-t)*(Y-v));for(let q=0,w=0;q<r;q++){let g=q,k=c[g],e=c[g+=r],d=c[g+=r],y=c[g+=r],l=c[g+=r],A=c[g+=r],j=c[g+=r],m=c[g+=r],D=(-k*s*X*Y+l*s*X*v+d*s*t*Y-j*s*t*v+e*o*X*Y-A*o*X*v-y*o*t*Y+m*o*t*v)*b,H=(k*X*Y-l*X*v-d*t*Y+j*t*v-e*X*Y+A*X*v+y*t*Y-m*t*v)*b,C=(k*s*Y-l*s*v-d*s*Y+j*s*v-e*o*Y+A*o*v+y*o*Y-m*o*v)*b,F=(-k*Y+l*v+d*Y-j*v+e*Y-A*v-y*Y+m*v)*b,M=(k*s*X-l*s*X-d*s*t+j*s*t-e*o*X+A*o*X+y*o*t-m*o*t)*b,Q=(-k*X+l*X+d*t-j*t+e*X-A*X-y*t+m*t)*b,N=(-k*s+l*s+d*s-j*s+e*o-A*o-y*o+m*o)*b,V=(k-l-d+j-e+A+y-m)*b;h[x+w++]=D,h[x+w++]=H,h[x+w++]=C,h[x+w++]=F,h[x+w++]=M,h[x+w++]=Q,h[x+w++]=N,h[x+w++]=V}return h}constructor(n,c,r=1){super(n,c,r)}evaluate(n,c=0,r,f=0){r||(r=new this.values.constructor(this.dimension));let h=n[c+0],x=n[c+1],o=n[c+2];for(let t=0;t<this.dimension;t++){let v=this.coefficients[8*t+0],s=this.coefficients[8*t+1],X=this.coefficients[8*t+2],Y=this.coefficients[8*t+3],b=this.coefficients[8*t+4],q=this.coefficients[8*t+5],w=this.coefficients[8*t+6],g=this.coefficients[8*t+7];r[f+t]=-(v+s*h+X*x+Y*h*x+(b+q*h+w*x+g*h*x)*o)}return r}};globalThis.Trilinear=Fn;var Mn=class extends vc{static degree=2;static variables=1;static coefficients(n,c,r=1,f,h=0){f||(f=new c.constructor(3*r));let x=n[0],o=n[1],t=n[2],v=1/((x-o)*(x-t)),s=1/((o-x)*(o-t)),X=1/((t-x)*(t-o)),Y=r;for(let b=0,q=0;b<Y;b++){let w=b,g=c[w]*v,k=c[w+=Y]*s,e=c[w+=Y]*X,d=g*o*t+k*x*t+e*x*o,y=-(g*(o+t)+k*(x+t)+e*(x+o)),l=g+k+e;f[h+q++]=d,f[h+q++]=y,f[h+q++]=l}return f}static evaluate(n,c,r=1,f,h,x=0){h=h||new c.constructor(r);let o=typeof f=="number"?f:f[0],t=n[0],v=n[1],s=n[2],X=o-t,Y=o-v,b=o-s,q=1/(t-v),w=1/(t-s),g=1/(v-s),k=Y*b*q*w,e=-X*b*q*g,d=X*Y*q*w;for(let y=0;y<r;y++){let l=y,A=c[l],j=c[l+=r],m=c[l+=r];h[x+y]=k*A+e*j+d*m}return r===1?h[x]:h}constructor(n,c,r=1){super(n,c,r)}};globalThis.Quadratic=Mn;var mn=class extends vc{static degree=2;static variables=2;static evaluate(n,c,r=1,f,h,x=0){h||(h=new c.constructor(r));let o=f[0],t=f[1],v=n[0],s=n[1],X=n[2],Y=n[3],b=n[4],q=n[5],w=v-X,g=v-b,k=X-b,e=o-v,d=o-X,y=o-b,l=t-s,A=t-Y,j=t-q,m=s-Y,D=s-q,H=Y-q,C=d*y/(w*g),F=-(e*y)/(w*k),M=e*d/(g*k),Q=A*j/(m*D),N=-(l*j)/(m*H),V=l*A/(D*H);for(let K=0;K<r;K++){let z=K,R=c[z],Z=c[z+=r],S=c[z+=r],U=c[z+=r],P=c[z+=r],a=c[z+=r],B=c[z+=r],i=c[z+=r],O=c[z+=r],nc=C*R+F*Z+M*S,G=C*U+F*P+M*a,p=C*B+F*i+M*O;h[x+K]=Q*nc+N*G+V*p}return r===1?h[x]:h}static coefficients(n,c,r=1,f,h=0){f||(f=new c.constructor(r*9));let x=n[0],o=n[1],t=n[2],v=n[3],s=n[4],X=n[5],Y=x*t,b=x*s,q=t*s,w=o*v,g=o*X,k=v*X,e=1/((x-t)*(x-s)),d=1/((t-x)*(t-s)),y=1/((s-x)*(s-t)),l=1/((o-v)*(o-X)),A=1/((v-o)*(v-X)),j=1/((X-o)*(X-v)),m=e*l,D=d*l,H=y*l,C=e*A,F=d*A,M=y*A,Q=e*j,N=d*j,V=y*j,K=r,z=c;for(let R=0,Z=0;R<K;R++){let S=R,U=z[S]*m,P=z[S+=K]*C,a=z[S+=K]*Q,B=z[S+=K]*D,i=z[S+=K]*F,O=z[S+=K]*N,nc=z[S+=K]*H,G=z[S+=K]*M,p=z[S+=K]*V,W=k*(U*q+B*b+nc*Y)+g*(P*q+i*b+G*Y)+w*(a*q+O*b+p*Y),jc=-(v+X)*(U*q-B*b-nc*Y)-(o+X)*(P*q-i*b-G*Y)-(o+v)*(a*q-O*b-p*Y),Tc=-(t+s)*(U*k-P*g-a*w)-(x+s)*(B*k-i*g-O*w)-(x+t)*(nc*k-G*g-p*w),_c=U*k-B*k-nc*k+P*g-i*g-G*g+a*w-O*w-p*w,tc=U*q-P*q-a*q+B*b-i*b-O*b+nc*Y-G*Y-p*Y,u=(v+X)*(U*(t+s)+B*(x+s)+nc*(x+t))+(o+X)*(P*(t+s)+i*(x+s)+G*(x+t))+(o+v)*(a*(t+s)+O*(x+s)+p*(x+t)),cc=-(v+X)*(U+B+nc)-(o+X)*(P+i+G)-(o+v)*(a+O+p),Xc=-(t+s)*(U+P+a)-(x+s)*(B+i+O)-(x+t)*(nc+G+p),Ec=U+B+nc+P+i+G+a+O+p;f[h+Z++]=W,f[h+Z++]=jc,f[h+Z++]=_c,f[h+Z++]=Tc,f[h+Z++]=u,f[h+Z++]=cc,f[h+Z++]=tc,f[h+Z++]=Xc,f[h+Z++]=Ec}return f}constructor(n,c,r=1){super(n,c,r)}};globalThis.Biquadratic=mn;var Nn=class extends vc{static degree=2;static variables=3;static coefficients(n,c,r=1,f,h=0){f||(f=new c.constructor(r*27));let x=n[0],o=n[1],t=n[2],v=n[3],s=n[4],X=n[5],Y=n[6],b=n[7],q=n[8],w=1/((x-v)*(x-Y)),g=1/((v-x)*(v-Y)),k=1/((Y-x)*(Y-v)),e=1/((o-s)*(o-b)),d=1/((s-o)*(s-b)),y=1/((b-o)*(b-s)),l=1/((t-X)*(t-q)),A=1/((X-t)*(X-q)),j=1/((q-t)*(q-X)),m=w*e*l,D=g*e*l,H=k*e*l,C=w*d*l,F=g*d*l,M=k*d*l,Q=w*y*l,N=g*y*l,V=k*y*l,K=w*e*A,z=g*e*A,R=k*e*A,Z=w*d*A,S=g*d*A,U=k*d*A,P=w*y*A,a=g*y*A,B=k*y*A,i=w*e*j,O=g*e*j,nc=k*e*j,G=w*d*j,p=g*d*j,W=k*d*j,jc=w*y*j,Tc=g*y*j,_c=k*y*j,tc=new Float32Array(9),u=new Float32Array(9),cc=new Float32Array(9);tc[0]=v*Y,tc[1]=x*Y,tc[2]=x*v,tc[3]=-(v+Y),tc[4]=-(x+Y),tc[5]=-(x+v),tc[6]=1,tc[7]=1,tc[8]=1,u[0]=s*b,u[1]=o*b,u[2]=o*s,u[3]=-(s+b),u[4]=-(o+b),u[5]=-(o+s),u[6]=1,u[7]=1,u[8]=1,cc[0]=X*q,cc[1]=t*q,cc[2]=t*X,cc[3]=-(X+q),cc[4]=-(t+q),cc[5]=-(t+X),cc[6]=1,cc[7]=1,cc[8]=1;for(let Xc=0,Ec=c,L=r,Ac=0;Xc<L;Xc++){let I=Xc,wc=c[I]*m,gc=c[I+=L]*D,qc=c[I+=L]*H,zc=c[I+=L]*C,kc=c[I+=L]*F,Zc=c[I+=L]*M,lc=c[I+=L]*Q,Dc=c[I+=L]*N,Pc=c[I+=L]*V,Rc=c[I+=L]*K,Sc=c[I+=L]*z,Uc=c[I+=L]*R,Vc=c[I+=L]*Z,Wc=c[I+=L]*S,$c=c[I+=L]*U,Fc=c[I+=L]*P,Mc=c[I+=L]*a,mc=c[I+=L]*B,Nc=c[I+=L]*i,J=c[I+=L]*O,oc=c[I+=L]*nc,ac=c[I+=L]*G,sc=c[I+=L]*p,rc=c[I+=L]*W,ic=c[I+=L]*jc,Oc=c[I+=L]*Tc,pc=c[I+=L]*_c;for(let Kc=0,Bc=0;Kc<3;Kc++){let uc=cc[Bc++],cn=cc[Bc++],nn=cc[Bc++];for(let Lc=0,Cc=0;Lc<3;Lc++){let Gc=u[Cc++],Hc=u[Cc++],Ic=u[Cc++];for(let Qc=0,Jc=0;Qc<3;Qc++){let Yc=tc[Jc++],fc=tc[Jc++],bc=tc[Jc++];f[h+Ac++]=uc*(Gc*(Yc*wc+fc*gc+bc*qc)+Hc*(Yc*zc+fc*kc+bc*Zc)+Ic*(Yc*lc+fc*Dc+bc*Pc))+cn*(Gc*(Yc*Rc+fc*Sc+bc*Uc)+Hc*(Yc*Vc+fc*Wc+bc*$c)+Ic*(Yc*Fc+fc*Mc+bc*mc))+nn*(Gc*(Yc*Nc+fc*J+bc*oc)+Hc*(Yc*ac+fc*sc+bc*rc)+Ic*(Yc*ic+fc*Oc+bc*pc))}}}}return f}static evaluate(n,c,r=1,f,h,x=0){h=h||new c.constructor(r);let o=f[0],t=f[1],v=f[2],s=n[0],X=n[1],Y=n[2],b=n[3],q=n[4],w=n[5],g=n[6],k=n[7],e=n[8],d=(o-b)*(o-g)/((s-b)*(s-g)),y=(o-s)*(o-g)/((b-s)*(b-g)),l=(o-s)*(o-b)/((g-s)*(g-b)),A=(t-q)*(t-k)/((X-q)*(X-k)),j=(t-X)*(t-k)/((q-X)*(q-k)),m=(t-X)*(t-q)/((k-X)*(k-q)),D=(v-w)*(v-e)/((Y-w)*(Y-e)),H=(v-Y)*(v-e)/((w-Y)*(w-e)),C=(v-Y)*(v-w)/((e-Y)*(e-w)),F=c,M=r;for(let Q=0;Q<M;Q++){let N=Q,V=F[N]*d+F[N+=M]*y+F[N+=M]*l,K=F[N+=M]*d+F[N+=M]*y+F[N+=M]*l,z=F[N+=M]*d+F[N+=M]*y+F[N+=M]*l,R=F[N+=M]*d+F[N+=M]*y+F[N+=M]*l,Z=F[N+=M]*d+F[N+=M]*y+F[N+=M]*l,S=F[N+=M]*d+F[N+=M]*y+F[N+=M]*l,U=F[N+=M]*d+F[N+=M]*y+F[N+=M]*l,P=F[N+=M]*d+F[N+=M]*y+F[N+=M]*l,a=F[N+=M]*d+F[N+=M]*y+F[N+=M]*l,B=V*A+K*j+z*m,i=R*A+Z*j+S*m,O=U*A+P*j+a*m;h[x+Q]=B*D+i*H+O*C}return r===1?h[x]:h}constructor(n,c,r=1){super(n,c,r)}};globalThis.Triquadratic=Nn;var Dn=class extends vc{static degree=3;static variables=1;static evaluate(n,c,r=1,f,h,x=0){h||(h=new c.constructor(r));let o=typeof f=="number"?f:f[0],t=n[0],v=n[1],s=n[2],X=n[3],Y=t-v,b=t-s,q=t-X,w=v-s,g=v-X,k=s-X,e=o-t,d=o-v,y=o-s,l=o-X,A=d*y*l/(Y*b*q),j=-e*y*l/(Y*w*g),m=e*d*l/(b*w*k),D=-e*d*y/(q*g*k),H=r;for(let C=0;C<H;C++){let F=C,M=c[F],Q=c[F+=H],N=c[F+=H],V=c[F+=H];h[x+C]=M*A+Q*j+N*m+V*D}return H===1?h[x]:h}static coefficients(n,c,r=1,f,h=0){f||(f=new c.constructor(4*r));let x=n[0],o=n[1],t=n[2],v=n[3],s=x*o,X=x*t,Y=x*v,b=o*t,q=o*v,w=t*v,g=s*t,k=s*v,e=X*v,d=b*v,y=1/(x**3-(s+X+Y)*x+(g+k+e)-d),l=1/(o**3-(s+b+q)*o+(g+k+d)-e),A=1/(t**3-(X+b+w)*t+(g+e+d)-k),j=1/(v**3-(Y+q+w)*v+(k+e+d)-g),m=r;for(let D=0,H=0;D<r;D++){let C=D,F=c[C]*y,M=c[C+=m]*l,Q=c[C+=m]*A,N=c[C+=m]*j,V=-(F*d+M*e+Q*k+N*g),K=F*(b+q+w)+M*(X+Y+w)+Q*(s+Y+q)+N*(s+X+b),z=-(F*(o+t+v)+M*(x+t+v)+Q*(x+o+v)+N*(x+o+t)),R=F+M+Q+N;f[h+H++]=V,f[h+H++]=K,f[h+H++]=z,f[h+H++]=R}return f}constructor(n,c,r=1){super(n,c,r)}};globalThis.Cubic=Dn;function dc($,n,c){return($[0]*n[0]+$[1]*n[1]+$[2]*n[2]+$[3]*n[3])*c[0]+($[0]*n[4]+$[1]*n[5]+$[2]*n[6]+$[3]*n[7])*c[1]+($[0]*n[8]+$[1]*n[9]+$[2]*n[10]+$[3]*n[11])*c[2]+($[0]*n[12]+$[1]*n[13]+$[2]*n[14]+$[3]*n[15])*c[3]}var Pn=class extends vc{static degree=3;static variables=2;static coefficients(n,c,r=1,f,h=0){f||(f=new c.constructor(r*16));let x=n[0],o=n[1],t=n[2],v=n[3],s=n[4],X=n[5],Y=n[6],b=n[7],q=x*t,w=x*s,g=x*Y,k=t*s,e=t*Y,d=s*Y,y=q*s,l=q*Y,A=w*Y,j=k*Y,m=k+e+d,D=w+g+d,H=q+g+e,C=q+w+k,F=t+s+Y,M=x+s+Y,Q=x+t+Y,N=x+t+s,V=[-j,-A,-l,-y],K=[m,D,H,C],z=[-F,-M,-Q,-N],R=[1,1,1,1],Z=x-t,S=x-s,U=x-Y,P=t-s,a=t-Y,B=s-Y,i=o*v,O=o*X,nc=o*b,G=v*X,p=v*b,W=X*b,jc=i*X,Tc=i*b,_c=O*b,tc=G*b,u=o-v,cc=o-X,Xc=o-b,Ec=v-X,L=v-b,Ac=X-b,I=1/(Z*S*U),wc=-1/(Z*P*a),gc=1/(S*P*B),qc=-1/(U*a*B),zc=1/(u*cc*Xc),kc=-1/(u*Ec*L),Zc=1/(cc*Ec*Ac),lc=-1/(Xc*L*Ac),Dc=G+p+W,Pc=O+nc+W,Rc=i+nc+p,Sc=i+O+G,Uc=v+X+b,Vc=o+X+b,Wc=o+v+b,$c=o+v+X,Fc=[-tc,-_c,-Tc,-jc],Mc=[Dc,Pc,Rc,Sc],mc=[-Uc,-Vc,-Wc,-$c],Nc=R,J=new Float32Array(16),oc=r;for(let ac=0,sc=0;ac<oc;ac++){let rc=ac,ic=c[rc],Oc=c[rc+=oc],pc=c[rc+=oc],Kc=c[rc+=oc],Bc=c[rc+=oc],uc=c[rc+=oc],cn=c[rc+=oc],nn=c[rc+=oc],Lc=c[rc+=oc],Cc=c[rc+=oc],Gc=c[rc+=oc],Hc=c[rc+=oc],Ic=c[rc+=oc],Qc=c[rc+=oc],Jc=c[rc+=oc],Yc=c[rc+=oc];J[0]=ic*I*zc,J[1]=Oc*wc*zc,J[2]=pc*gc*zc,J[3]=Kc*qc*zc,J[4]=Bc*I*kc,J[5]=uc*wc*kc,J[6]=cn*gc*kc,J[7]=nn*qc*kc,J[8]=Lc*I*Zc,J[9]=Cc*wc*Zc,J[10]=Gc*gc*Zc,J[11]=Hc*qc*Zc,J[12]=Ic*I*lc,J[13]=Qc*wc*lc,J[14]=Jc*gc*lc,J[15]=Yc*qc*lc,f[h+sc++]=dc(V,J,Fc),f[h+sc++]=dc(K,J,Fc),f[h+sc++]=dc(z,J,Fc),f[h+sc++]=dc(R,J,Fc),f[h+sc++]=dc(V,J,Mc),f[h+sc++]=dc(K,J,Mc),f[h+sc++]=dc(z,J,Mc),f[h+sc++]=dc(R,J,Mc),f[h+sc++]=dc(V,J,mc),f[h+sc++]=dc(K,J,mc),f[h+sc++]=dc(z,J,mc),f[h+sc++]=dc(R,J,mc),f[h+sc++]=dc(V,J,Nc),f[h+sc++]=dc(K,J,Nc),f[h+sc++]=dc(z,J,Nc),f[h+sc++]=dc(R,J,Nc)}return f}static evaluate(n,c,r=1,f,h,x=0){h||(h=new c.constructor(r));let o=f[0],t=f[1],v=n[0],s=n[1],X=n[2],Y=n[3],b=n[4],q=n[5],w=n[6],g=n[7],k=o-v,e=o-X,d=o-b,y=o-w,l=v-X,A=v-b,j=v-w,m=X-b,D=X-w,H=b-w,C=t-s,F=t-Y,M=t-q,Q=t-g,N=s-Y,V=s-q,K=s-g,z=Y-q,R=Y-g,Z=q-g,S=e*d*y/(l*A*j),U=-k*d*y/(l*m*D),P=k*e*y/(A*m*H),a=-k*e*d/(j*D*H),B=F*M*Q/(N*V*K),i=-C*M*Q/(N*z*R),O=C*F*Q/(V*z*Z),nc=-C*F*M/(K*R*Z),G=r;for(let p=0;p<G;p++){let W=p,jc=c[W],Tc=c[W+=G],_c=c[W+=G],tc=c[W+=G],u=c[W+=G],cc=c[W+=G],Xc=c[W+=G],Ec=c[W+=G],L=c[W+=G],Ac=c[W+=G],I=c[W+=G],wc=c[W+=G],gc=c[W+=G],qc=c[W+=G],zc=c[W+=G],kc=c[W+=G],Zc=jc*S+Tc*U+_c*P+tc*a,lc=u*S+cc*U+Xc*P+Ec*a,Dc=L*S+Ac*U+I*P+wc*a,Pc=gc*S+qc*U+zc*P+kc*a;h[x+p]=Zc*B+lc*i+Dc*O+Pc*nc}return G===1?h[x]:h}constructor(n,c,r=1){super(n,c,r)}};globalThis.Bicubic=Pn;var an=class extends vc{static degree=3;static variables=3;static coefficients(n,c,r=1,f,h=0){f||(f=new c.constructor(64));let x=n[0],o=n[1],t=n[2],v=n[3],s=n[4],X=n[5],Y=n[6],b=n[7],q=n[8],w=n[9],g=n[10],k=n[11],e=new n.constructor(4),d=new n.constructor(4),y=new n.constructor(4);e[0]=1/((x-v)*(x-Y)*(x-w)),e[1]=1/((v-x)*(v-Y)*(v-w)),e[2]=1/((Y-x)*(Y-v)*(Y-w)),e[3]=1/((w-x)*(w-v)*(w-Y)),d[0]=1/((o-s)*(o-b)*(o-g)),d[1]=1/((s-o)*(s-b)*(s-g)),d[2]=1/((b-o)*(b-s)*(b-g)),d[3]=1/((g-o)*(g-s)*(g-b)),y[0]=1/((t-X)*(t-q)*(t-k)),y[1]=1/((X-t)*(X-q)*(X-k)),y[2]=1/((q-t)*(q-X)*(q-k)),y[3]=1/((k-t)*(k-X)*(k-q));let l=x*v,A=x*Y,j=x*w,m=v*Y,D=v*w,H=Y*w,C=o*s,F=o*b,M=o*g,Q=s*b,N=s*g,V=b*g,K=t*X,z=t*q,R=t*k,Z=X*q,S=X*k,U=q*k,P=new Float32Array(16),a=new Float32Array(16),B=new Float32Array(16);P[0]=-m*w,P[1]=-A*w,P[2]=-l*w,P[3]=-l*Y,P[4]=m+D+H,P[5]=A+j+H,P[6]=l+j+D,P[7]=l+A+m,P[8]=-(v+Y+w),P[9]=-(x+Y+w),P[10]=-(x+v+w),P[11]=-(x+v+Y),P[12]=1,P[13]=1,P[14]=1,P[15]=1,a[0]=-Q*g,a[1]=-F*g,a[2]=-C*g,a[3]=-C*b,a[4]=Q+N+V,a[5]=F+M+V,a[6]=C+M+N,a[7]=C+F+Q,a[8]=-(s+b+g),a[9]=-(o+b+g),a[10]=-(o+s+g),a[11]=-(o+s+b),a[12]=1,a[13]=1,a[14]=1,a[15]=1,B[0]=-Z*k,B[1]=-z*k,B[2]=-K*k,B[3]=-K*q,B[4]=Z+S+U,B[5]=z+R+U,B[6]=K+R+S,B[7]=K+z+Z,B[8]=-(X+q+k),B[9]=-(t+q+k),B[10]=-(t+X+k),B[11]=-(t+X+q),B[12]=1,B[13]=1,B[14]=1,B[15]=1;let i=e[0]*d[0]*y[0],O=e[1]*d[0]*y[0],nc=e[2]*d[0]*y[0],G=e[3]*d[0]*y[0],p=e[0]*d[1]*y[0],W=e[1]*d[1]*y[0],jc=e[2]*d[1]*y[0],Tc=e[3]*d[1]*y[0],_c=e[0]*d[2]*y[0],tc=e[1]*d[2]*y[0],u=e[2]*d[2]*y[0],cc=e[3]*d[2]*y[0],Xc=e[0]*d[3]*y[0],Ec=e[1]*d[3]*y[0],L=e[2]*d[3]*y[0],Ac=e[3]*d[3]*y[0],I=e[0]*d[0]*y[1],wc=e[1]*d[0]*y[1],gc=e[2]*d[0]*y[1],qc=e[3]*d[0]*y[1],zc=e[0]*d[1]*y[1],kc=e[1]*d[1]*y[1],Zc=e[2]*d[1]*y[1],lc=e[3]*d[1]*y[1],Dc=e[0]*d[2]*y[1],Pc=e[1]*d[2]*y[1],Rc=e[2]*d[2]*y[1],Sc=e[3]*d[2]*y[1],Uc=e[0]*d[3]*y[1],Vc=e[1]*d[3]*y[1],Wc=e[2]*d[3]*y[1],$c=e[3]*d[3]*y[1],Fc=e[0]*d[0]*y[2],Mc=e[1]*d[0]*y[2],mc=e[2]*d[0]*y[2],Nc=e[3]*d[0]*y[2],J=e[0]*d[1]*y[2],oc=e[1]*d[1]*y[2],ac=e[2]*d[1]*y[2],sc=e[3]*d[1]*y[2],rc=e[0]*d[2]*y[2],ic=e[1]*d[2]*y[2],Oc=e[2]*d[2]*y[2],pc=e[3]*d[2]*y[2],Kc=e[0]*d[3]*y[2],Bc=e[1]*d[3]*y[2],uc=e[2]*d[3]*y[2],cn=e[3]*d[3]*y[2],nn=e[0]*d[0]*y[3],Lc=e[1]*d[0]*y[3],Cc=e[2]*d[0]*y[3],Gc=e[3]*d[0]*y[3],Hc=e[0]*d[1]*y[3],Ic=e[1]*d[1]*y[3],Qc=e[2]*d[1]*y[3],Jc=e[3]*d[1]*y[3],Yc=e[0]*d[2]*y[3],fc=e[1]*d[2]*y[3],bc=e[2]*d[2]*y[3],yn=e[3]*d[2]*y[3],dn=e[0]*d[3]*y[3],Yn=e[1]*d[3]*y[3],Xn=e[2]*d[3]*y[3],fn=e[3]*d[3]*y[3];for(let tn=0,T=r,_=c;tn<T;tn++){let E=tn,bn=_[E]*i,wn=_[E+=T]*O,gn=_[E+=T]*nc,qn=_[E+=T]*G,zn=_[E+=T]*p,kn=_[E+=T]*W,Zn=_[E+=T]*jc,ln=_[E+=T]*Tc,jn=_[E+=T]*_c,Tn=_[E+=T]*tc,_n=_[E+=T]*u,Hn=_[E+=T]*cc,In=_[E+=T]*Xc,Jn=_[E+=T]*Ec,Kn=_[E+=T]*L,Ln=_[E+=T]*Ac,Qn=_[E+=T]*I,Rn=_[E+=T]*wc,Sn=_[E+=T]*gc,Un=_[E+=T]*qc,Vn=_[E+=T]*zc,Wn=_[E+=T]*kc,$n=_[E+=T]*Zc,On=_[E+=T]*lc,pn=_[E+=T]*Dc,un=_[E+=T]*Pc,ct=_[E+=T]*Rc,nt=_[E+=T]*Sc,tt=_[E+=T]*Uc,ot=_[E+=T]*Vc,st=_[E+=T]*Wc,rt=_[E+=T]*$c,vt=_[E+=T]*Fc,et=_[E+=T]*Mc,xt=_[E+=T]*mc,ht=_[E+=T]*Nc,yt=_[E+=T]*J,dt=_[E+=T]*oc,Yt=_[E+=T]*ac,Xt=_[E+=T]*sc,ft=_[E+=T]*rc,bt=_[E+=T]*ic,wt=_[E+=T]*Oc,gt=_[E+=T]*pc,qt=_[E+=T]*Kc,zt=_[E+=T]*Bc,kt=_[E+=T]*uc,Zt=_[E+=T]*cn,lt=_[E+=T]*nn,jt=_[E+=T]*Lc,Tt=_[E+=T]*Cc,_t=_[E+=T]*Gc,Et=_[E+=T]*Hc,At=_[E+=T]*Ic,Ft=_[E+=T]*Qc,Mt=_[E+=T]*Jc,mt=_[E+=T]*Yc,Nt=_[E+=T]*fc,Dt=_[E+=T]*bc,Pt=_[E+=T]*yn,at=_[E+=T]*dn,Bt=_[E+=T]*Yn,Ct=_[E+=T]*Xn,Gt=_[E+=T]*fn;for(let Bn=0,on=0,Ht=0;Bn<4;Bn++){let It=B[on++],Jt=B[on++],Kt=B[on++],Lt=B[on++];for(let Cn=0,sn=0;Cn<4;Cn++){let rn=a[sn++],vn=a[sn++],en=a[sn++],xn=a[sn++];for(let Gn=0,hn=0;Gn<4;Gn++){let ec=P[hn++],xc=P[hn++],hc=P[hn++],yc=P[hn++];f[h+64*tn+Ht++]=It*(rn*(ec*bn+xc*wn+hc*gn+yc*qn)+vn*(ec*zn+xc*kn+hc*Zn+yc*ln)+en*(ec*jn+xc*Tn+hc*_n+yc*Hn)+xn*(ec*In+xc*Jn+hc*Kn+yc*Ln))+Jt*(rn*(ec*Qn+xc*Rn+hc*Sn+yc*Un)+vn*(ec*Vn+xc*Wn+hc*$n+yc*On)+en*(ec*pn+xc*un+hc*ct+yc*nt)+xn*(ec*tt+xc*ot+hc*st+yc*rt))+Kt*(rn*(ec*vt+xc*et+hc*xt+yc*ht)+vn*(ec*yt+xc*dt+hc*Yt+yc*Xt)+en*(ec*ft+xc*bt+hc*wt+yc*gt)+xn*(ec*qt+xc*zt+hc*kt+yc*Zt))+Lt*(rn*(ec*lt+xc*jt+hc*Tt+yc*_t)+vn*(ec*Et+xc*At+hc*Ft+yc*Mt)+en*(ec*mt+xc*Nt+hc*Dt+yc*Pt)+xn*(ec*at+xc*Bt+hc*Ct+yc*Gt))}}}}return f}static evaluate(n,c,r=1,f,h,x=0){h=h||new c.constructor(r);let o=f[0],t=f[1],v=f[2],s=n[0],X=n[1],Y=n[2],b=n[3],q=n[4],w=n[5],g=n[6],k=n[7],e=n[8],d=n[9],y=n[10],l=n[11],A=(o-b)*(o-g)*(o-d)/((s-b)*(s-g)*(s-d)),j=(o-s)*(o-g)*(o-d)/((b-s)*(b-g)*(b-d)),m=(o-s)*(o-b)*(o-d)/((g-s)*(g-b)*(g-d)),D=(o-s)*(o-b)*(o-g)/((d-s)*(d-b)*(d-g)),H=(t-q)*(t-k)*(t-y)/((X-q)*(X-k)*(X-y)),C=(t-X)*(t-k)*(t-y)/((q-X)*(q-k)*(q-y)),F=(t-X)*(t-q)*(t-y)/((k-X)*(k-q)*(k-y)),M=(t-X)*(t-q)*(t-k)/((y-X)*(y-q)*(y-k)),Q=(v-w)*(v-e)*(v-l)/((Y-w)*(Y-e)*(Y-l)),N=(v-Y)*(v-e)*(v-l)/((w-Y)*(w-e)*(w-l)),V=(v-Y)*(v-w)*(v-l)/((e-Y)*(e-w)*(e-l)),K=(v-Y)*(v-w)*(v-e)/((l-Y)*(l-w)*(l-e)),z=r;for(let R=0;R<z;R++){let Z=R,S=c[Z],U=c[Z+=z],P=c[Z+=z],a=c[Z+=z],B=c[Z+=z],i=c[Z+=z],O=c[Z+=z],nc=c[Z+=z],G=c[Z+=z],p=c[Z+=z],W=c[Z+=z],jc=c[Z+=z],Tc=c[Z+=z],_c=c[Z+=z],tc=c[Z+=z],u=c[Z+=z],cc=c[Z+=z],Xc=c[Z+=z],Ec=c[Z+=z],L=c[Z+=z],Ac=c[Z+=z],I=c[Z+=z],wc=c[Z+=z],gc=c[Z+=z],qc=c[Z+=z],zc=c[Z+=z],kc=c[Z+=z],Zc=c[Z+=z],lc=c[Z+=z],Dc=c[Z+=z],Pc=c[Z+=z],Rc=c[Z+=z],Sc=c[Z+=z],Uc=c[Z+=z],Vc=c[Z+=z],Wc=c[Z+=z],$c=c[Z+=z],Fc=c[Z+=z],Mc=c[Z+=z],mc=c[Z+=z],Nc=c[Z+=z],J=c[Z+=z],oc=c[Z+=z],ac=c[Z+=z],sc=c[Z+=z],rc=c[Z+=z],ic=c[Z+=z],Oc=c[Z+=z],pc=c[Z+=z],Kc=c[Z+=z],Bc=c[Z+=z],uc=c[Z+=z],cn=c[Z+=z],nn=c[Z+=z],Lc=c[Z+=z],Cc=c[Z+=z],Gc=c[Z+=z],Hc=c[Z+=z],Ic=c[Z+=z],Qc=c[Z+=z],Jc=c[Z+=z],Yc=c[Z+=z],fc=c[Z+=z],bc=c[Z+=z],yn=S*A+U*j+P*m+a*D,dn=B*A+i*j+O*m+nc*D,Yn=G*A+p*j+W*m+jc*D,Xn=Tc*A+_c*j+tc*m+u*D,fn=cc*A+Xc*j+Ec*m+L*D,tn=Ac*A+I*j+wc*m+gc*D,T=qc*A+zc*j+kc*m+Zc*D,_=lc*A+Dc*j+Pc*m+Rc*D,E=Sc*A+Uc*j+Vc*m+Wc*D,bn=$c*A+Fc*j+Mc*m+mc*D,wn=Nc*A+J*j+oc*m+ac*D,gn=sc*A+rc*j+ic*m+Oc*D,qn=pc*A+Kc*j+Bc*m+uc*D,zn=cn*A+nn*j+Lc*m+Cc*D,kn=Gc*A+Hc*j+Ic*m+Qc*D,Zn=Jc*A+Yc*j+fc*m+bc*D,ln=yn*H+dn*C+Yn*F+Xn*M,jn=fn*H+tn*C+T*F+_*M,Tn=E*H+bn*C+wn*F+gn*M,_n=qn*H+zn*C+kn*F+Zn*M;h[x+R]=ln*Q+jn*N+Tn*V+_n*K}return r===1?h[x]:h}constructor(n,c,r){super(n,c,r)}};globalThis.Tricubic=an;})();
