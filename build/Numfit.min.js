(()=>{var rc=class{static degree;static variables;constructor(t,c,e=1){this.positions=t,this.values=c,this.dimension=e;let Y=this.constructor.degree,f=this.constructor.variables,r=(Y+1)**f,o=this.values.constructor;this.coefficients=new o(e*r).fill(0),this.update()}update(){return this.coefficients=this.constructor.coefficients(this.positions,this.values,this.dimension,this.coefficients),this}translate(t){let c=this.constructor.variables,e=this.positions,Y=e.length;for(let f=0;f<Y;f+=c)if(c===1)e[f]=t;else for(let r=0;r<c;r++)e[f+r]=t[r];return this}scale(t,c){let e=this.constructor.variables,Y=this.positions,f=Y.length;for(let r=0;r<f;r+=e)if(e===1){let o=Y[r];Y[r]=(o-c)*t+c}else for(let o=0;o<e;o++){let n=Y[r+o],s=t[o],v=c[o];Y[r+o]=(n-v)*s+v}return this}evaluate(t,c=0,e,Y=0){let f=this.dimension,r=this.constructor.degree,o=this.constructor.variables,n=r+1;e||(e=new this.values.constructor(f));let s=(r+1)**o;for(let v=0;v<f;v++){e[Y+v]=0;for(let h=0;h<s;h++){let a=this.coefficients[v*s+h],l=1;for(let w=0;w<o;w++){let g=Math.floor(h/n**w%n);l*=t[c+w]**g}e[Y+v]+=a*l}}return e}step(t,c,e,Y){let f=this.dimension,r=this.constructor.variables,o=0;for(let v=0;v<r;v++)o+=Math.floor(Math.abs(c[v]-t[v])/e[v]);o*=f;let n=new this.positions.constructor(r),s;Y?s=new this.values.constructor(f).fill(0):s=new this.values.constructor(o).fill(0);for(let v=0;v<o;v+=f){for(let h=0;h<r;h++){let a=Math.floor(v/r);n[h]=t[h]+a*e[h]}Y?Y(n,this.evaluate(n,0,s,0)):this.evaluate(n,0,s,v)}return Y?this:s}segment(t,c,e,Y){let f=this.dimension,r=this.constructor.variables,o=0;for(let v=0;v<r;v++)o+=e[v];o*=f;let n=new this.positions.constructor(f),s;Y?s=this.values.constructor(f).fill(0):s=this.values.constructor(o).fill(0);for(let v=0;v<o;v+=f){for(let h=0;h<f;h++){let a=(c[h]-t[h])/e[h],l=Math.floor(v/f);n[h]=t[h]+l*a}Y?Y(n,this.evaluate(n,0,s,0)):this.evaluate(n,0,s,v)}return Y?this:s}map(t,c){let e=this.constructor.variables,Y=this.dimension,f,r;c?(f=this.positions.constructor(e),r=this.values.constructor(Y)):r=this.values.constructor(length).fill(0);for(let o=0;o<t.length;o+=e){for(let n=0;n<e;n++)f[n]=t[o+n];c?c(f,this.evaluate(f,0,r,0)):this.evaluate(f,o,r,o*Y)}return c?this:r}};var At=class extends rc{static degree=1;static variables=1;static coefficients(t,c,e=1,Y,f=0){Y||(Y=new c.constructor(e*2));let r=t[0],n=t[1]-r;for(let s=0,v=0;s<e;s++){let h=c[s],l=(c[s+e]-h)/n,w=h-r*l;Y[f+v++]=w,Y[f+v++]=l}return Y}static evaluate(t,c,e=1,Y,f,r=0){f||(f=new c.constructor(e));let o=t[0],s=t[1]-o,v=0;for(let h=0;h<e;h++){let a=c[v++],w=(c[v++]-a)/s,g=a-o*w,b=Y[h];f[h+r]=w*b+g}return f}constructor(t,c,e=1){super(t,c,e)}evaluate(t,c=0,e,Y=0){let f=this.dimension,r=this.coefficients;e||(e=new this.values.constructor(f));let o=t[c];for(let n=0,s=0;n<f;n++){let v=r[s++],h=r[s++];e[Y+n]=v+h*o}return e}};globalThis.Linear=At;var Ft=class extends rc{static degree=1;static variables=2;static coefficients(t,c,e=1,Y,f=0){Y||(Y=c.constructor(e*4));let r=t[0],o=t[1],n=t[2],s=t[3],v=1/((n-r)*(s-o)),h=0;for(let a=0;a<e;a++){let l=a,w=c[l],g=c[l+=e],b=c[l+=e],q=c[l+=e];Y[h++]=(n*s*w-n*o*b-r*s*g+r*o*q)*v,Y[h++]=(-s*w+o*b+s*g-o*q)*v,Y[h++]=(-n*w+n*b+r*g-r*q)*v,Y[h++]=(w-b-g+q)*v}return Y}static evaluate(t,c,e=1,Y,f,r=0){f||(f=new c.constructor(e));let o=Y[0],n=Y[1],s=t[0],v=t[1],h=t[2],a=t[3],l=(o-h)/(s-h),w=(o-s)/(h-s),g=(n-a)/(v-a),b=(n-v)/(a-v),q=0;for(let i=0;i<e;i++){let d=c[q++],X=c[q++],E=c[q++],z=c[q++],T=d*l+X*w,j=E*l+z*w;f[r+i]=T*g+j*b}return f}constructor(t=new Float32Array(4),c=new Float32Array(4),e=1){super(t,c,e)}};globalThis.Bilinear=Ft;var Tt=class extends rc{static degree=1;static variables=3;static evaluate(t,c,e=1,Y,f,r=0){f||(f=c.constructor(e));let o=Y[0],n=Y[1],s=Y[2],v=t[0],h=t[1],a=t[2],l=t[3],w=t[4],g=t[5],b=(o-l)/(v-l),q=(o-v)/(l-v),i=(n-w)/(h-w),d=(n-h)/(w-h),X=(s-g)/(a-g),E=(s-a)/(g-a),z=0;for(let T=0,j=0;T<e;T++){let M=T,K=c[M],I=c[M+=e],N=c[M+=e],P=c[M+=e],V=c[M+=e],m=c[M+=e],_=c[M+=e],L=c[M+=e],Q=K*b+I*q,Z=N*b+P*q,$=V*b+m*q,R=_*b+L*q,S=Q*i+Z*d,D=$*i+R*d;f[r+j++]=S*X+D*E}return f}static coefficients(t,c,e=1,Y,f,r=0){f||(f=new c.constructor(e*8));let o=t[0],n=t[1],s=t[2],v=t[3],h=t[4],a=t[5],l=1/((v-o)*(h-n)*(a-s));for(let w=0,g=0;w<e;w++){let b=w,q=c[b],i=c[b+=e],d=c[b+=e],X=c[b+=e],E=c[b+=e],z=c[b+=e],T=c[b+=e],j=c[b+=e],M=(-q*v*h*a+E*v*h*s+d*v*n*a-T*v*n*s+i*o*h*a-z*o*h*s-X*o*n*a+j*o*n*s)*l,K=(q*h*a-E*h*s-d*n*a+T*n*s-i*h*a+z*h*s+X*n*a-j*n*s)*l,I=(q*v*a-E*v*s-d*v*a+T*v*s-i*o*a+z*o*s+X*o*a-j*o*s)*l,N=(-q*a+E*s+d*a-T*s+i*a-z*s-X*a+j*s)*l,P=(q*v*h-E*v*h-d*v*n+T*v*n-i*o*h+z*o*h+X*o*n-j*o*n)*l,V=(-q*h+E*h+d*n-T*n+i*h-z*h-X*n+j*n)*l,m=(-q*v+E*v+d*v-T*v+i*o-z*o-X*o+j*o)*l,_=(q-E-d+T-i+z+X-j)*l;f[r+g++]=M,f[r+g++]=K,f[r+g++]=I,f[r+g++]=N,f[r+g++]=P,f[r+g++]=V,f[r+g++]=m,f[r+g++]=_}return f}constructor(t,c,e=1){super(t,c,e)}evaluate(t,c=0,e,Y=0){e||(e=new this.values.constructor(this.dimension));let f=t[c+0],r=t[c+1],o=t[c+2];for(let n=0;n<this.dimension;n++){let s=this.coefficients[8*n+0],v=this.coefficients[8*n+1],h=this.coefficients[8*n+2],a=this.coefficients[8*n+3],l=this.coefficients[8*n+4],w=this.coefficients[8*n+5],g=this.coefficients[8*n+6],b=this.coefficients[8*n+7];e[Y+n]=-(s+v*f+h*r+a*f*r+(l+w*f+g*r+b*f*r)*o)}return e}};globalThis.Trilinear=Tt;var jt=class extends rc{static degree=2;static variables=1;static coefficients(t,c,e=1,Y,f=0){Y||(Y=new c.constructor(3*e));let r=t[0],o=t[1],n=t[2],s=1/((r-o)*(r-n)),v=1/((o-r)*(o-n)),h=1/((n-r)*(n-o));for(let a=0,l=0,w=e;a<w;a++){let g=a,b=c[g]*s,q=c[g+=w]*v,i=c[g+=w]*h,d=b*o*n+q*r*n+i*r*o,X=-(b*(o+n)+q*(r+n)+i*(r+o)),E=b+q+i;Y[f+l++]=d,Y[f+l++]=X,Y[f+l++]=E}return Y}static evaluate(t,c,e,Y,f,r,o){let n=o-t,s=o-c,v=o-e,h=t-c,a=t-e,l=c-e;return s*v/(h*a)*Y-n*v/(h*l)*f+n*s/(h*a)*r}constructor(t,c,e=1){super(t,c,e)}};globalThis.Quadratic=jt;var Et=class extends rc{static degree=2;static variables=2;static evaluate(t,c,e,Y,f,r,o,n,s,v,h,a,l,w,g,b,q){let i=b-t,d=b-e,X=b-f,E=t-e,z=t-f,T=e-f,j=d*X/(d01*d02),M=-(d*X)/(d01*d02),K=d*X/(d01*d02),I=j*o-M*n+K*s,N=j*v-M*h+K*a,P=j*l-M*w+K*g,V=q-c,m=q-Y,_=q-r,L=c-Y,Q=c-r,Z=Y-r;return m*_/(L*Q)*I-V*_/(L*Z)*N+V*m/(L*Q)*P}static coefficients(t,c,e=1,Y,f=0){Y||(Y=new c.constructor(e*9));let r=t[0],o=t[1],n=t[2],s=t[3],v=t[4],h=t[5],a=r*n,l=r*v,w=n*v,g=o*s,b=o*h,q=s*h,i=1/((r-n)*(r-v)),d=1/((n-r)*(n-v)),X=1/((v-r)*(v-n)),E=1/((o-s)*(o-h)),z=1/((s-o)*(s-h)),T=1/((h-o)*(h-s)),j=i*E,M=d*E,K=X*E,I=i*z,N=d*z,P=X*z,V=i*T,m=d*T,_=X*T,L=e,Q=c;for(let Z=0,$=0;Z<L;Z++){let R=Z,S=Q[R]*j,D=Q[R+=L]*I,B=Q[R+=L]*V,C=Q[R+=L]*M,U=Q[R+=L]*N,tc=Q[R+=L]*m,nc=Q[R+=L]*K,oc=Q[R+=L]*P,vc=Q[R+=L]*_,lc=q*(S*w+C*l+nc*a)+b*(D*w+U*l+oc*a)+g*(B*w+tc*l+vc*a),kc=-(s+h)*(S*w-C*l-nc*a)-(o+h)*(D*w-U*l-oc*a)-(o+s)*(B*w-tc*l-vc*a),bc=-(n+v)*(S*q-D*b-B*g)-(r+v)*(C*q-U*b-tc*g)-(r+n)*(nc*q-oc*b-vc*g),gc=S*q-C*q-nc*q+D*b-U*b-oc*b+B*g-tc*g-vc*g,u=S*w-D*w-B*w+C*l-U*l-tc*l+nc*a-oc*a-vc*a,O=(s+h)*(S*(n+v)+C*(r+v)+nc*(r+n))+(o+h)*(D*(n+v)+U*(r+v)+oc*(r+n))+(o+s)*(B*(n+v)+tc*(r+v)+vc*(r+n)),p=-(s+h)*(S+C+nc)-(o+h)*(D+U+oc)-(o+s)*(B+tc+vc),ec=-(n+v)*(S+D+B)-(r+v)*(C+U+tc)-(r+n)*(nc+oc+vc),qc=S+C+nc+D+U+oc+B+tc+vc;Y[f+$++]=lc,Y[f+$++]=kc,Y[f+$++]=gc,Y[f+$++]=bc,Y[f+$++]=O,Y[f+$++]=p,Y[f+$++]=u,Y[f+$++]=ec,Y[f+$++]=qc}return Y}constructor(t,c,e=1){super(t,c,e)}};globalThis.Biquadratic=Et;var zt=class extends rc{static degree=2;static variables=3;static coefficients(t,c,e=1,Y,f=0){Y||(Y=new c.constructor(e*27));let r=t[0],o=t[1],n=t[2],s=t[3],v=t[4],h=t[5],a=t[6],l=t[7],w=t[8],g=1/((r-s)*(r-a)),b=1/((s-r)*(s-a)),q=1/((a-r)*(a-s)),i=1/((o-v)*(o-l)),d=1/((v-o)*(v-l)),X=1/((l-o)*(l-v)),E=1/((n-h)*(n-w)),z=1/((h-n)*(h-w)),T=1/((w-n)*(w-h)),j=g*i*E,M=b*i*E,K=q*i*E,I=g*d*E,N=b*d*E,P=q*d*E,V=g*X*E,m=b*X*E,_=q*X*E,L=g*i*z,Q=b*i*z,Z=q*i*z,$=g*d*z,R=b*d*z,S=q*d*z,D=g*X*z,B=b*X*z,C=q*X*z,U=g*i*T,tc=b*i*T,nc=q*i*T,oc=g*d*T,vc=b*d*T,lc=q*d*T,kc=g*X*T,bc=b*X*T,gc=q*X*T,u=new Float32Array(9),O=new Float32Array(9),p=new Float32Array(9);u[0]=s*a,u[1]=r*a,u[2]=r*s,u[3]=-(s+a),u[4]=-(r+a),u[5]=-(r+s),u[6]=1,u[7]=1,u[8]=1,O[0]=v*l,O[1]=o*l,O[2]=o*v,O[3]=-(v+l),O[4]=-(o+l),O[5]=-(o+v),O[6]=1,O[7]=1,O[8]=1,p[0]=h*w,p[1]=n*w,p[2]=n*h,p[3]=-(h+w),p[4]=-(n+w),p[5]=-(n+h),p[6]=1,p[7]=1,p[8]=1;for(let ec=0,qc=c,J=e,Ac=0;ec<J;ec++){let G=ec,wc=c[G]*j,Yc=c[G+=J]*M,Fc=c[G+=J]*K,Tc=c[G+=J]*I,jc=c[G+=J]*N,Dc=c[G+=J]*P,Ec=c[G+=J]*V,Qc=c[G+=J]*m,Rc=c[G+=J]*_,Sc=c[G+=J]*L,Uc=c[G+=J]*Q,Vc=c[G+=J]*Z,Wc=c[G+=J]*$,_c=c[G+=J]*R,$c=c[G+=J]*S,zc=c[G+=J]*D,Mc=c[G+=J]*B,Zc=c[G+=J]*C,Bc=c[G+=J]*U,H=c[G+=J]*tc,Gc=c[G+=J]*nc,sc=c[G+=J]*oc,cc=c[G+=J]*vc,mc=c[G+=J]*lc,Oc=c[G+=J]*kc,pc=c[G+=J]*bc,uc=c[G+=J]*gc;for(let Nc=0,Hc=0;Nc<3;Nc++){let ct=p[Hc++],tt=p[Hc++],nt=p[Hc++];for(let Pc=0,Cc=0;Pc<3;Pc++){let Ic=O[Cc++],Jc=O[Cc++],Kc=O[Cc++];for(let ot=0,Lc=0;ot<3;ot++){let Xc=u[Lc++],yc=u[Lc++],ac=u[Lc++];Y[f+Ac++]=ct*(Ic*(Xc*wc+yc*Yc+ac*Fc)+Jc*(Xc*Tc+yc*jc+ac*Dc)+Kc*(Xc*Ec+yc*Qc+ac*Rc))+tt*(Ic*(Xc*Sc+yc*Uc+ac*Vc)+Jc*(Xc*Wc+yc*_c+ac*$c)+Kc*(Xc*zc+yc*Mc+ac*Zc))+nt*(Ic*(Xc*Bc+yc*H+ac*Gc)+Jc*(Xc*sc+yc*cc+ac*mc)+Kc*(Xc*Oc+yc*pc+ac*uc))}}}}return Y}static evaluate(t,c,e,Y,f,r,o,n,s,v,h,a,l,w,g,b,q,i,d,X,E,z,T,j,M,K,I,N,P,V,m,_,L,Q,Z,$,R,S,D){let B=(R-Y)*(R-o)/((t-Y)*(t-o)),C=(R-t)*(R-o)/((Y-t)*(Y-o)),U=(R-t)*(R-Y)/((o-t)*(o-Y)),tc=v*B+h*C+a*U,nc=l*B+w*C+g*U,oc=b*B+q*C+i*U,vc=d*B+X*C+E*U,lc=z*B+T*C+j*U,kc=M*B+K*C+I*U,bc=N*B+P*C+V*U,gc=m*B+_*C+L*U,u=Q*B+Z*C+$*U,O=(S-f)*(S-n)/((c-f)*(c-n)),p=(S-c)*(S-n)/((f-c)*(f-n)),ec=(S-c)*(S-f)/((n-c)*(n-f)),qc=tc*O+nc*p+oc*ec,J=vc*O+lc*p+kc*ec,Ac=bc*O+gc*p+u*ec,G=(D-r)*(D-s)/((e-r)*(e-s)),wc=(D-e)*(D-s)/((r-e)*(r-s)),Yc=(D-e)*(D-r)/((s-e)*(s-r));return qc*G+J*wc+Ac*Yc}constructor(t,c,e=1){super(t,c,e)}};globalThis.Triquadratic=zt;var Mt=class extends rc{static degree=3;static variables=1;static evaluate(t,c,e=1,Y,f,r=0){f||(f=new c.constructor(e));let o=t[0],n=t[1],s=t[2],v=t[3],h=o-n,a=o-s,l=o-v,w=n-s,g=n-v,b=s-v,q=0;for(let i=0;i<e;i++){let d=Y[i],X=c[i],E=c[i+e],z=c[i+2*e],T=c[i+3*e],j=d-o,M=d-n,K=d-s,I=d-v,N=h*a*l,P=h*w*g,V=a*w*b,m=l*g*b;f[r+i]=X*(M*K*I)/N-E*(j*K*I)/P+z*(j*M*I)/V-T*(j*M*K)/m}return f}static coefficients(t,c,e=1,Y,f=0){Y||(Y=new c.constructor(4*e));let r=t[0],o=t[1],n=t[2],s=t[3],v=r*o,h=r*n,a=r*s,l=o*n,w=o*s,g=n*s,b=v*n,q=v*s,i=h*s,d=l*s,X=1/(r**3-(v+h+a)*r+(b+q+i)-d),E=1/(o**3-(v+l+w)*o+(b+q+d)-i),z=1/(n**3-(h+l+g)*n+(b+i+d)-q),T=1/(s**3-(a+w+g)*s+(q+i+d)-b);for(let j=0,M=0;j<e;j++){let K=c[j]*X,I=c[j+e]*E,N=c[j+2*e]*z,P=c[j+3*e]*T,V=-(K*d+I*i+N*q+P*b),m=K*(l+w+g)+I*(h+a+g)+N*(v+a+w)+P*(v+h+l),_=-(K*(o+n+s)+I*(r+n+s)+N*(r+o+s)+P*(r+o+n)),L=K+I+N+P;Y[f+M++]=V,Y[f+M++]=m,Y[f+M++]=_,Y[f+M++]=L}return Y}constructor(t,c,e=1){super(t,c,e)}};globalThis.Cubic=Mt;function dc(W,t,c){return(W[0]*t[0]+W[1]*t[1]+W[2]*t[2]+W[3]*t[3])*c[0]+(W[0]*t[4]+W[1]*t[5]+W[2]*t[6]+W[3]*t[7])*c[1]+(W[0]*t[8]+W[1]*t[9]+W[2]*t[10]+W[3]*t[11])*c[2]+(W[0]*t[12]+W[1]*t[13]+W[2]*t[14]+W[3]*t[15])*c[3]}var Bt=class extends rc{static degree=3;static variables=2;static coefficients(t,c,e=1,Y,f=0){Y||(Y=new c.constructor(e*16));let r=t[0],o=t[1],n=t[2],s=t[3],v=t[4],h=t[5],a=t[6],l=t[7],w=r*n,g=r*v,b=r*a,q=n*v,i=n*a,d=v*a,X=w*v,E=w*a,z=g*a,T=q*a,j=q+i+d,M=g+b+d,K=w+b+i,I=w+g+q,N=n+v+a,P=r+v+a,V=r+n+a,m=r+n+v,_=[-T,-z,-E,-X],L=[j,M,K,I],Q=[-N,-P,-V,-m],Z=[1,1,1,1],$=r-n,R=r-v,S=r-a,D=n-v,B=n-a,C=v-a,U=o*s,tc=o*h,nc=o*l,oc=s*h,vc=s*l,lc=h*l,kc=U*h,bc=U*l,gc=tc*l,u=oc*l,O=o-s,p=o-h,ec=o-l,qc=s-h,J=s-l,Ac=h-l,G=1/($*R*S),wc=-1/($*D*B),Yc=1/(R*D*C),Fc=-1/(S*B*C),Tc=1/(O*p*ec),jc=-1/(O*qc*J),Dc=1/(p*qc*Ac),Ec=-1/(ec*J*Ac),Qc=oc+vc+lc,Rc=tc+nc+lc,Sc=U+nc+vc,Uc=U+tc+oc,Vc=s+h+l,Wc=o+h+l,_c=o+s+l,$c=o+s+h,zc=[-u,-gc,-bc,-kc],Mc=[Qc,Rc,Sc,Uc],Zc=[-Vc,-Wc,-_c,-$c],Bc=Z,H=new Float32Array(16);for(let Gc=0,sc=0;Gc<e;Gc++){let cc=Gc,mc=c[cc],Oc=c[cc+=e],pc=c[cc+=e],uc=c[cc+=e],Nc=c[cc+=e],Hc=c[cc+=e],ct=c[cc+=e],tt=c[cc+=e],nt=c[cc+=e],Pc=c[cc+=e],Cc=c[cc+=e],Ic=c[cc+=e],Jc=c[cc+=e],Kc=c[cc+=e],ot=c[cc+=e],Lc=c[cc+=e];H[0]=mc*G*Tc,H[1]=Oc*wc*Tc,H[2]=pc*Yc*Tc,H[3]=uc*Fc*Tc,H[4]=Nc*G*jc,H[5]=Hc*wc*jc,H[6]=ct*Yc*jc,H[7]=tt*Fc*jc,H[8]=nt*G*Dc,H[9]=Pc*wc*Dc,H[10]=Cc*Yc*Dc,H[11]=Ic*Fc*Dc,H[12]=Jc*G*Ec,H[13]=Kc*wc*Ec,H[14]=ot*Yc*Ec,H[15]=Lc*Fc*Ec,Y[f+sc++]=dc(_,H,zc),Y[f+sc++]=dc(L,H,zc),Y[f+sc++]=dc(Q,H,zc),Y[f+sc++]=dc(Z,H,zc),Y[f+sc++]=dc(_,H,Mc),Y[f+sc++]=dc(L,H,Mc),Y[f+sc++]=dc(Q,H,Mc),Y[f+sc++]=dc(Z,H,Mc),Y[f+sc++]=dc(_,H,Zc),Y[f+sc++]=dc(L,H,Zc),Y[f+sc++]=dc(Q,H,Zc),Y[f+sc++]=dc(Z,H,Zc),Y[f+sc++]=dc(_,H,Bc),Y[f+sc++]=dc(L,H,Bc),Y[f+sc++]=dc(Q,H,Bc),Y[f+sc++]=dc(Z,H,Bc)}return Y}static evaluate(t,c,e=1,Y,f,r=0){f||(f=new c.constructor(e));let o=x-x0,n=x-x1,s=x-x2,v=x-x3,h=x0-x1,a=x0-x1,l=x0-x2,w=x1-x2,g=x1-x3,b=x2-x3,q=y-y0,i=y-y1,d=y-y2,X=y-y3,E=y0-y1,z=y0-y1,T=y0-y2,j=y1-y2,M=y1-y3,K=y2-y3,I=n*s*v/(h*a*l),N=-o*s*v/(h*w*g),P=o*n*v/(a*w*b),V=-o*n*s/(l*g*b),m=i*d*X/(E*z*T),_=-q*d*X/(E*j*M),L=q*i*X/(z*j*K),Q=-q*i*d/(T*M*K),Z=v00*I+v10*N+v20*P+v30*V,$=v01*I+v11*N+v21*P+v31*V,R=v02*I+v12*N+v22*P+v32*V,S=v03*I+v13*N+v23*P+v33*V;return Z*m+$*_+R*L+S*Q}constructor(t,c,e=1){super(t,c,e)}evaluate(t,c=0,e,Y=0){let f=this.dimension;e||(e=new this.values.constructor(f));let r=t[0],o=t[1];for(let n=0,s=0;n<f;n++){let v=this.coefficients[s++],h=this.coefficients[s++],a=this.coefficients[s++],l=this.coefficients[s++],w=this.coefficients[s++],g=this.coefficients[s++],b=this.coefficients[s++],q=this.coefficients[s++],i=this.coefficients[s++],d=this.coefficients[s++],X=this.coefficients[s++],E=this.coefficients[s++],z=this.coefficients[s++],T=this.coefficients[s++],j=this.coefficients[s++],M=this.coefficients[s++];e[n]=v+h*r+a*r**2+l*r**3+(w+g*r+b*r**2+q*r**3)*o+(i+d*r+X*r**2+E*r**3)*o**2+(z+T*r+j*r**2+M*r**3)*o**3}return e}};globalThis.Bicubic=Bt;var Ct=class extends rc{static degree=3;static variables=3;static coefficients(t,c,e=1,Y,f=0){Y||(Y=new c.constructor(64));let r=t[0],o=t[1],n=t[2],s=t[3],v=t[4],h=t[5],a=t[6],l=t[7],w=t[8],g=t[9],b=t[10],q=t[11],i=new t.constructor(4),d=new t.constructor(4),X=new t.constructor(4);i[0]=1/((r-s)*(r-a)*(r-g)),i[1]=1/((s-r)*(s-a)*(s-g)),i[2]=1/((a-r)*(a-s)*(a-g)),i[3]=1/((g-r)*(g-s)*(g-a)),d[0]=1/((o-v)*(o-l)*(o-b)),d[1]=1/((v-o)*(v-l)*(v-b)),d[2]=1/((l-o)*(l-v)*(l-b)),d[3]=1/((b-o)*(b-v)*(b-l)),X[0]=1/((n-h)*(n-w)*(n-q)),X[1]=1/((h-n)*(h-w)*(h-q)),X[2]=1/((w-n)*(w-h)*(w-q)),X[3]=1/((q-n)*(q-h)*(q-w));let E=r*s,z=r*a,T=r*g,j=s*a,M=s*g,K=a*g,I=o*v,N=o*l,P=o*b,V=v*l,m=v*b,_=l*b,L=n*h,Q=n*w,Z=n*q,$=h*w,R=h*q,S=w*q,D=new Float32Array(16),B=new Float32Array(16),C=new Float32Array(16);D[0]=-j*g,D[1]=-z*g,D[2]=-E*g,D[3]=-E*a,D[4]=j+M+K,D[5]=z+T+K,D[6]=E+T+M,D[7]=E+z+j,D[8]=-(s+a+g),D[9]=-(r+a+g),D[10]=-(r+s+g),D[11]=-(r+s+a),D[12]=1,D[13]=1,D[14]=1,D[15]=1,B[0]=-V*b,B[1]=-N*b,B[2]=-I*b,B[3]=-I*l,B[4]=V+m+_,B[5]=N+P+_,B[6]=I+P+m,B[7]=I+N+V,B[8]=-(v+l+b),B[9]=-(o+l+b),B[10]=-(o+v+b),B[11]=-(o+v+l),B[12]=1,B[13]=1,B[14]=1,B[15]=1,C[0]=-$*q,C[1]=-Q*q,C[2]=-L*q,C[3]=-L*w,C[4]=$+R+S,C[5]=Q+Z+S,C[6]=L+Z+R,C[7]=L+Q+$,C[8]=-(h+w+q),C[9]=-(n+w+q),C[10]=-(n+h+q),C[11]=-(n+h+w),C[12]=1,C[13]=1,C[14]=1,C[15]=1;let U=i[0]*d[0]*X[0],tc=i[1]*d[0]*X[0],nc=i[2]*d[0]*X[0],oc=i[3]*d[0]*X[0],vc=i[0]*d[1]*X[0],lc=i[1]*d[1]*X[0],kc=i[2]*d[1]*X[0],bc=i[3]*d[1]*X[0],gc=i[0]*d[2]*X[0],u=i[1]*d[2]*X[0],O=i[2]*d[2]*X[0],p=i[3]*d[2]*X[0],ec=i[0]*d[3]*X[0],qc=i[1]*d[3]*X[0],J=i[2]*d[3]*X[0],Ac=i[3]*d[3]*X[0],G=i[0]*d[0]*X[1],wc=i[1]*d[0]*X[1],Yc=i[2]*d[0]*X[1],Fc=i[3]*d[0]*X[1],Tc=i[0]*d[1]*X[1],jc=i[1]*d[1]*X[1],Dc=i[2]*d[1]*X[1],Ec=i[3]*d[1]*X[1],Qc=i[0]*d[2]*X[1],Rc=i[1]*d[2]*X[1],Sc=i[2]*d[2]*X[1],Uc=i[3]*d[2]*X[1],Vc=i[0]*d[3]*X[1],Wc=i[1]*d[3]*X[1],_c=i[2]*d[3]*X[1],$c=i[3]*d[3]*X[1],zc=i[0]*d[0]*X[2],Mc=i[1]*d[0]*X[2],Zc=i[2]*d[0]*X[2],Bc=i[3]*d[0]*X[2],H=i[0]*d[1]*X[2],Gc=i[1]*d[1]*X[2],sc=i[2]*d[1]*X[2],cc=i[3]*d[1]*X[2],mc=i[0]*d[2]*X[2],Oc=i[1]*d[2]*X[2],pc=i[2]*d[2]*X[2],uc=i[3]*d[2]*X[2],Nc=i[0]*d[3]*X[2],Hc=i[1]*d[3]*X[2],ct=i[2]*d[3]*X[2],tt=i[3]*d[3]*X[2],nt=i[0]*d[0]*X[3],Pc=i[1]*d[0]*X[3],Cc=i[2]*d[0]*X[3],Ic=i[3]*d[0]*X[3],Jc=i[0]*d[1]*X[3],Kc=i[1]*d[1]*X[3],ot=i[2]*d[1]*X[3],Lc=i[3]*d[1]*X[3],Xc=i[0]*d[2]*X[3],yc=i[1]*d[2]*X[3],ac=i[2]*d[2]*X[3],Yt=i[3]*d[2]*X[3],Xt=i[0]*d[3]*X[3],yt=i[1]*d[3]*X[3],at=i[2]*d[3]*X[3],lt=i[3]*d[3]*X[3];for(let st=0,F=e,k=c;st<F;st++){let A=st,rt=k[A]*U,wt=k[A+=F]*tc,Dt=k[A+=F]*nc,Gt=k[A+=F]*oc,Ht=k[A+=F]*vc,bt=k[A+=F]*lc,gt=k[A+=F]*kc,qt=k[A+=F]*bc,Zt=k[A+=F]*gc,kt=k[A+=F]*u,Lt=k[A+=F]*O,Nt=k[A+=F]*p,Pt=k[A+=F]*ec,Qt=k[A+=F]*qc,Rt=k[A+=F]*J,St=k[A+=F]*Ac,Ut=k[A+=F]*G,Vt=k[A+=F]*wc,Wt=k[A+=F]*Yc,_t=k[A+=F]*Fc,$t=k[A+=F]*Tc,mt=k[A+=F]*jc,Ot=k[A+=F]*Dc,pt=k[A+=F]*Ec,ut=k[A+=F]*Qc,cn=k[A+=F]*Rc,tn=k[A+=F]*Sc,nn=k[A+=F]*Uc,on=k[A+=F]*Vc,sn=k[A+=F]*Wc,rn=k[A+=F]*_c,vn=k[A+=F]*$c,en=k[A+=F]*zc,hn=k[A+=F]*Mc,xn=k[A+=F]*Zc,fn=k[A+=F]*Bc,dn=k[A+=F]*H,Yn=k[A+=F]*Gc,Xn=k[A+=F]*sc,yn=k[A+=F]*cc,an=k[A+=F]*mc,ln=k[A+=F]*Oc,wn=k[A+=F]*pc,bn=k[A+=F]*uc,gn=k[A+=F]*Nc,qn=k[A+=F]*Hc,Zn=k[A+=F]*ct,kn=k[A+=F]*tt,An=k[A+=F]*nt,Fn=k[A+=F]*Pc,Tn=k[A+=F]*Cc,jn=k[A+=F]*Ic,En=k[A+=F]*Jc,zn=k[A+=F]*Kc,Mn=k[A+=F]*ot,Bn=k[A+=F]*Lc,Cn=k[A+=F]*Xc,Dn=k[A+=F]*yc,Gn=k[A+=F]*ac,Hn=k[A+=F]*Yt,In=k[A+=F]*Xt,Jn=k[A+=F]*yt,Kn=k[A+=F]*at,Ln=k[A+=F]*lt;for(let It=0,vt=0,Nn=0;It<4;It++){let Pn=C[vt++],Qn=C[vt++],Rn=C[vt++],Sn=C[vt++];for(let Jt=0,et=0;Jt<4;Jt++){let ht=B[et++],it=B[et++],xt=B[et++],ft=B[et++];for(let Kt=0,dt=0;Kt<4;Kt++){let hc=D[dt++],ic=D[dt++],xc=D[dt++],fc=D[dt++];Y[f+64*st+Nn++]=Pn*(ht*(hc*rt+ic*wt+xc*Dt+fc*Gt)+it*(hc*Ht+ic*bt+xc*gt+fc*qt)+xt*(hc*Zt+ic*kt+xc*Lt+fc*Nt)+ft*(hc*Pt+ic*Qt+xc*Rt+fc*St))+Qn*(ht*(hc*Ut+ic*Vt+xc*Wt+fc*_t)+it*(hc*$t+ic*mt+xc*Ot+fc*pt)+xt*(hc*ut+ic*cn+xc*tn+fc*nn)+ft*(hc*on+ic*sn+xc*rn+fc*vn))+Rn*(ht*(hc*en+ic*hn+xc*xn+fc*fn)+it*(hc*dn+ic*Yn+xc*Xn+fc*yn)+xt*(hc*an+ic*ln+xc*wn+fc*bn)+ft*(hc*gn+ic*qn+xc*Zn+fc*kn))+Sn*(ht*(hc*An+ic*Fn+xc*Tn+fc*jn)+it*(hc*En+ic*zn+xc*Mn+fc*Bn)+xt*(hc*Cn+ic*Dn+xc*Gn+fc*Hn)+ft*(hc*In+ic*Jn+xc*Kn+fc*Ln))}}}}return Y}static evaluate(t,c,e=1,Y,f,r=0){let o=Y[0],n=Y[1],s=Y[2],v=t[0],h=t[1],a=t[2],l=t[3],w=t[4],g=t[5],b=t[6],q=t[7],i=t[8],d=t[9],X=t[10],E=t[11],z=(o-l)*(o-b)*(o-d)/((v-l)*(v-b)*(v-d)),T=(o-v)*(o-b)*(o-d)/((l-v)*(l-b)*(l-d)),j=(o-v)*(o-l)*(o-d)/((b-v)*(b-l)*(b-d)),M=(o-v)*(o-l)*(o-b)/((d-v)*(d-l)*(d-b)),K=(n-w)*(n-q)*(n-X)/((h-w)*(h-q)*(h-X)),I=(n-h)*(n-q)*(n-X)/((w-h)*(w-q)*(w-X)),N=(n-h)*(n-w)*(n-X)/((q-h)*(q-w)*(q-X)),P=(n-h)*(n-w)*(n-q)/((X-h)*(X-w)*(X-q)),V=(s-g)*(s-i)*(s-E)/((a-g)*(a-i)*(a-E)),m=(s-a)*(s-i)*(s-E)/((g-a)*(g-i)*(g-E)),_=(s-a)*(s-g)*(s-E)/((i-a)*(i-g)*(i-E)),L=(s-a)*(s-g)*(s-i)/((E-a)*(E-g)*(E-i));for(let Q=0,Z=0;Q<e;Q++){let $=c[Z++],R=c[Z++],S=c[Z++],D=c[Z++],B=c[Z++],C=c[Z++],U=c[Z++],tc=c[Z++],nc=c[Z++],oc=c[Z++],vc=c[Z++],lc=c[Z++],kc=c[Z++],bc=c[Z++],gc=c[Z++],u=c[Z++],O=c[Z++],p=c[Z++],ec=c[Z++],qc=c[Z++],J=c[Z++],Ac=c[Z++],G=c[Z++],wc=c[Z++],Yc=c[Z++],Fc=c[Z++],Tc=c[Z++],jc=c[Z++],Dc=c[Z++],Ec=c[Z++],Qc=c[Z++],Rc=c[Z++],Sc=c[Z++],Uc=c[Z++],Vc=c[Z++],Wc=c[Z++],_c=c[Z++],$c=c[Z++],zc=c[Z++],Mc=c[Z++],Zc=c[Z++],Bc=c[Z++],H=c[Z++],Gc=c[Z++],sc=c[Z++],cc=c[Z++],mc=c[Z++],Oc=c[Z++],pc=c[Z++],uc=c[Z++],Nc=c[Z++],Hc=c[Z++],ct=c[Z++],tt=c[Z++],nt=c[Z++],Pc=c[Z++],Cc=c[Z++],Ic=c[Z++],Jc=c[Z++],Kc=c[Z++],ot=c[Z++],Lc=c[Z++],Xc=c[Z++],yc=c[Z++],ac=$*z+R*T+S*j+D*M,Yt=B*z+C*T+U*j+tc*M,Xt=nc*z+oc*T+vc*j+lc*M,yt=nc*rx0+bc*T+gc*j+u*M,at=O*z+p*T+ec*j+qc*M,lt=J*z+Ac*T+G*j+wc*M,st=Yc*z+Fc*T+Tc*j+jc*M,F=Yc*rx0+Ec*T+Qc*j+Rc*M,k=Sc*z+Uc*T+Vc*j+Wc*M,A=_c*z+$c*T+zc*j+Mc*M,rt=Zc*z+Bc*T+H*j+Gc*M,wt=Zc*rx0+cc*T+mc*j+Oc*M,Dt=pc*z+uc*T+Nc*j+Hc*M,Gt=ct*z+tt*T+nt*j+Pc*M,Ht=Cc*z+Ic*T+Jc*j+Kc*M,bt=Cc*rx0+Lc*T+Xc*j+yc*M,gt=ac*K+Yt*I+Xt*N+yt*P,qt=at*K+lt*I+st*N+F*P,Zt=k*K+A*I+rt*N+wt*P,kt=k*K+A*I+rt*N+bt*P;f[r+Q]=gt*V+qt*m+Zt*_+kt*L}return f}constructor(t,c,e){super(t,c,e)}};globalThis.Tricubic=Ct;})();
