(()=>{var ec=class{static degree;static variables;constructor(t,c,v=1){this.positions=t,this.values=c,this.dimension=v;let X=this.constructor.degree,x=this.constructor.variables,e=(X+1)**x,o=this.values.constructor;this.coefficients=new o(v*e).fill(0),this.update()}update(){return this.coefficients=this.constructor.coefficients(this.positions,this.values,this.dimension,this.coefficients),this}translate(t){let c=this.constructor.variables,v=this.positions,X=v.length;for(let x=0;x<X;x+=c)if(c===1&&typeof t=="number")v[x]+=t;else for(let e=0;e<c;e++)v[x+e]+=t[e];return this}scale(t,c){let v=this.constructor.variables,X=this.positions,x=X.length;for(let e=0;e<x;e+=v)if(v===1&&typeof t=="number"&&typeof c=="number"){let o=X[e];X[e]=(o-c)*t+c}else for(let o=0;o<v;o++){let n=X[e+o],s=t[o],r=c[o];X[e+o]=(n-r)*s+r}return this}evaluate(t,c=0,v,X=0){let x=this.dimension,e=this.constructor.degree,o=this.constructor.variables,n=e+1,s=!v;v||(v=new this.values.constructor(x));let r=(e+1)**o;for(let f=0;f<x;f++){v[X+f]=0;for(let Y=0;Y<r;Y++){let b=this.coefficients[f*r+Y],w=1;for(let i=0;i<o;i++){let g=Math.floor(Y/n**i%n);typeof t=="number"?w*=t**g:w*=t[c+i]**g}v[X+f]+=b*w}}return x===1?v[X]:v}step(t,c,v,X){let x=this.dimension,e=this.constructor.variables,o=0;for(let r=0;r<e;r++){let f=typeof t=="number"?t:t[r],Y=typeof c=="number"?c:c[r],b=typeof v=="number"?v:v[r];o+=Math.floor(Math.abs(Y-f)/b)}o*=x;let n=new this.positions.constructor(e),s;X?s=new this.values.constructor(x).fill(0):s=new this.values.constructor(o).fill(0);for(let r=0;r<=o;r+=x){for(let f=0;f<e;f++){let Y=Math.floor(r/e),b=typeof t=="number"?t:t[f],w=typeof t=="number"?v:v[f];n[f]=b+Y*w}X?X(e>1?n:n[0],this.evaluate(n,0,s,0)):this.evaluate(n,0,s,r)}return X?this:s}segment(t,c,v,X){let x=this.dimension,e=this.constructor.variables,o=0;if(typeof v=="number")o+=v;else for(let r=0;r<e;r++)o+=v[r];o*=x;let n=new this.positions.constructor(x),s;X?s=this.values.constructor(x).fill(0):s=this.values.constructor(o).fill(0);for(let r=0;r<o;r+=x){for(let f=0;f<x;f++){let Y=Math.floor(r/x),b=typeof t=="number"?t:t[f],w=typeof c=="number"?c:c[f],i=typeof v=="number"?v:v[f],g=(w-b)/i;n[f]=b+Y*g}X?X(e>1?n:n[0],this.evaluate(n,0,s,0)):this.evaluate(n,0,s,r)}return X?this:s}map(t,c){let v=this.constructor.variables,X=this.dimension,x=X*t.length,e=new this.positions.constructor(v),o;c?o=new this.values.constructor(X):o=new this.values.constructor(x).fill(0);for(let n=0,s=0;n<t.length;n+=v){for(let r=0;r<v;r++)e[r]=t[n+r];c?c(v>1?e:e[0],this.evaluate(e,0,o,0)):this.evaluate(e,0,o,n)}return c?this:o}};var Et=class extends ec{static degree=1;static variables=1;static coefficients(t,c,v=1,X,x=0){X||(X=new c.constructor(v*2));let e=t[0],n=t[1]-e;for(let s=0,r=0;s<v;s++){let f=c[s],b=(c[s+v]-f)/n,w=f-e*b;X[x+r++]=w,X[x+r++]=b}return X}static evaluate(t,c,v=1,X,x,e=0){let o=!x;x||(x=new c.constructor(v));let n=t[0],r=t[1]-n,f=0;for(let Y=0;Y<v;Y++){let b=c[f++],i=(c[f++]-b)/r,g=b-n*i,z=typeof X=="number"?X:X[0];x[e+Y]=i*z+g}return v===1?x[e]:x}constructor(t,c,v=1){super(t,c,v)}};globalThis.Linear=Et;var _t=class extends ec{static degree=1;static variables=2;static coefficients(t,c,v=1,X,x=0){X||(X=c.constructor(v*4));let e=t[0],o=t[1],n=t[2],s=t[3],r=1/((n-e)*(s-o)),f=v;for(let Y=0,b=0;Y<v;Y++){let w=Y,i=c[w],g=c[w+=v],z=c[w+=v],h=c[w+=v];X[x+b++]=(n*s*i-n*o*z-e*s*g+e*o*h)*r,X[x+b++]=(-s*i+o*z+s*g-o*h)*r,X[x+b++]=(-n*i+n*z+e*g-e*h)*r,X[x+b++]=(i-z-g+h)*r}return X}static evaluate(t,c,v=1,X,x,e=0){x||(x=new c.constructor(v));let o=X[0],n=X[1],s=t[0],r=t[1],f=t[2],Y=t[3],b=(o-f)/(s-f),w=(o-s)/(f-s),i=(n-Y)/(r-Y),g=(n-r)/(Y-r),z=v;for(let h=0,d=0;h<v;h++){let y=h,k=c[y],j=c[y+=z],Z=c[y+=z],M=c[y+=z],m=k*b+j*w,H=Z*b+M*w;x[e+h]=m*i+H*g}return v===1?x[e]:x}constructor(t,c,v=1){super(t,c,v)}};globalThis.Bilinear=_t;var At=class extends ec{static degree=1;static variables=3;static evaluate(t,c,v=1,X,x,e=0){x||(x=c.constructor(v));let o=X[0],n=X[1],s=X[2],r=t[0],f=t[1],Y=t[2],b=t[3],w=t[4],i=t[5],g=(o-b)/(r-b),z=(o-r)/(b-r),h=(n-w)/(f-w),d=(n-f)/(w-f),y=(s-i)/(Y-i),k=(s-Y)/(i-Y),j=0;for(let Z=0,M=0;Z<v;Z++){let m=Z,H=c[m],C=c[m+=v],A=c[m+=v],F=c[m+=v],Q=c[m+=v],N=c[m+=v],V=c[m+=v],K=c[m+=v],q=H*g+C*z,R=A*g+F*z,l=Q*g+N*z,S=V*g+K*z,U=q*h+R*d,D=l*h+S*d;x[e+M++]=U*y+D*k}return v===1?x[0]:x}static coefficients(t,c,v=1,X,x,e=0){x||(x=new c.constructor(v*8));let o=t[0],n=t[1],s=t[2],r=t[3],f=t[4],Y=t[5],b=1/((r-o)*(f-n)*(Y-s));for(let w=0,i=0;w<v;w++){let g=w,z=c[g],h=c[g+=v],d=c[g+=v],y=c[g+=v],k=c[g+=v],j=c[g+=v],Z=c[g+=v],M=c[g+=v],m=(-z*r*f*Y+k*r*f*s+d*r*n*Y-Z*r*n*s+h*o*f*Y-j*o*f*s-y*o*n*Y+M*o*n*s)*b,H=(z*f*Y-k*f*s-d*n*Y+Z*n*s-h*f*Y+j*f*s+y*n*Y-M*n*s)*b,C=(z*r*Y-k*r*s-d*r*Y+Z*r*s-h*o*Y+j*o*s+y*o*Y-M*o*s)*b,A=(-z*Y+k*s+d*Y-Z*s+h*Y-j*s-y*Y+M*s)*b,F=(z*r*f-k*r*f-d*r*n+Z*r*n-h*o*f+j*o*f+y*o*n-M*o*n)*b,Q=(-z*f+k*f+d*n-Z*n+h*f-j*f-y*n+M*n)*b,N=(-z*r+k*r+d*r-Z*r+h*o-j*o-y*o+M*o)*b,V=(z-k-d+Z-h+j+y-M)*b;x[e+i++]=m,x[e+i++]=H,x[e+i++]=C,x[e+i++]=A,x[e+i++]=F,x[e+i++]=Q,x[e+i++]=N,x[e+i++]=V}return x}constructor(t,c,v=1){super(t,c,v)}evaluate(t,c=0,v,X=0){v||(v=new this.values.constructor(this.dimension));let x=t[c+0],e=t[c+1],o=t[c+2];for(let n=0;n<this.dimension;n++){let s=this.coefficients[8*n+0],r=this.coefficients[8*n+1],f=this.coefficients[8*n+2],Y=this.coefficients[8*n+3],b=this.coefficients[8*n+4],w=this.coefficients[8*n+5],i=this.coefficients[8*n+6],g=this.coefficients[8*n+7];v[X+n]=-(s+r*x+f*e+Y*x*e+(b+w*x+i*e+g*x*e)*o)}return v}};globalThis.Trilinear=At;var Ft=class extends ec{static degree=2;static variables=1;static coefficients(t,c,v=1,X,x=0){X||(X=new c.constructor(3*v));let e=t[0],o=t[1],n=t[2],s=1/((e-o)*(e-n)),r=1/((o-e)*(o-n)),f=1/((n-e)*(n-o)),Y=v;for(let b=0,w=0;b<Y;b++){let i=b,g=c[i]*s,z=c[i+=Y]*r,h=c[i+=Y]*f,d=g*o*n+z*e*n+h*e*o,y=-(g*(o+n)+z*(e+n)+h*(e+o)),k=g+z+h;X[x+w++]=d,X[x+w++]=y,X[x+w++]=k}return X}static evaluate(t,c,v=1,X,x,e=0){x=x||new c.constructor(v);let o=typeof X=="number"?X:X[0],n=t[0],s=t[1],r=t[2],f=o-n,Y=o-s,b=o-r,w=1/(n-s),i=1/(n-r),g=1/(s-r),z=Y*b*w*i,h=-f*b*w*g,d=f*Y*w*i;for(let y=0;y<v;y++){let k=y,j=c[k],Z=c[k+=v],M=c[k+=v];x[e+y]=z*j+h*Z+d*M}return v===1?x[e]:x}constructor(t,c,v=1){super(t,c,v)}};globalThis.Quadratic=Ft;var Mt=class extends ec{static degree=2;static variables=2;static evaluate(t,c,v=1,X,x,e=0){x||(x=new c.constructor(v));let o=X[0],n=X[1],s=t[0],r=t[1],f=t[2],Y=t[3],b=t[4],w=t[5],i=s-f,g=s-b,z=f-b,h=o-s,d=o-f,y=o-b,k=n-r,j=n-Y,Z=n-w,M=r-Y,m=r-w,H=Y-w,C=d*y/(i*g),A=-(h*y)/(i*z),F=h*d/(g*z),Q=j*Z/(M*m),N=-(k*Z)/(M*H),V=k*j/(m*H);for(let K=0;K<v;K++){let q=K,R=c[q],l=c[q+=v],S=c[q+=v],U=c[q+=v],D=c[q+=v],P=c[q+=v],B=c[q+=v],a=c[q+=v],O=c[q+=v],tc=C*R+A*l+F*S,G=C*U+A*D+F*P,p=C*B+A*a+F*O;x[e+K]=Q*tc+N*G+V*p}return v===1?x[e]:x}static coefficients(t,c,v=1,X,x=0){X||(X=new c.constructor(v*9));let e=t[0],o=t[1],n=t[2],s=t[3],r=t[4],f=t[5],Y=e*n,b=e*r,w=n*r,i=o*s,g=o*f,z=s*f,h=1/((e-n)*(e-r)),d=1/((n-e)*(n-r)),y=1/((r-e)*(r-n)),k=1/((o-s)*(o-f)),j=1/((s-o)*(s-f)),Z=1/((f-o)*(f-s)),M=h*k,m=d*k,H=y*k,C=h*j,A=d*j,F=y*j,Q=h*Z,N=d*Z,V=y*Z,K=v,q=c;for(let R=0,l=0;R<K;R++){let S=R,U=q[S]*M,D=q[S+=K]*C,P=q[S+=K]*Q,B=q[S+=K]*m,a=q[S+=K]*A,O=q[S+=K]*N,tc=q[S+=K]*H,G=q[S+=K]*F,p=q[S+=K]*V,W=z*(U*w+B*b+tc*Y)+g*(D*w+a*b+G*Y)+i*(P*w+O*b+p*Y),Zc=-(s+f)*(U*w-B*b-tc*Y)-(o+f)*(D*w-a*b-G*Y)-(o+s)*(P*w-O*b-p*Y),jc=-(n+r)*(U*z-D*g-P*i)-(e+r)*(B*z-a*g-O*i)-(e+n)*(tc*z-G*g-p*i),Tc=U*z-B*z-tc*z+D*g-a*g-G*g+P*i-O*i-p*i,nc=U*w-D*w-P*w+B*b-a*b-O*b+tc*Y-G*Y-p*Y,u=(s+f)*(U*(n+r)+B*(e+r)+tc*(e+n))+(o+f)*(D*(n+r)+a*(e+r)+G*(e+n))+(o+s)*(P*(n+r)+O*(e+r)+p*(e+n)),cc=-(s+f)*(U+B+tc)-(o+f)*(D+a+G)-(o+s)*(P+O+p),Yc=-(n+r)*(U+D+P)-(e+r)*(B+a+O)-(e+n)*(tc+G+p),Ec=U+B+tc+D+a+G+P+O+p;X[x+l++]=W,X[x+l++]=Zc,X[x+l++]=Tc,X[x+l++]=jc,X[x+l++]=u,X[x+l++]=cc,X[x+l++]=nc,X[x+l++]=Yc,X[x+l++]=Ec}return X}constructor(t,c,v=1){super(t,c,v)}};globalThis.Biquadratic=Mt;var mt=class extends ec{static degree=2;static variables=3;static coefficients(t,c,v=1,X,x=0){X||(X=new c.constructor(v*27));let e=t[0],o=t[1],n=t[2],s=t[3],r=t[4],f=t[5],Y=t[6],b=t[7],w=t[8],i=1/((e-s)*(e-Y)),g=1/((s-e)*(s-Y)),z=1/((Y-e)*(Y-s)),h=1/((o-r)*(o-b)),d=1/((r-o)*(r-b)),y=1/((b-o)*(b-r)),k=1/((n-f)*(n-w)),j=1/((f-n)*(f-w)),Z=1/((w-n)*(w-f)),M=i*h*k,m=g*h*k,H=z*h*k,C=i*d*k,A=g*d*k,F=z*d*k,Q=i*y*k,N=g*y*k,V=z*y*k,K=i*h*j,q=g*h*j,R=z*h*j,l=i*d*j,S=g*d*j,U=z*d*j,D=i*y*j,P=g*y*j,B=z*y*j,a=i*h*Z,O=g*h*Z,tc=z*h*Z,G=i*d*Z,p=g*d*Z,W=z*d*Z,Zc=i*y*Z,jc=g*y*Z,Tc=z*y*Z,nc=new Float32Array(9),u=new Float32Array(9),cc=new Float32Array(9);nc[0]=s*Y,nc[1]=e*Y,nc[2]=e*s,nc[3]=-(s+Y),nc[4]=-(e+Y),nc[5]=-(e+s),nc[6]=1,nc[7]=1,nc[8]=1,u[0]=r*b,u[1]=o*b,u[2]=o*r,u[3]=-(r+b),u[4]=-(o+b),u[5]=-(o+r),u[6]=1,u[7]=1,u[8]=1,cc[0]=f*w,cc[1]=n*w,cc[2]=n*f,cc[3]=-(f+w),cc[4]=-(n+w),cc[5]=-(n+f),cc[6]=1,cc[7]=1,cc[8]=1;for(let Yc=0,Ec=c,L=v,_c=0;Yc<L;Yc++){let I=Yc,ic=c[I]*M,wc=c[I+=L]*m,gc=c[I+=L]*H,qc=c[I+=L]*C,zc=c[I+=L]*A,lc=c[I+=L]*F,kc=c[I+=L]*Q,Nc=c[I+=L]*N,Dc=c[I+=L]*V,Rc=c[I+=L]*K,Sc=c[I+=L]*q,Uc=c[I+=L]*R,Vc=c[I+=L]*l,Wc=c[I+=L]*S,$c=c[I+=L]*U,Ac=c[I+=L]*D,Fc=c[I+=L]*P,Mc=c[I+=L]*B,mc=c[I+=L]*a,J=c[I+=L]*O,oc=c[I+=L]*tc,Pc=c[I+=L]*G,sc=c[I+=L]*p,rc=c[I+=L]*W,ac=c[I+=L]*Zc,Oc=c[I+=L]*jc,pc=c[I+=L]*Tc;for(let Kc=0,Bc=0;Kc<3;Kc++){let uc=cc[Bc++],ct=cc[Bc++],tt=cc[Bc++];for(let Lc=0,Cc=0;Lc<3;Lc++){let Gc=u[Cc++],Hc=u[Cc++],Ic=u[Cc++];for(let Qc=0,Jc=0;Qc<3;Qc++){let dc=nc[Jc++],Xc=nc[Jc++],bc=nc[Jc++];X[x+_c++]=uc*(Gc*(dc*ic+Xc*wc+bc*gc)+Hc*(dc*qc+Xc*zc+bc*lc)+Ic*(dc*kc+Xc*Nc+bc*Dc))+ct*(Gc*(dc*Rc+Xc*Sc+bc*Uc)+Hc*(dc*Vc+Xc*Wc+bc*$c)+Ic*(dc*Ac+Xc*Fc+bc*Mc))+tt*(Gc*(dc*mc+Xc*J+bc*oc)+Hc*(dc*Pc+Xc*sc+bc*rc)+Ic*(dc*ac+Xc*Oc+bc*pc))}}}}return X}static evaluate(t,c,v=1,X,x,e=0){x=x||new c.constructor(v);let o=X[0],n=X[1],s=X[2],r=t[0],f=t[1],Y=t[2],b=t[3],w=t[4],i=t[5],g=t[6],z=t[7],h=t[8],d=(o-b)*(o-g)/((r-b)*(r-g)),y=(o-r)*(o-g)/((b-r)*(b-g)),k=(o-r)*(o-b)/((g-r)*(g-b)),j=(n-w)*(n-z)/((f-w)*(f-z)),Z=(n-f)*(n-z)/((w-f)*(w-z)),M=(n-f)*(n-w)/((z-f)*(z-w)),m=(s-i)*(s-h)/((Y-i)*(Y-h)),H=(s-Y)*(s-h)/((i-Y)*(i-h)),C=(s-Y)*(s-i)/((h-Y)*(h-i)),A=c,F=v;for(let Q=0;Q<F;Q++){let N=Q,V=A[N]*d+A[N+=F]*y+A[N+=F]*k,K=A[N+=F]*d+A[N+=F]*y+A[N+=F]*k,q=A[N+=F]*d+A[N+=F]*y+A[N+=F]*k,R=A[N+=F]*d+A[N+=F]*y+A[N+=F]*k,l=A[N+=F]*d+A[N+=F]*y+A[N+=F]*k,S=A[N+=F]*d+A[N+=F]*y+A[N+=F]*k,U=A[N+=F]*d+A[N+=F]*y+A[N+=F]*k,D=A[N+=F]*d+A[N+=F]*y+A[N+=F]*k,P=A[N+=F]*d+A[N+=F]*y+A[N+=F]*k,B=V*j+K*Z+q*M,a=R*j+l*Z+S*M,O=U*j+D*Z+P*M;x[e+Q]=B*m+a*H+O*C}return v===1?x[e]:x}constructor(t,c,v=1){super(t,c,v)}};globalThis.Triquadratic=mt;var Nt=class extends ec{static degree=3;static variables=1;static evaluate(t,c,v=1,X,x,e=0){x||(x=new c.constructor(v));let o=typeof X=="number"?X:X[0],n=t[0],s=t[1],r=t[2],f=t[3],Y=n-s,b=n-r,w=n-f,i=s-r,g=s-f,z=r-f,h=o-n,d=o-s,y=o-r,k=o-f,j=d*y*k/(Y*b*w),Z=-h*y*k/(Y*i*g),M=h*d*k/(b*i*z),m=-h*d*y/(w*g*z),H=v;for(let C=0;C<H;C++){let A=C,F=c[A],Q=c[A+=H],N=c[A+=H],V=c[A+=H];x[e+C]=F*j+Q*Z+N*M+V*m}return H===1?x[e]:x}static coefficients(t,c,v=1,X,x=0){X||(X=new c.constructor(4*v));let e=t[0],o=t[1],n=t[2],s=t[3],r=e*o,f=e*n,Y=e*s,b=o*n,w=o*s,i=n*s,g=r*n,z=r*s,h=f*s,d=b*s,y=1/(e**3-(r+f+Y)*e+(g+z+h)-d),k=1/(o**3-(r+b+w)*o+(g+z+d)-h),j=1/(n**3-(f+b+i)*n+(g+h+d)-z),Z=1/(s**3-(Y+w+i)*s+(z+h+d)-g),M=v;for(let m=0,H=0;m<v;m++){let C=m,A=c[C]*y,F=c[C+=M]*k,Q=c[C+=M]*j,N=c[C+=M]*Z,V=-(A*d+F*h+Q*z+N*g),K=A*(b+w+i)+F*(f+Y+i)+Q*(r+Y+w)+N*(r+f+b),q=-(A*(o+n+s)+F*(e+n+s)+Q*(e+o+s)+N*(e+o+n)),R=A+F+Q+N;X[x+H++]=V,X[x+H++]=K,X[x+H++]=q,X[x+H++]=R}return X}constructor(t,c,v=1){super(t,c,v)}};globalThis.Cubic=Nt;function yc($,t,c){return($[0]*t[0]+$[1]*t[1]+$[2]*t[2]+$[3]*t[3])*c[0]+($[0]*t[4]+$[1]*t[5]+$[2]*t[6]+$[3]*t[7])*c[1]+($[0]*t[8]+$[1]*t[9]+$[2]*t[10]+$[3]*t[11])*c[2]+($[0]*t[12]+$[1]*t[13]+$[2]*t[14]+$[3]*t[15])*c[3]}var Dt=class extends ec{static degree=3;static variables=2;static coefficients(t,c,v=1,X,x=0){X||(X=new c.constructor(v*16));let e=t[0],o=t[1],n=t[2],s=t[3],r=t[4],f=t[5],Y=t[6],b=t[7],w=e*n,i=e*r,g=e*Y,z=n*r,h=n*Y,d=r*Y,y=w*r,k=w*Y,j=i*Y,Z=z*Y,M=z+h+d,m=i+g+d,H=w+g+h,C=w+i+z,A=n+r+Y,F=e+r+Y,Q=e+n+Y,N=e+n+r,V=[-Z,-j,-k,-y],K=[M,m,H,C],q=[-A,-F,-Q,-N],R=[1,1,1,1],l=e-n,S=e-r,U=e-Y,D=n-r,P=n-Y,B=r-Y,a=o*s,O=o*f,tc=o*b,G=s*f,p=s*b,W=f*b,Zc=a*f,jc=a*b,Tc=O*b,nc=G*b,u=o-s,cc=o-f,Yc=o-b,Ec=s-f,L=s-b,_c=f-b,I=1/(l*S*U),ic=-1/(l*D*P),wc=1/(S*D*B),gc=-1/(U*P*B),qc=1/(u*cc*Yc),zc=-1/(u*Ec*L),lc=1/(cc*Ec*_c),kc=-1/(Yc*L*_c),Nc=G+p+W,Dc=O+tc+W,Rc=a+tc+p,Sc=a+O+G,Uc=s+f+b,Vc=o+f+b,Wc=o+s+b,$c=o+s+f,Ac=[-nc,-Tc,-jc,-Zc],Fc=[Nc,Dc,Rc,Sc],Mc=[-Uc,-Vc,-Wc,-$c],mc=R,J=new Float32Array(16),oc=v;for(let Pc=0,sc=0;Pc<oc;Pc++){let rc=Pc,ac=c[rc],Oc=c[rc+=oc],pc=c[rc+=oc],Kc=c[rc+=oc],Bc=c[rc+=oc],uc=c[rc+=oc],ct=c[rc+=oc],tt=c[rc+=oc],Lc=c[rc+=oc],Cc=c[rc+=oc],Gc=c[rc+=oc],Hc=c[rc+=oc],Ic=c[rc+=oc],Qc=c[rc+=oc],Jc=c[rc+=oc],dc=c[rc+=oc];J[0]=ac*I*qc,J[1]=Oc*ic*qc,J[2]=pc*wc*qc,J[3]=Kc*gc*qc,J[4]=Bc*I*zc,J[5]=uc*ic*zc,J[6]=ct*wc*zc,J[7]=tt*gc*zc,J[8]=Lc*I*lc,J[9]=Cc*ic*lc,J[10]=Gc*wc*lc,J[11]=Hc*gc*lc,J[12]=Ic*I*kc,J[13]=Qc*ic*kc,J[14]=Jc*wc*kc,J[15]=dc*gc*kc,X[x+sc++]=yc(V,J,Ac),X[x+sc++]=yc(K,J,Ac),X[x+sc++]=yc(q,J,Ac),X[x+sc++]=yc(R,J,Ac),X[x+sc++]=yc(V,J,Fc),X[x+sc++]=yc(K,J,Fc),X[x+sc++]=yc(q,J,Fc),X[x+sc++]=yc(R,J,Fc),X[x+sc++]=yc(V,J,Mc),X[x+sc++]=yc(K,J,Mc),X[x+sc++]=yc(q,J,Mc),X[x+sc++]=yc(R,J,Mc),X[x+sc++]=yc(V,J,mc),X[x+sc++]=yc(K,J,mc),X[x+sc++]=yc(q,J,mc),X[x+sc++]=yc(R,J,mc)}return X}static evaluate(t,c,v=1,X,x,e=0){x||(x=new c.constructor(v));let o=X[0],n=X[1],s=t[0],r=t[1],f=t[2],Y=t[3],b=t[4],w=t[5],i=t[6],g=t[7],z=o-s,h=o-f,d=o-b,y=o-i,k=s-f,j=s-b,Z=s-i,M=f-b,m=f-i,H=b-i,C=n-r,A=n-Y,F=n-w,Q=n-g,N=r-Y,V=r-w,K=r-g,q=Y-w,R=Y-g,l=w-g,S=h*d*y/(k*j*Z),U=-z*d*y/(k*M*m),D=z*h*y/(j*M*H),P=-z*h*d/(Z*m*H),B=A*F*Q/(N*V*K),a=-C*F*Q/(N*q*R),O=C*A*Q/(V*q*l),tc=-C*A*F/(K*R*l),G=v;for(let p=0;p<G;p++){let W=p,Zc=c[W],jc=c[W+=G],Tc=c[W+=G],nc=c[W+=G],u=c[W+=G],cc=c[W+=G],Yc=c[W+=G],Ec=c[W+=G],L=c[W+=G],_c=c[W+=G],I=c[W+=G],ic=c[W+=G],wc=c[W+=G],gc=c[W+=G],qc=c[W+=G],zc=c[W+=G],lc=Zc*S+jc*U+Tc*D+nc*P,kc=u*S+cc*U+Yc*D+Ec*P,Nc=L*S+_c*U+I*D+ic*P,Dc=wc*S+gc*U+qc*D+zc*P;x[e+p]=lc*B+kc*a+Nc*O+Dc*tc}return G===1?x[e]:x}constructor(t,c,v=1){super(t,c,v)}evaluate(t,c=0,v,X=0){let x=this.dimension;v||(v=new this.values.constructor(x));let e=t[0],o=t[1];for(let n=0,s=0;n<x;n++){let r=this.coefficients[s++],f=this.coefficients[s++],Y=this.coefficients[s++],b=this.coefficients[s++],w=this.coefficients[s++],i=this.coefficients[s++],g=this.coefficients[s++],z=this.coefficients[s++],h=this.coefficients[s++],d=this.coefficients[s++],y=this.coefficients[s++],k=this.coefficients[s++],j=this.coefficients[s++],Z=this.coefficients[s++],M=this.coefficients[s++],m=this.coefficients[s++];v[n]=r+f*e+Y*e**2+b*e**3+(w+i*e+g*e**2+z*e**3)*o+(h+d*e+y*e**2+k*e**3)*o**2+(j+Z*e+M*e**2+m*e**3)*o**3}return v}};globalThis.Bicubic=Dt;var Pt=class extends ec{static degree=3;static variables=3;static coefficients(t,c,v=1,X,x=0){X||(X=new c.constructor(64));let e=t[0],o=t[1],n=t[2],s=t[3],r=t[4],f=t[5],Y=t[6],b=t[7],w=t[8],i=t[9],g=t[10],z=t[11],h=new t.constructor(4),d=new t.constructor(4),y=new t.constructor(4);h[0]=1/((e-s)*(e-Y)*(e-i)),h[1]=1/((s-e)*(s-Y)*(s-i)),h[2]=1/((Y-e)*(Y-s)*(Y-i)),h[3]=1/((i-e)*(i-s)*(i-Y)),d[0]=1/((o-r)*(o-b)*(o-g)),d[1]=1/((r-o)*(r-b)*(r-g)),d[2]=1/((b-o)*(b-r)*(b-g)),d[3]=1/((g-o)*(g-r)*(g-b)),y[0]=1/((n-f)*(n-w)*(n-z)),y[1]=1/((f-n)*(f-w)*(f-z)),y[2]=1/((w-n)*(w-f)*(w-z)),y[3]=1/((z-n)*(z-f)*(z-w));let k=e*s,j=e*Y,Z=e*i,M=s*Y,m=s*i,H=Y*i,C=o*r,A=o*b,F=o*g,Q=r*b,N=r*g,V=b*g,K=n*f,q=n*w,R=n*z,l=f*w,S=f*z,U=w*z,D=new Float32Array(16),P=new Float32Array(16),B=new Float32Array(16);D[0]=-M*i,D[1]=-j*i,D[2]=-k*i,D[3]=-k*Y,D[4]=M+m+H,D[5]=j+Z+H,D[6]=k+Z+m,D[7]=k+j+M,D[8]=-(s+Y+i),D[9]=-(e+Y+i),D[10]=-(e+s+i),D[11]=-(e+s+Y),D[12]=1,D[13]=1,D[14]=1,D[15]=1,P[0]=-Q*g,P[1]=-A*g,P[2]=-C*g,P[3]=-C*b,P[4]=Q+N+V,P[5]=A+F+V,P[6]=C+F+N,P[7]=C+A+Q,P[8]=-(r+b+g),P[9]=-(o+b+g),P[10]=-(o+r+g),P[11]=-(o+r+b),P[12]=1,P[13]=1,P[14]=1,P[15]=1,B[0]=-l*z,B[1]=-q*z,B[2]=-K*z,B[3]=-K*w,B[4]=l+S+U,B[5]=q+R+U,B[6]=K+R+S,B[7]=K+q+l,B[8]=-(f+w+z),B[9]=-(n+w+z),B[10]=-(n+f+z),B[11]=-(n+f+w),B[12]=1,B[13]=1,B[14]=1,B[15]=1;let a=h[0]*d[0]*y[0],O=h[1]*d[0]*y[0],tc=h[2]*d[0]*y[0],G=h[3]*d[0]*y[0],p=h[0]*d[1]*y[0],W=h[1]*d[1]*y[0],Zc=h[2]*d[1]*y[0],jc=h[3]*d[1]*y[0],Tc=h[0]*d[2]*y[0],nc=h[1]*d[2]*y[0],u=h[2]*d[2]*y[0],cc=h[3]*d[2]*y[0],Yc=h[0]*d[3]*y[0],Ec=h[1]*d[3]*y[0],L=h[2]*d[3]*y[0],_c=h[3]*d[3]*y[0],I=h[0]*d[0]*y[1],ic=h[1]*d[0]*y[1],wc=h[2]*d[0]*y[1],gc=h[3]*d[0]*y[1],qc=h[0]*d[1]*y[1],zc=h[1]*d[1]*y[1],lc=h[2]*d[1]*y[1],kc=h[3]*d[1]*y[1],Nc=h[0]*d[2]*y[1],Dc=h[1]*d[2]*y[1],Rc=h[2]*d[2]*y[1],Sc=h[3]*d[2]*y[1],Uc=h[0]*d[3]*y[1],Vc=h[1]*d[3]*y[1],Wc=h[2]*d[3]*y[1],$c=h[3]*d[3]*y[1],Ac=h[0]*d[0]*y[2],Fc=h[1]*d[0]*y[2],Mc=h[2]*d[0]*y[2],mc=h[3]*d[0]*y[2],J=h[0]*d[1]*y[2],oc=h[1]*d[1]*y[2],Pc=h[2]*d[1]*y[2],sc=h[3]*d[1]*y[2],rc=h[0]*d[2]*y[2],ac=h[1]*d[2]*y[2],Oc=h[2]*d[2]*y[2],pc=h[3]*d[2]*y[2],Kc=h[0]*d[3]*y[2],Bc=h[1]*d[3]*y[2],uc=h[2]*d[3]*y[2],ct=h[3]*d[3]*y[2],tt=h[0]*d[0]*y[3],Lc=h[1]*d[0]*y[3],Cc=h[2]*d[0]*y[3],Gc=h[3]*d[0]*y[3],Hc=h[0]*d[1]*y[3],Ic=h[1]*d[1]*y[3],Qc=h[2]*d[1]*y[3],Jc=h[3]*d[1]*y[3],dc=h[0]*d[2]*y[3],Xc=h[1]*d[2]*y[3],bc=h[2]*d[2]*y[3],ft=h[3]*d[2]*y[3],yt=h[0]*d[3]*y[3],dt=h[1]*d[3]*y[3],Yt=h[2]*d[3]*y[3],Xt=h[3]*d[3]*y[3];for(let nt=0,T=v,E=c;nt<T;nt++){let _=nt,bt=E[_]*a,it=E[_+=T]*O,wt=E[_+=T]*tc,gt=E[_+=T]*G,qt=E[_+=T]*p,zt=E[_+=T]*W,lt=E[_+=T]*Zc,kt=E[_+=T]*jc,Zt=E[_+=T]*Tc,jt=E[_+=T]*nc,Tt=E[_+=T]*u,Ht=E[_+=T]*cc,It=E[_+=T]*Yc,Jt=E[_+=T]*Ec,Kt=E[_+=T]*L,Lt=E[_+=T]*_c,Qt=E[_+=T]*I,Rt=E[_+=T]*ic,St=E[_+=T]*wc,Ut=E[_+=T]*gc,Vt=E[_+=T]*qc,Wt=E[_+=T]*zc,$t=E[_+=T]*lc,at=E[_+=T]*kc,Ot=E[_+=T]*Nc,pt=E[_+=T]*Dc,ut=E[_+=T]*Rc,cn=E[_+=T]*Sc,tn=E[_+=T]*Uc,nn=E[_+=T]*Vc,on=E[_+=T]*Wc,sn=E[_+=T]*$c,rn=E[_+=T]*Ac,en=E[_+=T]*Fc,vn=E[_+=T]*Mc,xn=E[_+=T]*mc,hn=E[_+=T]*J,fn=E[_+=T]*oc,yn=E[_+=T]*Pc,dn=E[_+=T]*sc,Yn=E[_+=T]*rc,Xn=E[_+=T]*ac,bn=E[_+=T]*Oc,wn=E[_+=T]*pc,gn=E[_+=T]*Kc,qn=E[_+=T]*Bc,zn=E[_+=T]*uc,ln=E[_+=T]*ct,kn=E[_+=T]*tt,Zn=E[_+=T]*Lc,jn=E[_+=T]*Cc,Tn=E[_+=T]*Gc,En=E[_+=T]*Hc,_n=E[_+=T]*Ic,An=E[_+=T]*Qc,Fn=E[_+=T]*Jc,Mn=E[_+=T]*dc,mn=E[_+=T]*Xc,Nn=E[_+=T]*bc,Dn=E[_+=T]*ft,Pn=E[_+=T]*yt,Bn=E[_+=T]*dt,Cn=E[_+=T]*Yt,Gn=E[_+=T]*Xt;for(let Bt=0,ot=0,Hn=0;Bt<4;Bt++){let In=B[ot++],Jn=B[ot++],Kn=B[ot++],Ln=B[ot++];for(let Ct=0,st=0;Ct<4;Ct++){let rt=P[st++],et=P[st++],vt=P[st++],xt=P[st++];for(let Gt=0,ht=0;Gt<4;Gt++){let vc=D[ht++],xc=D[ht++],hc=D[ht++],fc=D[ht++];X[x+64*nt+Hn++]=In*(rt*(vc*bt+xc*it+hc*wt+fc*gt)+et*(vc*qt+xc*zt+hc*lt+fc*kt)+vt*(vc*Zt+xc*jt+hc*Tt+fc*Ht)+xt*(vc*It+xc*Jt+hc*Kt+fc*Lt))+Jn*(rt*(vc*Qt+xc*Rt+hc*St+fc*Ut)+et*(vc*Vt+xc*Wt+hc*$t+fc*at)+vt*(vc*Ot+xc*pt+hc*ut+fc*cn)+xt*(vc*tn+xc*nn+hc*on+fc*sn))+Kn*(rt*(vc*rn+xc*en+hc*vn+fc*xn)+et*(vc*hn+xc*fn+hc*yn+fc*dn)+vt*(vc*Yn+xc*Xn+hc*bn+fc*wn)+xt*(vc*gn+xc*qn+hc*zn+fc*ln))+Ln*(rt*(vc*kn+xc*Zn+hc*jn+fc*Tn)+et*(vc*En+xc*_n+hc*An+fc*Fn)+vt*(vc*Mn+xc*mn+hc*Nn+fc*Dn)+xt*(vc*Pn+xc*Bn+hc*Cn+fc*Gn))}}}}return X}static evaluate(t,c,v=1,X,x,e=0){x=x||new c.constructor(v);let o=X[0],n=X[1],s=X[2],r=t[0],f=t[1],Y=t[2],b=t[3],w=t[4],i=t[5],g=t[6],z=t[7],h=t[8],d=t[9],y=t[10],k=t[11],j=(o-b)*(o-g)*(o-d)/((r-b)*(r-g)*(r-d)),Z=(o-r)*(o-g)*(o-d)/((b-r)*(b-g)*(b-d)),M=(o-r)*(o-b)*(o-d)/((g-r)*(g-b)*(g-d)),m=(o-r)*(o-b)*(o-g)/((d-r)*(d-b)*(d-g)),H=(n-w)*(n-z)*(n-y)/((f-w)*(f-z)*(f-y)),C=(n-f)*(n-z)*(n-y)/((w-f)*(w-z)*(w-y)),A=(n-f)*(n-w)*(n-y)/((z-f)*(z-w)*(z-y)),F=(n-f)*(n-w)*(n-z)/((y-f)*(y-w)*(y-z)),Q=(s-i)*(s-h)*(s-k)/((Y-i)*(Y-h)*(Y-k)),N=(s-Y)*(s-h)*(s-k)/((i-Y)*(i-h)*(i-k)),V=(s-Y)*(s-i)*(s-k)/((h-Y)*(h-i)*(h-k)),K=(s-Y)*(s-i)*(s-h)/((k-Y)*(k-i)*(k-h)),q=v;for(let R=0;R<q;R++){let l=R,S=c[l],U=c[l+=q],D=c[l+=q],P=c[l+=q],B=c[l+=q],a=c[l+=q],O=c[l+=q],tc=c[l+=q],G=c[l+=q],p=c[l+=q],W=c[l+=q],Zc=c[l+=q],jc=c[l+=q],Tc=c[l+=q],nc=c[l+=q],u=c[l+=q],cc=c[l+=q],Yc=c[l+=q],Ec=c[l+=q],L=c[l+=q],_c=c[l+=q],I=c[l+=q],ic=c[l+=q],wc=c[l+=q],gc=c[l+=q],qc=c[l+=q],zc=c[l+=q],lc=c[l+=q],kc=c[l+=q],Nc=c[l+=q],Dc=c[l+=q],Rc=c[l+=q],Sc=c[l+=q],Uc=c[l+=q],Vc=c[l+=q],Wc=c[l+=q],$c=c[l+=q],Ac=c[l+=q],Fc=c[l+=q],Mc=c[l+=q],mc=c[l+=q],J=c[l+=q],oc=c[l+=q],Pc=c[l+=q],sc=c[l+=q],rc=c[l+=q],ac=c[l+=q],Oc=c[l+=q],pc=c[l+=q],Kc=c[l+=q],Bc=c[l+=q],uc=c[l+=q],ct=c[l+=q],tt=c[l+=q],Lc=c[l+=q],Cc=c[l+=q],Gc=c[l+=q],Hc=c[l+=q],Ic=c[l+=q],Qc=c[l+=q],Jc=c[l+=q],dc=c[l+=q],Xc=c[l+=q],bc=c[l+=q],ft=S*j+U*Z+D*M+P*m,yt=B*j+a*Z+O*M+tc*m,dt=G*j+p*Z+W*M+Zc*m,Yt=jc*j+Tc*Z+nc*M+u*m,Xt=cc*j+Yc*Z+Ec*M+L*m,nt=_c*j+I*Z+ic*M+wc*m,T=gc*j+qc*Z+zc*M+lc*m,E=kc*j+Nc*Z+Dc*M+Rc*m,_=Sc*j+Uc*Z+Vc*M+Wc*m,bt=$c*j+Ac*Z+Fc*M+Mc*m,it=mc*j+J*Z+oc*M+Pc*m,wt=sc*j+rc*Z+ac*M+Oc*m,gt=pc*j+Kc*Z+Bc*M+uc*m,qt=ct*j+tt*Z+Lc*M+Cc*m,zt=Gc*j+Hc*Z+Ic*M+Qc*m,lt=Jc*j+dc*Z+Xc*M+bc*m,kt=ft*H+yt*C+dt*A+Yt*F,Zt=Xt*H+nt*C+T*A+E*F,jt=_*H+bt*C+it*A+wt*F,Tt=gt*H+qt*C+zt*A+lt*F;x[e+R]=kt*Q+Zt*N+jt*V+Tt*K}return v===1?x[e]:x}constructor(t,c,v){super(t,c,v)}};globalThis.Tricubic=Pt;})();
