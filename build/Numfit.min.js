(()=>{var vc=class{static degree;static variables;constructor(n,c,r=1){this.positions=n,this.values=c,this.dimension=r;let f=this.constructor.degree,h=this.constructor.variables,x=(f+1)**h,o=this.values.constructor;this.coefficients=new o(r*x).fill(0),this.update()}get variables(){}get degree(){}update(){return this.coefficients=this.constructor.coefficients(this.positions,this.values,this.dimension,this.coefficients),this}translate(n){let c=this.constructor.variables,r=this.positions,f=r.length;for(let h=0;h<f;h+=c)if(c===1&&typeof n=="number")r[h]+=n;else for(let x=0;x<c;x++)r[h+x]+=n[x];return this}scale(n,c){let r=this.constructor.variables,f=this.positions,h=f.length;for(let x=0;x<h;x+=r)if(r===1&&typeof n=="number"&&typeof c=="number"){let o=f[x];f[x]=(o-c)*n+c}else for(let o=0;o<r;o++){let t=f[x+o],v=n[o],s=c[o];f[x+o]=(t-s)*v+s}return this}evaluate(n,c=0,r,f=0){let h=this.dimension,x=this.constructor.degree,o=this.constructor.variables,t=x+1,v=!r;r||(r=new this.values.constructor(h));let s=(x+1)**o;for(let X=0;X<h;X++){r[f+X]=0;for(let Y=0;Y<s;Y++){let b=this.coefficients[X*s+Y],q=1;for(let w=0;w<o;w++){let g=Math.floor(Y/t**w%t);typeof n=="number"?q*=n**g:q*=n[c+w]**g}r[f+X]+=b*q}}return h===1?r[f]:r}step(n,c,r,f){let h=this.dimension,x=this.constructor.variables,o=1;for(let s=0;s<x;s++){let X=typeof n=="number"?n:n[s],Y=typeof c=="number"?c:c[s],b=typeof r=="number"?r:r[s];o*=Math.ceil(Math.abs(Y-X)/b)+1}o*=h;let t=new this.positions.constructor(x),v;f?v=new this.values.constructor(h).fill(0):v=new this.values.constructor(o).fill(0);for(let s=0;s<o;s+=h){let X=1;for(let Y=0;Y<x;Y++){let b=typeof n=="number"?n:n[Y],q=typeof c=="number"?c:c[Y],w=typeof n=="number"?r:r[Y],g=Math.abs(q-b)/w+1,k=Math.floor(s/(h*X))%g;t[Y]=b+k*w,X*=g}f?f(x>1?t:t[0],this.evaluate(t,0,v,0)):this.evaluate(t,0,v,s)}return f?this:v}segment(n,c,r,f){let h=this.constructor.variables,x=new this.positions.constructor(h);for(let o=0;o<h;o++){let t=typeof n=="number"?n:n[o],v=typeof c=="number"?c:c[o],s=typeof r=="number"?r:r[o];x[o]=(v-t)/(s-1)}return this.step(n,c,x)}map(n,c){let r=this.constructor.variables,f=this.dimension,h=f*n.length,x=new this.positions.constructor(r),o;c?o=new this.values.constructor(f):o=new this.values.constructor(h).fill(0);for(let t=0,v=0;t<n.length;t+=r){for(let s=0;s<r;s++)x[s]=n[t+s];c?c(r>1?x:x[0],this.evaluate(x,0,o,0)):this.evaluate(x,0,o,t)}return c?this:o}};var En=class extends vc{static degree=1;static variables=1;static coefficients(n,c,r=1,f,h=0){f||(f=new c.constructor(r*2));let x=n[0],t=n[1]-x;for(let v=0,s=0;v<r;v++){let X=c[v],b=(c[v+r]-X)/t,q=X-x*b;f[h+s++]=q,f[h+s++]=b}return f}static evaluate(n,c,r=1,f,h,x=0){let o=!h;h||(h=new c.constructor(r));let t=n[0],s=n[1]-t,X=0;for(let Y=0;Y<r;Y++){let b=c[X++],w=(c[X++]-b)/s,g=b-t*w,k=typeof f=="number"?f:f[0];h[x+Y]=w*k+g}return r===1?h[x]:h}constructor(n,c,r=1){super(n,c,r)}};globalThis.Linear=En;var An=class extends vc{static degree=1;static variables=2;static coefficients(n,c,r=1,f,h=0){f||(f=c.constructor(r*4));let x=n[0],o=n[1],t=n[2],v=n[3],s=1/((t-x)*(v-o)),X=r;for(let Y=0,b=0;Y<r;Y++){let q=Y,w=c[q],g=c[q+=r],k=c[q+=r],e=c[q+=r];f[h+b++]=(t*v*w-t*o*k-x*v*g+x*o*e)*s,f[h+b++]=(-v*w+o*k+v*g-o*e)*s,f[h+b++]=(-t*w+t*k+x*g-x*e)*s,f[h+b++]=(w-k-g+e)*s}return f}static evaluate(n,c,r=1,f,h,x=0){h||(h=new c.constructor(r));let o=f[0],t=f[1],v=n[0],s=n[1],X=n[2],Y=n[3],b=(o-X)/(v-X),q=(o-v)/(X-v),w=(t-Y)/(s-Y),g=(t-s)/(Y-s),k=r;for(let e=0,d=0;e<r;e++){let y=e,j=c[y],A=c[y+=k],l=c[y+=k],m=c[y+=k],D=j*b+A*q,I=l*b+m*q;h[x+e]=D*w+I*g}return r===1?h[x]:h}constructor(n,c,r=1){super(n,c,r)}};globalThis.Bilinear=An;var Fn=class extends vc{static degree=1;static variables=3;static evaluate(n,c,r=1,f,h,x=0){h||(h=c.constructor(r));let o=f[0],t=f[1],v=f[2],s=n[0],X=n[1],Y=n[2],b=n[3],q=n[4],w=n[5],g=(o-b)/(s-b),k=(o-s)/(b-s),e=(t-q)/(X-q),d=(t-X)/(q-X),y=(v-w)/(Y-w),j=(v-Y)/(w-Y),A=0;for(let l=0,m=0;l<r;l++){let D=l,I=c[D],G=c[D+=r],F=c[D+=r],M=c[D+=r],R=c[D+=r],N=c[D+=r],W=c[D+=r],L=c[D+=r],z=I*g+G*k,S=F*g+M*k,Z=R*g+N*k,U=W*g+L*k,V=z*e+S*d,P=Z*e+U*d;h[x+m++]=V*y+P*j}return r===1?h[0]:h}static coefficients(n,c,r=1,f,h,x=0){h||(h=new c.constructor(r*8));let o=n[0],t=n[1],v=n[2],s=n[3],X=n[4],Y=n[5],b=1/((s-o)*(X-t)*(Y-v));for(let q=0,w=0;q<r;q++){let g=q,k=c[g],e=c[g+=r],d=c[g+=r],y=c[g+=r],j=c[g+=r],A=c[g+=r],l=c[g+=r],m=c[g+=r],D=(-k*s*X*Y+j*s*X*v+d*s*t*Y-l*s*t*v+e*o*X*Y-A*o*X*v-y*o*t*Y+m*o*t*v)*b,I=(k*X*Y-j*X*v-d*t*Y+l*t*v-e*X*Y+A*X*v+y*t*Y-m*t*v)*b,G=(k*s*Y-j*s*v-d*s*Y+l*s*v-e*o*Y+A*o*v+y*o*Y-m*o*v)*b,F=(-k*Y+j*v+d*Y-l*v+e*Y-A*v-y*Y+m*v)*b,M=(k*s*X-j*s*X-d*s*t+l*s*t-e*o*X+A*o*X+y*o*t-m*o*t)*b,R=(-k*X+j*X+d*t-l*t+e*X-A*X-y*t+m*t)*b,N=(-k*s+j*s+d*s-l*s+e*o-A*o-y*o+m*o)*b,W=(k-j-d+l-e+A+y-m)*b;h[x+w++]=D,h[x+w++]=I,h[x+w++]=G,h[x+w++]=F,h[x+w++]=M,h[x+w++]=R,h[x+w++]=N,h[x+w++]=W}return h}constructor(n,c,r=1){super(n,c,r)}evaluate(n,c=0,r,f=0){r||(r=new this.values.constructor(this.dimension));let h=n[c+0],x=n[c+1],o=n[c+2];for(let t=0;t<this.dimension;t++){let v=this.coefficients[8*t+0],s=this.coefficients[8*t+1],X=this.coefficients[8*t+2],Y=this.coefficients[8*t+3],b=this.coefficients[8*t+4],q=this.coefficients[8*t+5],w=this.coefficients[8*t+6],g=this.coefficients[8*t+7];r[f+t]=-(v+s*h+X*x+Y*h*x+(b+q*h+w*x+g*h*x)*o)}return r}};globalThis.Trilinear=Fn;var Mn=class extends vc{static degree=2;static variables=1;static coefficients(n,c,r=1,f,h=0){f||(f=new c.constructor(3*r));let x=n[0],o=n[1],t=n[2],v=1/((x-o)*(x-t)),s=1/((o-x)*(o-t)),X=1/((t-x)*(t-o)),Y=r;for(let b=0,q=0;b<Y;b++){let w=b,g=c[w]*v,k=c[w+=Y]*s,e=c[w+=Y]*X,d=g*o*t+k*x*t+e*x*o,y=-(g*(o+t)+k*(x+t)+e*(x+o)),j=g+k+e;f[h+q++]=d,f[h+q++]=y,f[h+q++]=j}return f}static evaluate(n,c,r=1,f,h,x=0){h=h||new c.constructor(r);let o=typeof f=="number"?f:f[0],t=n[0],v=n[1],s=n[2],X=o-t,Y=o-v,b=o-s,q=1/(t-v),w=1/(t-s),g=1/(v-s),k=Y*b*q*w,e=-X*b*q*g,d=X*Y*q*w;for(let y=0;y<r;y++){let j=y,A=c[j],l=c[j+=r],m=c[j+=r];h[x+y]=k*A+e*l+d*m}return r===1?h[x]:h}constructor(n,c,r=1){super(n,c,r)}};globalThis.Quadratic=Mn;var mn=class extends vc{static degree=2;static variables=2;static evaluate(n,c,r=1,f,h,x=0){h||(h=new c.constructor(r));let o=f[0],t=f[1],v=n[0],s=n[1],X=n[2],Y=n[3],b=n[4],q=n[5],w=v-X,g=v-b,k=X-b,e=o-v,d=o-X,y=o-b,j=t-s,A=t-Y,l=t-q,m=s-Y,D=s-q,I=Y-q,G=d*y/(w*g),F=-(e*y)/(w*k),M=e*d/(g*k),R=A*l/(m*D),N=-(j*l)/(m*I),W=j*A/(D*I);for(let L=0;L<r;L++){let z=L,S=c[z],Z=c[z+=r],U=c[z+=r],V=c[z+=r],P=c[z+=r],B=c[z+=r],C=c[z+=r],i=c[z+=r],O=c[z+=r],nc=G*S+F*Z+M*U,H=G*V+F*P+M*B,p=G*C+F*i+M*O;h[x+L]=R*nc+N*H+W*p}return r===1?h[x]:h}static coefficients(n,c,r=1,f,h=0){f||(f=new c.constructor(r*9));let x=n[0],o=n[1],t=n[2],v=n[3],s=n[4],X=n[5],Y=x*t,b=x*s,q=t*s,w=o*v,g=o*X,k=v*X,e=1/((x-t)*(x-s)),d=1/((t-x)*(t-s)),y=1/((s-x)*(s-t)),j=1/((o-v)*(o-X)),A=1/((v-o)*(v-X)),l=1/((X-o)*(X-v)),m=e*j,D=d*j,I=y*j,G=e*A,F=d*A,M=y*A,R=e*l,N=d*l,W=y*l,L=r,z=c;for(let S=0,Z=0;S<L;S++){let U=S,V=z[U]*m,P=z[U+=L]*G,B=z[U+=L]*R,C=z[U+=L]*D,i=z[U+=L]*F,O=z[U+=L]*N,nc=z[U+=L]*I,H=z[U+=L]*M,p=z[U+=L]*W,$=k*(V*q+C*b+nc*Y)+g*(P*q+i*b+H*Y)+w*(B*q+O*b+p*Y),lc=-(v+X)*(V*q-C*b-nc*Y)-(o+X)*(P*q-i*b-H*Y)-(o+v)*(B*q-O*b-p*Y),Tc=-(t+s)*(V*k-P*g-B*w)-(x+s)*(C*k-i*g-O*w)-(x+t)*(nc*k-H*g-p*w),_c=V*k-C*k-nc*k+P*g-i*g-H*g+B*w-O*w-p*w,tc=V*q-P*q-B*q+C*b-i*b-O*b+nc*Y-H*Y-p*Y,u=(v+X)*(V*(t+s)+C*(x+s)+nc*(x+t))+(o+X)*(P*(t+s)+i*(x+s)+H*(x+t))+(o+v)*(B*(t+s)+O*(x+s)+p*(x+t)),cc=-(v+X)*(V+C+nc)-(o+X)*(P+i+H)-(o+v)*(B+O+p),Xc=-(t+s)*(V+P+B)-(x+s)*(C+i+O)-(x+t)*(nc+H+p),Ec=V+C+nc+P+i+H+B+O+p;f[h+Z++]=$,f[h+Z++]=lc,f[h+Z++]=_c,f[h+Z++]=Tc,f[h+Z++]=u,f[h+Z++]=cc,f[h+Z++]=tc,f[h+Z++]=Xc,f[h+Z++]=Ec}return f}constructor(n,c,r=1){super(n,c,r)}};globalThis.Biquadratic=mn;var Nn=class extends vc{static degree=2;static variables=3;static coefficients(n,c,r=1,f,h=0){f||(f=new c.constructor(r*27));let x=n[0],o=n[1],t=n[2],v=n[3],s=n[4],X=n[5],Y=n[6],b=n[7],q=n[8],w=1/((x-v)*(x-Y)),g=1/((v-x)*(v-Y)),k=1/((Y-x)*(Y-v)),e=1/((o-s)*(o-b)),d=1/((s-o)*(s-b)),y=1/((b-o)*(b-s)),j=1/((t-X)*(t-q)),A=1/((X-t)*(X-q)),l=1/((q-t)*(q-X)),m=w*e*j,D=g*e*j,I=k*e*j,G=w*d*j,F=g*d*j,M=k*d*j,R=w*y*j,N=g*y*j,W=k*y*j,L=w*e*A,z=g*e*A,S=k*e*A,Z=w*d*A,U=g*d*A,V=k*d*A,P=w*y*A,B=g*y*A,C=k*y*A,i=w*e*l,O=g*e*l,nc=k*e*l,H=w*d*l,p=g*d*l,$=k*d*l,lc=w*y*l,Tc=g*y*l,_c=k*y*l,tc=new Float32Array(9),u=new Float32Array(9),cc=new Float32Array(9);tc[0]=v*Y,tc[1]=x*Y,tc[2]=x*v,tc[3]=-(v+Y),tc[4]=-(x+Y),tc[5]=-(x+v),tc[6]=1,tc[7]=1,tc[8]=1,u[0]=s*b,u[1]=o*b,u[2]=o*s,u[3]=-(s+b),u[4]=-(o+b),u[5]=-(o+s),u[6]=1,u[7]=1,u[8]=1,cc[0]=X*q,cc[1]=t*q,cc[2]=t*X,cc[3]=-(X+q),cc[4]=-(t+q),cc[5]=-(t+X),cc[6]=1,cc[7]=1,cc[8]=1;for(let Xc=0,Ec=c,Q=r,Ac=0;Xc<Q;Xc++){let J=Xc,wc=c[J]*m,gc=c[J+=Q]*D,qc=c[J+=Q]*I,zc=c[J+=Q]*G,kc=c[J+=Q]*F,Zc=c[J+=Q]*M,jc=c[J+=Q]*R,Dc=c[J+=Q]*N,Pc=c[J+=Q]*W,Sc=c[J+=Q]*L,Uc=c[J+=Q]*z,Vc=c[J+=Q]*S,Wc=c[J+=Q]*Z,$c=c[J+=Q]*U,ac=c[J+=Q]*V,Fc=c[J+=Q]*P,Mc=c[J+=Q]*B,mc=c[J+=Q]*C,Nc=c[J+=Q]*i,K=c[J+=Q]*O,oc=c[J+=Q]*nc,Bc=c[J+=Q]*H,sc=c[J+=Q]*p,rc=c[J+=Q]*$,ic=c[J+=Q]*lc,Oc=c[J+=Q]*Tc,pc=c[J+=Q]*_c;for(let Lc=0,Cc=0;Lc<3;Lc++){let uc=cc[Cc++],cn=cc[Cc++],nn=cc[Cc++];for(let Qc=0,Gc=0;Qc<3;Qc++){let Hc=u[Gc++],Ic=u[Gc++],Jc=u[Gc++];for(let Rc=0,Kc=0;Rc<3;Rc++){let Yc=tc[Kc++],fc=tc[Kc++],bc=tc[Kc++];f[h+Ac++]=uc*(Hc*(Yc*wc+fc*gc+bc*qc)+Ic*(Yc*zc+fc*kc+bc*Zc)+Jc*(Yc*jc+fc*Dc+bc*Pc))+cn*(Hc*(Yc*Sc+fc*Uc+bc*Vc)+Ic*(Yc*Wc+fc*$c+bc*ac)+Jc*(Yc*Fc+fc*Mc+bc*mc))+nn*(Hc*(Yc*Nc+fc*K+bc*oc)+Ic*(Yc*Bc+fc*sc+bc*rc)+Jc*(Yc*ic+fc*Oc+bc*pc))}}}}return f}static evaluate(n,c,r=1,f,h,x=0){h=h||new c.constructor(r);let o=f[0],t=f[1],v=f[2],s=n[0],X=n[1],Y=n[2],b=n[3],q=n[4],w=n[5],g=n[6],k=n[7],e=n[8],d=(o-b)*(o-g)/((s-b)*(s-g)),y=(o-s)*(o-g)/((b-s)*(b-g)),j=(o-s)*(o-b)/((g-s)*(g-b)),A=(t-q)*(t-k)/((X-q)*(X-k)),l=(t-X)*(t-k)/((q-X)*(q-k)),m=(t-X)*(t-q)/((k-X)*(k-q)),D=(v-w)*(v-e)/((Y-w)*(Y-e)),I=(v-Y)*(v-e)/((w-Y)*(w-e)),G=(v-Y)*(v-w)/((e-Y)*(e-w)),F=c,M=r;for(let R=0;R<M;R++){let N=R,W=F[N]*d+F[N+=M]*y+F[N+=M]*j,L=F[N+=M]*d+F[N+=M]*y+F[N+=M]*j,z=F[N+=M]*d+F[N+=M]*y+F[N+=M]*j,S=F[N+=M]*d+F[N+=M]*y+F[N+=M]*j,Z=F[N+=M]*d+F[N+=M]*y+F[N+=M]*j,U=F[N+=M]*d+F[N+=M]*y+F[N+=M]*j,V=F[N+=M]*d+F[N+=M]*y+F[N+=M]*j,P=F[N+=M]*d+F[N+=M]*y+F[N+=M]*j,B=F[N+=M]*d+F[N+=M]*y+F[N+=M]*j,C=W*A+L*l+z*m,i=S*A+Z*l+U*m,O=V*A+P*l+B*m;h[x+R]=C*D+i*I+O*G}return r===1?h[x]:h}constructor(n,c,r=1){super(n,c,r)}};globalThis.Triquadratic=Nn;var Dn=class extends vc{static degree=3;static variables=1;static evaluate(n,c,r=1,f,h,x=0){h||(h=new c.constructor(r));let o=typeof f=="number"?f:f[0],t=n[0],v=n[1],s=n[2],X=n[3],Y=t-v,b=t-s,q=t-X,w=v-s,g=v-X,k=s-X,e=o-t,d=o-v,y=o-s,j=o-X,A=d*y*j/(Y*b*q),l=-e*y*j/(Y*w*g),m=e*d*j/(b*w*k),D=-e*d*y/(q*g*k),I=r;for(let G=0;G<I;G++){let F=G,M=c[F],R=c[F+=I],N=c[F+=I],W=c[F+=I];h[x+G]=M*A+R*l+N*m+W*D}return I===1?h[x]:h}static coefficients(n,c,r=1,f,h=0){f||(f=new c.constructor(4*r));let x=n[0],o=n[1],t=n[2],v=n[3],s=x*o,X=x*t,Y=x*v,b=o*t,q=o*v,w=t*v,g=s*t,k=s*v,e=X*v,d=b*v,y=1/(x**3-(s+X+Y)*x+(g+k+e)-d),j=1/(o**3-(s+b+q)*o+(g+k+d)-e),A=1/(t**3-(X+b+w)*t+(g+e+d)-k),l=1/(v**3-(Y+q+w)*v+(k+e+d)-g),m=r;for(let D=0,I=0;D<r;D++){let G=D,F=c[G]*y,M=c[G+=m]*j,R=c[G+=m]*A,N=c[G+=m]*l,W=-(F*d+M*e+R*k+N*g),L=F*(b+q+w)+M*(X+Y+w)+R*(s+Y+q)+N*(s+X+b),z=-(F*(o+t+v)+M*(x+t+v)+R*(x+o+v)+N*(x+o+t)),S=F+M+R+N;f[h+I++]=W,f[h+I++]=L,f[h+I++]=z,f[h+I++]=S}return f}constructor(n,c,r=1){super(n,c,r)}};globalThis.Cubic=Dn;function dc(a,n,c){return(a[0]*n[0]+a[1]*n[1]+a[2]*n[2]+a[3]*n[3])*c[0]+(a[0]*n[4]+a[1]*n[5]+a[2]*n[6]+a[3]*n[7])*c[1]+(a[0]*n[8]+a[1]*n[9]+a[2]*n[10]+a[3]*n[11])*c[2]+(a[0]*n[12]+a[1]*n[13]+a[2]*n[14]+a[3]*n[15])*c[3]}var Pn=class extends vc{static degree=3;static variables=2;static coefficients(n,c,r=1,f,h=0){f||(f=new c.constructor(r*16));let x=n[0],o=n[1],t=n[2],v=n[3],s=n[4],X=n[5],Y=n[6],b=n[7],q=x*t,w=x*s,g=x*Y,k=t*s,e=t*Y,d=s*Y,y=q*s,j=q*Y,A=w*Y,l=k*Y,m=k+e+d,D=w+g+d,I=q+g+e,G=q+w+k,F=t+s+Y,M=x+s+Y,R=x+t+Y,N=x+t+s,W=[-l,-A,-j,-y],L=[m,D,I,G],z=[-F,-M,-R,-N],S=[1,1,1,1],Z=x-t,U=x-s,V=x-Y,P=t-s,B=t-Y,C=s-Y,i=o*v,O=o*X,nc=o*b,H=v*X,p=v*b,$=X*b,lc=i*X,Tc=i*b,_c=O*b,tc=H*b,u=o-v,cc=o-X,Xc=o-b,Ec=v-X,Q=v-b,Ac=X-b,J=1/(Z*U*V),wc=-1/(Z*P*B),gc=1/(U*P*C),qc=-1/(V*B*C),zc=1/(u*cc*Xc),kc=-1/(u*Ec*Q),Zc=1/(cc*Ec*Ac),jc=-1/(Xc*Q*Ac),Dc=H+p+$,Pc=O+nc+$,Sc=i+nc+p,Uc=i+O+H,Vc=v+X+b,Wc=o+X+b,$c=o+v+b,ac=o+v+X,Fc=[-tc,-_c,-Tc,-lc],Mc=[Dc,Pc,Sc,Uc],mc=[-Vc,-Wc,-$c,-ac],Nc=S,K=new Float32Array(16),oc=r;for(let Bc=0,sc=0;Bc<oc;Bc++){let rc=Bc,ic=c[rc],Oc=c[rc+=oc],pc=c[rc+=oc],Lc=c[rc+=oc],Cc=c[rc+=oc],uc=c[rc+=oc],cn=c[rc+=oc],nn=c[rc+=oc],Qc=c[rc+=oc],Gc=c[rc+=oc],Hc=c[rc+=oc],Ic=c[rc+=oc],Jc=c[rc+=oc],Rc=c[rc+=oc],Kc=c[rc+=oc],Yc=c[rc+=oc];K[0]=ic*J*zc,K[1]=Oc*wc*zc,K[2]=pc*gc*zc,K[3]=Lc*qc*zc,K[4]=Cc*J*kc,K[5]=uc*wc*kc,K[6]=cn*gc*kc,K[7]=nn*qc*kc,K[8]=Qc*J*Zc,K[9]=Gc*wc*Zc,K[10]=Hc*gc*Zc,K[11]=Ic*qc*Zc,K[12]=Jc*J*jc,K[13]=Rc*wc*jc,K[14]=Kc*gc*jc,K[15]=Yc*qc*jc,f[h+sc++]=dc(W,K,Fc),f[h+sc++]=dc(L,K,Fc),f[h+sc++]=dc(z,K,Fc),f[h+sc++]=dc(S,K,Fc),f[h+sc++]=dc(W,K,Mc),f[h+sc++]=dc(L,K,Mc),f[h+sc++]=dc(z,K,Mc),f[h+sc++]=dc(S,K,Mc),f[h+sc++]=dc(W,K,mc),f[h+sc++]=dc(L,K,mc),f[h+sc++]=dc(z,K,mc),f[h+sc++]=dc(S,K,mc),f[h+sc++]=dc(W,K,Nc),f[h+sc++]=dc(L,K,Nc),f[h+sc++]=dc(z,K,Nc),f[h+sc++]=dc(S,K,Nc)}return f}static evaluate(n,c,r=1,f,h,x=0){h||(h=new c.constructor(r));let o=f[0],t=f[1],v=n[0],s=n[1],X=n[2],Y=n[3],b=n[4],q=n[5],w=n[6],g=n[7],k=o-v,e=o-X,d=o-b,y=o-w,j=v-X,A=v-b,l=v-w,m=X-b,D=X-w,I=b-w,G=t-s,F=t-Y,M=t-q,R=t-g,N=s-Y,W=s-q,L=s-g,z=Y-q,S=Y-g,Z=q-g,U=e*d*y/(j*A*l),V=-k*d*y/(j*m*D),P=k*e*y/(A*m*I),B=-k*e*d/(l*D*I),C=F*M*R/(N*W*L),i=-G*M*R/(N*z*S),O=G*F*R/(W*z*Z),nc=-G*F*M/(L*S*Z),H=r;for(let p=0;p<H;p++){let $=p,lc=c[$],Tc=c[$+=H],_c=c[$+=H],tc=c[$+=H],u=c[$+=H],cc=c[$+=H],Xc=c[$+=H],Ec=c[$+=H],Q=c[$+=H],Ac=c[$+=H],J=c[$+=H],wc=c[$+=H],gc=c[$+=H],qc=c[$+=H],zc=c[$+=H],kc=c[$+=H],Zc=lc*U+Tc*V+_c*P+tc*B,jc=u*U+cc*V+Xc*P+Ec*B,Dc=Q*U+Ac*V+J*P+wc*B,Pc=gc*U+qc*V+zc*P+kc*B;h[x+p]=Zc*C+jc*i+Dc*O+Pc*nc}return H===1?h[x]:h}constructor(n,c,r=1){super(n,c,r)}};globalThis.Bicubic=Pn;var Bn=class extends vc{static degree=3;static variables=3;static coefficients(n,c,r=1,f,h=0){f||(f=new c.constructor(64));let x=n[0],o=n[1],t=n[2],v=n[3],s=n[4],X=n[5],Y=n[6],b=n[7],q=n[8],w=n[9],g=n[10],k=n[11],e=new n.constructor(4),d=new n.constructor(4),y=new n.constructor(4);e[0]=1/((x-v)*(x-Y)*(x-w)),e[1]=1/((v-x)*(v-Y)*(v-w)),e[2]=1/((Y-x)*(Y-v)*(Y-w)),e[3]=1/((w-x)*(w-v)*(w-Y)),d[0]=1/((o-s)*(o-b)*(o-g)),d[1]=1/((s-o)*(s-b)*(s-g)),d[2]=1/((b-o)*(b-s)*(b-g)),d[3]=1/((g-o)*(g-s)*(g-b)),y[0]=1/((t-X)*(t-q)*(t-k)),y[1]=1/((X-t)*(X-q)*(X-k)),y[2]=1/((q-t)*(q-X)*(q-k)),y[3]=1/((k-t)*(k-X)*(k-q));let j=x*v,A=x*Y,l=x*w,m=v*Y,D=v*w,I=Y*w,G=o*s,F=o*b,M=o*g,R=s*b,N=s*g,W=b*g,L=t*X,z=t*q,S=t*k,Z=X*q,U=X*k,V=q*k,P=new Float32Array(16),B=new Float32Array(16),C=new Float32Array(16);P[0]=-m*w,P[1]=-A*w,P[2]=-j*w,P[3]=-j*Y,P[4]=m+D+I,P[5]=A+l+I,P[6]=j+l+D,P[7]=j+A+m,P[8]=-(v+Y+w),P[9]=-(x+Y+w),P[10]=-(x+v+w),P[11]=-(x+v+Y),P[12]=1,P[13]=1,P[14]=1,P[15]=1,B[0]=-R*g,B[1]=-F*g,B[2]=-G*g,B[3]=-G*b,B[4]=R+N+W,B[5]=F+M+W,B[6]=G+M+N,B[7]=G+F+R,B[8]=-(s+b+g),B[9]=-(o+b+g),B[10]=-(o+s+g),B[11]=-(o+s+b),B[12]=1,B[13]=1,B[14]=1,B[15]=1,C[0]=-Z*k,C[1]=-z*k,C[2]=-L*k,C[3]=-L*q,C[4]=Z+U+V,C[5]=z+S+V,C[6]=L+S+U,C[7]=L+z+Z,C[8]=-(X+q+k),C[9]=-(t+q+k),C[10]=-(t+X+k),C[11]=-(t+X+q),C[12]=1,C[13]=1,C[14]=1,C[15]=1;let i=e[0]*d[0]*y[0],O=e[1]*d[0]*y[0],nc=e[2]*d[0]*y[0],H=e[3]*d[0]*y[0],p=e[0]*d[1]*y[0],$=e[1]*d[1]*y[0],lc=e[2]*d[1]*y[0],Tc=e[3]*d[1]*y[0],_c=e[0]*d[2]*y[0],tc=e[1]*d[2]*y[0],u=e[2]*d[2]*y[0],cc=e[3]*d[2]*y[0],Xc=e[0]*d[3]*y[0],Ec=e[1]*d[3]*y[0],Q=e[2]*d[3]*y[0],Ac=e[3]*d[3]*y[0],J=e[0]*d[0]*y[1],wc=e[1]*d[0]*y[1],gc=e[2]*d[0]*y[1],qc=e[3]*d[0]*y[1],zc=e[0]*d[1]*y[1],kc=e[1]*d[1]*y[1],Zc=e[2]*d[1]*y[1],jc=e[3]*d[1]*y[1],Dc=e[0]*d[2]*y[1],Pc=e[1]*d[2]*y[1],Sc=e[2]*d[2]*y[1],Uc=e[3]*d[2]*y[1],Vc=e[0]*d[3]*y[1],Wc=e[1]*d[3]*y[1],$c=e[2]*d[3]*y[1],ac=e[3]*d[3]*y[1],Fc=e[0]*d[0]*y[2],Mc=e[1]*d[0]*y[2],mc=e[2]*d[0]*y[2],Nc=e[3]*d[0]*y[2],K=e[0]*d[1]*y[2],oc=e[1]*d[1]*y[2],Bc=e[2]*d[1]*y[2],sc=e[3]*d[1]*y[2],rc=e[0]*d[2]*y[2],ic=e[1]*d[2]*y[2],Oc=e[2]*d[2]*y[2],pc=e[3]*d[2]*y[2],Lc=e[0]*d[3]*y[2],Cc=e[1]*d[3]*y[2],uc=e[2]*d[3]*y[2],cn=e[3]*d[3]*y[2],nn=e[0]*d[0]*y[3],Qc=e[1]*d[0]*y[3],Gc=e[2]*d[0]*y[3],Hc=e[3]*d[0]*y[3],Ic=e[0]*d[1]*y[3],Jc=e[1]*d[1]*y[3],Rc=e[2]*d[1]*y[3],Kc=e[3]*d[1]*y[3],Yc=e[0]*d[2]*y[3],fc=e[1]*d[2]*y[3],bc=e[2]*d[2]*y[3],yn=e[3]*d[2]*y[3],dn=e[0]*d[3]*y[3],Yn=e[1]*d[3]*y[3],Xn=e[2]*d[3]*y[3],fn=e[3]*d[3]*y[3];for(let tn=0,T=r,_=c;tn<T;tn++){let E=tn,bn=_[E]*i,wn=_[E+=T]*O,gn=_[E+=T]*nc,qn=_[E+=T]*H,zn=_[E+=T]*p,kn=_[E+=T]*$,Zn=_[E+=T]*lc,jn=_[E+=T]*Tc,ln=_[E+=T]*_c,Tn=_[E+=T]*tc,_n=_[E+=T]*u,In=_[E+=T]*cc,Jn=_[E+=T]*Xc,Kn=_[E+=T]*Ec,Ln=_[E+=T]*Q,Qn=_[E+=T]*Ac,Rn=_[E+=T]*J,Sn=_[E+=T]*wc,Un=_[E+=T]*gc,Vn=_[E+=T]*qc,Wn=_[E+=T]*zc,$n=_[E+=T]*kc,an=_[E+=T]*Zc,On=_[E+=T]*jc,pn=_[E+=T]*Dc,un=_[E+=T]*Pc,ct=_[E+=T]*Sc,nt=_[E+=T]*Uc,tt=_[E+=T]*Vc,ot=_[E+=T]*Wc,st=_[E+=T]*$c,rt=_[E+=T]*ac,vt=_[E+=T]*Fc,et=_[E+=T]*Mc,xt=_[E+=T]*mc,ht=_[E+=T]*Nc,yt=_[E+=T]*K,dt=_[E+=T]*oc,Yt=_[E+=T]*Bc,Xt=_[E+=T]*sc,ft=_[E+=T]*rc,bt=_[E+=T]*ic,wt=_[E+=T]*Oc,gt=_[E+=T]*pc,qt=_[E+=T]*Lc,zt=_[E+=T]*Cc,kt=_[E+=T]*uc,Zt=_[E+=T]*cn,jt=_[E+=T]*nn,lt=_[E+=T]*Qc,Tt=_[E+=T]*Gc,_t=_[E+=T]*Hc,Et=_[E+=T]*Ic,At=_[E+=T]*Jc,Ft=_[E+=T]*Rc,Mt=_[E+=T]*Kc,mt=_[E+=T]*Yc,Nt=_[E+=T]*fc,Dt=_[E+=T]*bc,Pt=_[E+=T]*yn,Bt=_[E+=T]*dn,Ct=_[E+=T]*Yn,Gt=_[E+=T]*Xn,Ht=_[E+=T]*fn;for(let Cn=0,on=0,It=0;Cn<4;Cn++){let Jt=C[on++],Kt=C[on++],Lt=C[on++],Qt=C[on++];for(let Gn=0,sn=0;Gn<4;Gn++){let rn=B[sn++],vn=B[sn++],en=B[sn++],xn=B[sn++];for(let Hn=0,hn=0;Hn<4;Hn++){let ec=P[hn++],xc=P[hn++],hc=P[hn++],yc=P[hn++];f[h+64*tn+It++]=Jt*(rn*(ec*bn+xc*wn+hc*gn+yc*qn)+vn*(ec*zn+xc*kn+hc*Zn+yc*jn)+en*(ec*ln+xc*Tn+hc*_n+yc*In)+xn*(ec*Jn+xc*Kn+hc*Ln+yc*Qn))+Kt*(rn*(ec*Rn+xc*Sn+hc*Un+yc*Vn)+vn*(ec*Wn+xc*$n+hc*an+yc*On)+en*(ec*pn+xc*un+hc*ct+yc*nt)+xn*(ec*tt+xc*ot+hc*st+yc*rt))+Lt*(rn*(ec*vt+xc*et+hc*xt+yc*ht)+vn*(ec*yt+xc*dt+hc*Yt+yc*Xt)+en*(ec*ft+xc*bt+hc*wt+yc*gt)+xn*(ec*qt+xc*zt+hc*kt+yc*Zt))+Qt*(rn*(ec*jt+xc*lt+hc*Tt+yc*_t)+vn*(ec*Et+xc*At+hc*Ft+yc*Mt)+en*(ec*mt+xc*Nt+hc*Dt+yc*Pt)+xn*(ec*Bt+xc*Ct+hc*Gt+yc*Ht))}}}}return f}static evaluate(n,c,r=1,f,h,x=0){h=h||new c.constructor(r);let o=f[0],t=f[1],v=f[2],s=n[0],X=n[1],Y=n[2],b=n[3],q=n[4],w=n[5],g=n[6],k=n[7],e=n[8],d=n[9],y=n[10],j=n[11],A=(o-b)*(o-g)*(o-d)/((s-b)*(s-g)*(s-d)),l=(o-s)*(o-g)*(o-d)/((b-s)*(b-g)*(b-d)),m=(o-s)*(o-b)*(o-d)/((g-s)*(g-b)*(g-d)),D=(o-s)*(o-b)*(o-g)/((d-s)*(d-b)*(d-g)),I=(t-q)*(t-k)*(t-y)/((X-q)*(X-k)*(X-y)),G=(t-X)*(t-k)*(t-y)/((q-X)*(q-k)*(q-y)),F=(t-X)*(t-q)*(t-y)/((k-X)*(k-q)*(k-y)),M=(t-X)*(t-q)*(t-k)/((y-X)*(y-q)*(y-k)),R=(v-w)*(v-e)*(v-j)/((Y-w)*(Y-e)*(Y-j)),N=(v-Y)*(v-e)*(v-j)/((w-Y)*(w-e)*(w-j)),W=(v-Y)*(v-w)*(v-j)/((e-Y)*(e-w)*(e-j)),L=(v-Y)*(v-w)*(v-e)/((j-Y)*(j-w)*(j-e)),z=r;for(let S=0;S<z;S++){let Z=S,U=c[Z],V=c[Z+=z],P=c[Z+=z],B=c[Z+=z],C=c[Z+=z],i=c[Z+=z],O=c[Z+=z],nc=c[Z+=z],H=c[Z+=z],p=c[Z+=z],$=c[Z+=z],lc=c[Z+=z],Tc=c[Z+=z],_c=c[Z+=z],tc=c[Z+=z],u=c[Z+=z],cc=c[Z+=z],Xc=c[Z+=z],Ec=c[Z+=z],Q=c[Z+=z],Ac=c[Z+=z],J=c[Z+=z],wc=c[Z+=z],gc=c[Z+=z],qc=c[Z+=z],zc=c[Z+=z],kc=c[Z+=z],Zc=c[Z+=z],jc=c[Z+=z],Dc=c[Z+=z],Pc=c[Z+=z],Sc=c[Z+=z],Uc=c[Z+=z],Vc=c[Z+=z],Wc=c[Z+=z],$c=c[Z+=z],ac=c[Z+=z],Fc=c[Z+=z],Mc=c[Z+=z],mc=c[Z+=z],Nc=c[Z+=z],K=c[Z+=z],oc=c[Z+=z],Bc=c[Z+=z],sc=c[Z+=z],rc=c[Z+=z],ic=c[Z+=z],Oc=c[Z+=z],pc=c[Z+=z],Lc=c[Z+=z],Cc=c[Z+=z],uc=c[Z+=z],cn=c[Z+=z],nn=c[Z+=z],Qc=c[Z+=z],Gc=c[Z+=z],Hc=c[Z+=z],Ic=c[Z+=z],Jc=c[Z+=z],Rc=c[Z+=z],Kc=c[Z+=z],Yc=c[Z+=z],fc=c[Z+=z],bc=c[Z+=z],yn=U*A+V*l+P*m+B*D,dn=C*A+i*l+O*m+nc*D,Yn=H*A+p*l+$*m+lc*D,Xn=Tc*A+_c*l+tc*m+u*D,fn=cc*A+Xc*l+Ec*m+Q*D,tn=Ac*A+J*l+wc*m+gc*D,T=qc*A+zc*l+kc*m+Zc*D,_=jc*A+Dc*l+Pc*m+Sc*D,E=Uc*A+Vc*l+Wc*m+$c*D,bn=ac*A+Fc*l+Mc*m+mc*D,wn=Nc*A+K*l+oc*m+Bc*D,gn=sc*A+rc*l+ic*m+Oc*D,qn=pc*A+Lc*l+Cc*m+uc*D,zn=cn*A+nn*l+Qc*m+Gc*D,kn=Hc*A+Ic*l+Jc*m+Rc*D,Zn=Kc*A+Yc*l+fc*m+bc*D,jn=yn*I+dn*G+Yn*F+Xn*M,ln=fn*I+tn*G+T*F+_*M,Tn=E*I+bn*G+wn*F+gn*M,_n=qn*I+zn*G+kn*F+Zn*M;h[x+S]=jn*R+ln*N+Tn*W+_n*L}return r===1?h[x]:h}constructor(n,c,r){super(n,c,r)}};globalThis.Tricubic=Bn;})();
