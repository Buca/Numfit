(()=>{var oc=class{static degree;static variables;constructor(t,c,Y=1){this.positions=t,this.values=c,this.dimension=Y;let l=this.constructor.degree,h=this.constructor.variables,e=(l+1)**h,o=this.values.constructor;this.coefficients=new o(Y*e).fill(0),this.update()}update(){return this.coefficients=this.constructor.coefficients(this.positions,this.values,this.dimension,this.coefficients),this}translate(t){let c=this.constructor.variables,Y=this.positions,l=Y.length;for(let h=0;h<l;h+=c)if(c===1&&typeof scale=="number"&&typeof orgin=="number")Y[h]+=t;else for(let e=0;e<c;e++)Y[h+e]+=t[e];return this}scale(t,c){let Y=this.constructor.variables,l=this.positions,h=l.length;for(let e=0;e<h;e+=Y)if(Y===1&&typeof t=="number"&&typeof c=="number"){let o=l[e];l[e]=(o-c)*t+c}else for(let o=0;o<Y;o++){let n=l[e+o],s=t[o],r=c[o];l[e+o]=(n-r)*s+r}return this}evaluate(t,c=0,Y,l=0){let h=this.dimension,e=this.constructor.degree,o=this.constructor.variables,n=e+1,s=!Y;Y||(Y=new this.values.constructor(h));let r=(e+1)**o;for(let i=0;i<h;i++){Y[l+i]=0;for(let X=0;X<r;X++){let w=this.coefficients[i*r+X],g=1;for(let b=0;b<o;b++){let a=Math.floor(X/n**b%n);typeof t=="number"?g*=t**a:g*=t[c+b]**a}Y[l+i]+=w*g}}return h===1&&s?Y[l]:Y}step(t,c,Y,l){let h=this.dimension,e=this.constructor.variables,o=0;for(let r=0;r<e;r++)o+=Math.floor(Math.abs(c[r]-t[r])/Y[r]);o*=h;let n=new this.positions.constructor(e),s;l?s=new this.values.constructor(h).fill(0):s=new this.values.constructor(o).fill(0);for(let r=0;r<o;r+=h){for(let i=0;i<e;i++){let X=Math.floor(r/e);n[i]=t[i]+X*Y[i]}l?l(n,this.evaluate(n,0,s,0)):this.evaluate(n,0,s,r)}return l?this:s}segment(t,c,Y,l){let h=this.dimension,e=this.constructor.variables,o=0;for(let r=0;r<e;r++)o+=Y[r];o*=h;let n=new this.positions.constructor(h),s;l?s=this.values.constructor(h).fill(0):s=this.values.constructor(o).fill(0);for(let r=0;r<o;r+=h){for(let i=0;i<h;i++){let X=(c[i]-t[i])/Y[i],w=Math.floor(r/h);n[i]=t[i]+w*X}l?l(n,this.evaluate(n,0,s,0)):this.evaluate(n,0,s,r)}return l?this:s}map(t,c){let Y=this.constructor.variables,l=this.dimension,h,e;c?(h=this.positions.constructor(Y),e=this.values.constructor(l)):e=this.values.constructor(length).fill(0);for(let o=0;o<t.length;o+=Y){for(let n=0;n<Y;n++)h[n]=t[o+n];c?c(h,this.evaluate(h,0,e,0)):this.evaluate(h,o,e,o*l)}return c?this:e}};var jt=class extends oc{static degree=1;static variables=1;static coefficients(t,c,Y=1,l,h=0){l||(l=new c.constructor(Y*2));let e=t[0],n=t[1]-e;for(let s=0,r=0;s<Y;s++){let i=c[s],w=(c[s+Y]-i)/n,g=i-e*w;l[h+r++]=g,l[h+r++]=w}return l}static evaluate(t,c,Y=1,l,h,e=0){let o=!h;h||(h=new c.constructor(Y));let n=t[0],r=t[1]-n,i=0;for(let X=0;X<Y;X++){let w=c[i++],b=(c[i++]-w)/r,a=w-n*b,z=l[X];h[X+e]=b*z+a}if(Y===1)h[e];else return h}constructor(t,c,Y=1){super(t,c,Y)}};globalThis.Linear=jt;var mt=class extends oc{static degree=1;static variables=2;static coefficients(t,c,Y=1,l,h=0){l||(l=c.constructor(Y*4));let e=t[0],o=t[1],n=t[2],s=t[3],r=1/((n-e)*(s-o)),i=Y;for(let X=0,w=0;X<Y;X++){let g=X,b=c[g],a=c[g+=Y],z=c[g+=Y],v=c[g+=Y];l[h+w++]=(n*s*b-n*o*z-e*s*a+e*o*v)*r,l[h+w++]=(-s*b+o*z+s*a-o*v)*r,l[h+w++]=(-n*b+n*z+e*a-e*v)*r,l[h+w++]=(b-z-a+v)*r}return l}static evaluate(t,c,Y=1,l,h,e=0){h||(h=new c.constructor(Y));let o=l[0],n=l[1],s=t[0],r=t[1],i=t[2],X=t[3],w=(o-i)/(s-i),g=(o-s)/(i-s),b=(n-X)/(r-X),a=(n-r)/(X-r),z=Y;for(let v=0,f=0;v<Y;v++){let d=v,k=c[d],A=c[d+=z],j=c[d+=z],M=c[d+=z],D=k*w+A*g,K=j*w+M*g;h[e+v]=D*b+K*a}if(Y===1)h[e];else return h}constructor(t,c,Y=1){super(t,c,Y)}};globalThis.Bilinear=mt;var Tt=class extends oc{static degree=1;static variables=3;static evaluate(t,c,Y=1,l,h,e=0){h||(h=c.constructor(Y));let o=l[0],n=l[1],s=l[2],r=t[0],i=t[1],X=t[2],w=t[3],g=t[4],b=t[5],a=(o-w)/(r-w),z=(o-r)/(w-r),v=(n-g)/(i-g),f=(n-i)/(g-i),d=(s-b)/(X-b),k=(s-X)/(b-X),A=0;for(let j=0,M=0;j<Y;j++){let D=j,K=c[D],I=c[D+=Y],F=c[D+=Y],N=c[D+=Y],Q=c[D+=Y],P=c[D+=Y],V=c[D+=Y],R=c[D+=Y],q=K*a+I*z,S=F*a+N*z,Z=Q*a+P*z,W=V*a+R*z,_=q*v+S*f,B=Z*v+W*f;h[e+M++]=_*d+B*k}return Y===1?h[0]:h}static coefficients(t,c,Y=1,l,h,e=0){h||(h=new c.constructor(Y*8));let o=t[0],n=t[1],s=t[2],r=t[3],i=t[4],X=t[5],w=1/((r-o)*(i-n)*(X-s));for(let g=0,b=0;g<Y;g++){let a=g,z=c[a],v=c[a+=Y],f=c[a+=Y],d=c[a+=Y],k=c[a+=Y],A=c[a+=Y],j=c[a+=Y],M=c[a+=Y],D=(-z*r*i*X+k*r*i*s+f*r*n*X-j*r*n*s+v*o*i*X-A*o*i*s-d*o*n*X+M*o*n*s)*w,K=(z*i*X-k*i*s-f*n*X+j*n*s-v*i*X+A*i*s+d*n*X-M*n*s)*w,I=(z*r*X-k*r*s-f*r*X+j*r*s-v*o*X+A*o*s+d*o*X-M*o*s)*w,F=(-z*X+k*s+f*X-j*s+v*X-A*s-d*X+M*s)*w,N=(z*r*i-k*r*i-f*r*n+j*r*n-v*o*i+A*o*i+d*o*n-M*o*n)*w,Q=(-z*i+k*i+f*n-j*n+v*i-A*i-d*n+M*n)*w,P=(-z*r+k*r+f*r-j*r+v*o-A*o-d*o+M*o)*w,V=(z-k-f+j-v+A+d-M)*w;h[e+b++]=D,h[e+b++]=K,h[e+b++]=I,h[e+b++]=F,h[e+b++]=N,h[e+b++]=Q,h[e+b++]=P,h[e+b++]=V}return h}constructor(t,c,Y=1){super(t,c,Y)}evaluate(t,c=0,Y,l=0){Y||(Y=new this.values.constructor(this.dimension));let h=t[c+0],e=t[c+1],o=t[c+2];for(let n=0;n<this.dimension;n++){let s=this.coefficients[8*n+0],r=this.coefficients[8*n+1],i=this.coefficients[8*n+2],X=this.coefficients[8*n+3],w=this.coefficients[8*n+4],g=this.coefficients[8*n+5],b=this.coefficients[8*n+6],a=this.coefficients[8*n+7];Y[l+n]=-(s+r*h+i*e+X*h*e+(w+g*h+b*e+a*h*e)*o)}return Y}};globalThis.Trilinear=Tt;var Et=class extends oc{static degree=2;static variables=1;static coefficients(t,c,Y=1,l,h=0){l||(l=new c.constructor(3*Y));let e=t[0],o=t[1],n=t[2],s=1/((e-o)*(e-n)),r=1/((o-e)*(o-n)),i=1/((n-e)*(n-o)),X=Y;for(let w=0,g=0;w<X;w++){let b=w,a=c[b]*s,z=c[b+=X]*r,v=c[b+=X]*i,f=a*o*n+z*e*n+v*e*o,d=-(a*(o+n)+z*(e+n)+v*(e+o)),k=a+z+v;l[h+g++]=f,l[h+g++]=d,l[h+g++]=k}return l}static evaluate(t,c,Y=1,l,h,e=0){h=h||new c.constructor(Y);let o=typeof l=="number"?l:l[0],n=t[0],s=t[1],r=t[2],i=o-n,X=o-s,w=o-r,g=1/(n-s),b=1/(n-r),a=1/(s-r),z=X*w*g*b,v=-i*w*g*a,f=i*X*g*b;for(let d=0;d<Y;d++){let k=d,A=c[k],j=c[k+=Y],M=c[k+=Y];h[e+d]=z*A-v*j+f*M}return Y===1?h[e]:h}constructor(t,c,Y=1){super(t,c,Y)}};globalThis.Quadratic=Et;var At=class extends oc{static degree=2;static variables=2;static evaluate(t,c,Y=1,l,h,e=0){let o=x0-x1,n=x0-x2,s=x1-x2,r=x-x0,i=x-x1,X=x-x2,w=i*X/(d01*d02),g=-(i*X)/(d01*d02),b=i*X/(d01*d02),a=w*w00-g*w10+b*w20,z=w*w01-g*w11+b*w21,v=w*w02-g*w12+b*w22,f=y-y0,d=y-y1,k=y-y2,A=y0-y1,j=y0-y2,M=y1-y2;return d*k/(A*j)*a-f*k/(A*M)*z+f*d/(A*j)*v}static coefficients(t,c,Y=1,l,h=0){l||(l=new c.constructor(Y*9));let e=t[0],o=t[1],n=t[2],s=t[3],r=t[4],i=t[5],X=e*n,w=e*r,g=n*r,b=o*s,a=o*i,z=s*i,v=1/((e-n)*(e-r)),f=1/((n-e)*(n-r)),d=1/((r-e)*(r-n)),k=1/((o-s)*(o-i)),A=1/((s-o)*(s-i)),j=1/((i-o)*(i-s)),M=v*k,D=f*k,K=d*k,I=v*A,F=f*A,N=d*A,Q=v*j,P=f*j,V=d*j,R=Y,q=c;for(let S=0,Z=0;S<R;S++){let W=S,_=q[W]*M,B=q[W+=R]*I,C=q[W+=R]*Q,G=q[W+=R]*D,$=q[W+=R]*F,u=q[W+=R]*P,ec=q[W+=R]*K,sc=q[W+=R]*N,vc=q[W+=R]*V,gc=z*(_*g+G*w+ec*X)+a*(B*g+$*w+sc*X)+b*(C*g+u*w+vc*X),Ac=-(s+i)*(_*g-G*w-ec*X)-(o+i)*(B*g-$*w-sc*X)-(o+s)*(C*g-u*w-vc*X),Hc=-(n+r)*(_*z-B*a-C*b)-(e+r)*(G*z-$*a-u*b)-(e+n)*(ec*z-sc*a-vc*b),Fc=_*z-G*z-ec*z+B*a-$*a-sc*a+C*b-u*b-vc*b,rc=_*g-B*g-C*g+G*w-$*w-u*w+ec*X-sc*X-vc*X,cc=(s+i)*(_*(n+r)+G*(e+r)+ec*(e+n))+(o+i)*(B*(n+r)+$*(e+r)+sc*(e+n))+(o+s)*(C*(n+r)+u*(e+r)+vc*(e+n)),tc=-(s+i)*(_+G+ec)-(o+i)*(B+$+sc)-(o+s)*(C+u+vc),lc=-(n+r)*(_+B+C)-(e+r)*(G+$+u)-(e+n)*(ec+sc+vc),Mc=_+G+ec+B+$+sc+C+u+vc;l[h+Z++]=gc,l[h+Z++]=Ac,l[h+Z++]=Fc,l[h+Z++]=Hc,l[h+Z++]=cc,l[h+Z++]=tc,l[h+Z++]=rc,l[h+Z++]=lc,l[h+Z++]=Mc}return l}constructor(t,c,Y=1){super(t,c,Y)}};globalThis.Biquadratic=At;var Ft=class extends oc{static degree=2;static variables=3;static coefficients(t,c,Y=1,l,h=0){l||(l=new c.constructor(Y*27));let e=t[0],o=t[1],n=t[2],s=t[3],r=t[4],i=t[5],X=t[6],w=t[7],g=t[8],b=1/((e-s)*(e-X)),a=1/((s-e)*(s-X)),z=1/((X-e)*(X-s)),v=1/((o-r)*(o-w)),f=1/((r-o)*(r-w)),d=1/((w-o)*(w-r)),k=1/((n-i)*(n-g)),A=1/((i-n)*(i-g)),j=1/((g-n)*(g-i)),M=b*v*k,D=a*v*k,K=z*v*k,I=b*f*k,F=a*f*k,N=z*f*k,Q=b*d*k,P=a*d*k,V=z*d*k,R=b*v*A,q=a*v*A,S=z*v*A,Z=b*f*A,W=a*f*A,_=z*f*A,B=b*d*A,C=a*d*A,G=z*d*A,$=b*v*j,u=a*v*j,ec=z*v*j,sc=b*f*j,vc=a*f*j,gc=z*f*j,Ac=b*d*j,Hc=a*d*j,Fc=z*d*j,rc=new Float32Array(9),cc=new Float32Array(9),tc=new Float32Array(9);rc[0]=s*X,rc[1]=e*X,rc[2]=e*s,rc[3]=-(s+X),rc[4]=-(e+X),rc[5]=-(e+s),rc[6]=1,rc[7]=1,rc[8]=1,cc[0]=r*w,cc[1]=o*w,cc[2]=o*r,cc[3]=-(r+w),cc[4]=-(o+w),cc[5]=-(o+r),cc[6]=1,cc[7]=1,cc[8]=1,tc[0]=i*g,tc[1]=n*g,tc[2]=n*i,tc[3]=-(i+g),tc[4]=-(n+g),tc[5]=-(n+i),tc[6]=1,tc[7]=1,tc[8]=1;for(let lc=0,Mc=c,L=Y,Ic=0;lc<L;lc++){let J=lc,ac=c[J]*M,zc=c[J+=L]*D,wc=c[J+=L]*K,qc=c[J+=L]*I,Zc=c[J+=L]*F,kc=c[J+=L]*N,Nc=c[J+=L]*Q,Rc=c[J+=L]*P,Sc=c[J+=L]*V,Uc=c[J+=L]*R,Vc=c[J+=L]*q,Wc=c[J+=L]*S,_c=c[J+=L]*Z,$c=c[J+=L]*W,Oc=c[J+=L]*_,jc=c[J+=L]*B,mc=c[J+=L]*C,Tc=c[J+=L]*G,bc=c[J+=L]*$,H=c[J+=L]*u,O=c[J+=L]*ec,Dc=c[J+=L]*sc,nc=c[J+=L]*vc,p=c[J+=L]*gc,pc=c[J+=L]*Ac,uc=c[J+=L]*Hc,ct=c[J+=L]*Fc;for(let Jc=0,Pc=0;Jc<3;Jc++){let tt=tc[Pc++],nt=tc[Pc++],ot=tc[Pc++];for(let Kc=0,Bc=0;Kc<3;Kc++){let Ec=cc[Bc++],Cc=cc[Bc++],Gc=cc[Bc++];for(let Lc=0,Qc=0;Lc<3;Lc++){let fc=rc[Qc++],Yc=rc[Qc++],Xc=rc[Qc++];l[h+Ic++]=tt*(Ec*(fc*ac+Yc*zc+Xc*wc)+Cc*(fc*qc+Yc*Zc+Xc*kc)+Gc*(fc*Nc+Yc*Rc+Xc*Sc))+nt*(Ec*(fc*Uc+Yc*Vc+Xc*Wc)+Cc*(fc*_c+Yc*$c+Xc*Oc)+Gc*(fc*jc+Yc*mc+Xc*Tc))+ot*(Ec*(fc*bc+Yc*H+Xc*O)+Cc*(fc*Dc+Yc*nc+Xc*p)+Gc*(fc*pc+Yc*uc+Xc*ct))}}}}return l}static evaluate(t,c,Y=1,l,h,e=0){h=h||new c.constructor(Y);let o=l[0],n=l[1],s=l[2],r=t[0],i=t[1],X=t[2],w=t[3],g=t[4],b=t[5],a=t[6],z=t[7],v=t[8],f=(o-w)*(o-a)/((r-w)*(r-a)),d=(o-r)*(o-a)/((w-r)*(w-a)),k=(o-r)*(o-w)/((a-r)*(a-w)),A=(n-g)*(n-z)/((i-g)*(i-z)),j=(n-i)*(n-z)/((g-i)*(g-z)),M=(n-i)*(n-g)/((z-i)*(z-g)),D=(s-b)*(s-v)/((X-b)*(X-v)),K=(s-X)*(s-v)/((b-X)*(b-v)),I=(s-X)*(s-b)/((v-X)*(v-b)),F=c,N=Y;for(let Q=0;Q<N;Q++){let P=Q,V=F[P]*f+F[P+=N]*d+F[P+=N]*k,R=F[P+=N]*f+F[P+=N]*d+F[P+=N]*k,q=F[P+=N]*f+F[P+=N]*d+F[P+=N]*k,S=F[P+=N]*f+F[P+=N]*d+F[P+=N]*k,Z=F[P+=N]*f+F[P+=N]*d+F[P+=N]*k,W=F[P+=N]*f+F[P+=N]*d+F[P+=N]*k,_=F[P+=N]*f+F[P+=N]*d+F[P+=N]*k,B=F[P+=N]*f+F[P+=N]*d+F[P+=N]*k,C=F[P+=N]*f+F[P+=N]*d+F[P+=N]*k,G=V*A+R*j+q*M,$=S*A+Z*j+W*M,u=_*A+B*j+C*M;h[e+Q]=G*D+$*K+u*I}return Y===1?h[e]:h}constructor(t,c,Y=1){super(t,c,Y)}};globalThis.Triquadratic=Ft;var Mt=class extends oc{static degree=3;static variables=1;static evaluate(t,c,Y=1,l,h,e=0){h||(h=new c.constructor(Y));let o=l[0],n=t[0],s=t[1],r=t[2],i=t[3],X=n-s,w=n-r,g=n-i,b=s-r,a=s-i,z=r-i,v=o-n,f=o-s,d=o-r,k=o-i,A=f*d*k/(X*w*g),j=v*d*k/(X*b*a),M=v*f*k/(w*b*z),D=v*f*d/(g*a*z),K=Y;for(let I=0;I<K;I++){let F=I,N=c[F],Q=c[F+=K],P=c[F+=K],V=c[F+=K];h[e+I]=N*A-Q*j+P*M-V*D}return K===1?h[e]:h}static coefficients(t,c,Y=1,l,h=0){l||(l=new c.constructor(4*Y));let e=t[0],o=t[1],n=t[2],s=t[3],r=e*o,i=e*n,X=e*s,w=o*n,g=o*s,b=n*s,a=r*n,z=r*s,v=i*s,f=w*s,d=1/(e**3-(r+i+X)*e+(a+z+v)-f),k=1/(o**3-(r+w+g)*o+(a+z+f)-v),A=1/(n**3-(i+w+b)*n+(a+v+f)-z),j=1/(s**3-(X+g+b)*s+(z+v+f)-a),M=Y;for(let D=0,K=0;D<Y;D++){let I=D,F=c[I]*d,N=c[I+=M]*k,Q=c[I+=M]*A,P=c[I+=M]*j,V=-(F*f+N*v+Q*z+P*a),R=F*(w+g+b)+N*(i+X+b)+Q*(r+X+g)+P*(r+i+w),q=-(F*(o+n+s)+N*(e+n+s)+Q*(e+o+s)+P*(e+o+n)),S=F+N+Q+P;l[h+K++]=V,l[h+K++]=R,l[h+K++]=q,l[h+K++]=S}return l}constructor(t,c,Y=1){super(t,c,Y)}};globalThis.Cubic=Mt;function dc(U,t,c){return(U[0]*t[0]+U[1]*t[1]+U[2]*t[2]+U[3]*t[3])*c[0]+(U[0]*t[4]+U[1]*t[5]+U[2]*t[6]+U[3]*t[7])*c[1]+(U[0]*t[8]+U[1]*t[9]+U[2]*t[10]+U[3]*t[11])*c[2]+(U[0]*t[12]+U[1]*t[13]+U[2]*t[14]+U[3]*t[15])*c[3]}var Nt=class extends oc{static degree=3;static variables=2;static coefficients(t,c,Y=1,l,h=0){l||(l=new c.constructor(Y*16));let e=t[0],o=t[1],n=t[2],s=t[3],r=t[4],i=t[5],X=t[6],w=t[7],g=e*n,b=e*r,a=e*X,z=n*r,v=n*X,f=r*X,d=g*r,k=g*X,A=b*X,j=z*X,M=z+v+f,D=b+a+f,K=g+a+v,I=g+b+z,F=n+r+X,N=e+r+X,Q=e+n+X,P=e+n+r,V=[-j,-A,-k,-d],R=[M,D,K,I],q=[-F,-N,-Q,-P],S=[1,1,1,1],Z=e-n,W=e-r,_=e-X,B=n-r,C=n-X,G=r-X,$=o*s,u=o*i,ec=o*w,sc=s*i,vc=s*w,gc=i*w,Ac=$*i,Hc=$*w,Fc=u*w,rc=sc*w,cc=o-s,tc=o-i,lc=o-w,Mc=s-i,L=s-w,Ic=i-w,J=1/(Z*W*_),ac=-1/(Z*B*C),zc=1/(W*B*G),wc=-1/(_*C*G),qc=1/(cc*tc*lc),Zc=-1/(cc*Mc*L),kc=1/(tc*Mc*Ic),Nc=-1/(lc*L*Ic),Rc=sc+vc+gc,Sc=u+ec+gc,Uc=$+ec+vc,Vc=$+u+sc,Wc=s+i+w,_c=o+i+w,$c=o+s+w,Oc=o+s+i,jc=[-rc,-Fc,-Hc,-Ac],mc=[Rc,Sc,Uc,Vc],Tc=[-Wc,-_c,-$c,-Oc],bc=S,H=new Float32Array(16),O=Y;for(let Dc=0,nc=0;Dc<O;Dc++){let p=Dc,pc=c[p],uc=c[p+=O],ct=c[p+=O],Jc=c[p+=O],Pc=c[p+=O],tt=c[p+=O],nt=c[p+=O],ot=c[p+=O],Kc=c[p+=O],Bc=c[p+=O],Ec=c[p+=O],Cc=c[p+=O],Gc=c[p+=O],Lc=c[p+=O],Qc=c[p+=O],fc=c[p+=O];H[0]=pc*J*qc,H[1]=uc*ac*qc,H[2]=ct*zc*qc,H[3]=Jc*wc*qc,H[4]=Pc*J*Zc,H[5]=tt*ac*Zc,H[6]=nt*zc*Zc,H[7]=ot*wc*Zc,H[8]=Kc*J*kc,H[9]=Bc*ac*kc,H[10]=Ec*zc*kc,H[11]=Cc*wc*kc,H[12]=Gc*J*Nc,H[13]=Lc*ac*Nc,H[14]=Qc*zc*Nc,H[15]=fc*wc*Nc,l[h+nc++]=dc(V,H,jc),l[h+nc++]=dc(R,H,jc),l[h+nc++]=dc(q,H,jc),l[h+nc++]=dc(S,H,jc),l[h+nc++]=dc(V,H,mc),l[h+nc++]=dc(R,H,mc),l[h+nc++]=dc(q,H,mc),l[h+nc++]=dc(S,H,mc),l[h+nc++]=dc(V,H,Tc),l[h+nc++]=dc(R,H,Tc),l[h+nc++]=dc(q,H,Tc),l[h+nc++]=dc(S,H,Tc),l[h+nc++]=dc(V,H,bc),l[h+nc++]=dc(R,H,bc),l[h+nc++]=dc(q,H,bc),l[h+nc++]=dc(S,H,bc)}return l}static evaluate(t,c,Y=1,l,h,e=0){h||(h=new c.constructor(Y));let o=x-x0,n=x-x1,s=x-x2,r=x-x3,i=x0-x1,X=x0-x1,w=x0-x2,g=x1-x2,b=x1-x3,a=x2-x3,z=y-y0,v=y-y1,f=y-y2,d=y-y3,k=y0-y1,A=y0-y1,j=y0-y2,M=y1-y2,D=y1-y3,K=y2-y3,I=n*s*r/(i*X*w),F=-o*s*r/(i*g*b),N=o*n*r/(X*g*a),Q=-o*n*s/(w*b*a),P=v*f*d/(k*A*j),V=-z*f*d/(k*M*D),R=z*v*d/(A*M*K),q=-z*v*f/(j*D*K),S=v00*I+v10*F+v20*N+v30*Q,Z=v01*I+v11*F+v21*N+v31*Q,W=v02*I+v12*F+v22*N+v32*Q,_=v03*I+v13*F+v23*N+v33*Q;return S*P+Z*V+W*R+_*q}constructor(t,c,Y=1){super(t,c,Y)}evaluate(t,c=0,Y,l=0){let h=this.dimension;Y||(Y=new this.values.constructor(h));let e=t[0],o=t[1];for(let n=0,s=0;n<h;n++){let r=this.coefficients[s++],i=this.coefficients[s++],X=this.coefficients[s++],w=this.coefficients[s++],g=this.coefficients[s++],b=this.coefficients[s++],a=this.coefficients[s++],z=this.coefficients[s++],v=this.coefficients[s++],f=this.coefficients[s++],d=this.coefficients[s++],k=this.coefficients[s++],A=this.coefficients[s++],j=this.coefficients[s++],M=this.coefficients[s++],D=this.coefficients[s++];Y[n]=r+i*e+X*e**2+w*e**3+(g+b*e+a*e**2+z*e**3)*o+(v+f*e+d*e**2+k*e**3)*o**2+(A+j*e+M*e**2+D*e**3)*o**3}return Y}};globalThis.Bicubic=Nt;var Dt=class extends oc{static degree=3;static variables=3;static coefficients(t,c,Y=1,l,h=0){l||(l=new c.constructor(64));let e=t[0],o=t[1],n=t[2],s=t[3],r=t[4],i=t[5],X=t[6],w=t[7],g=t[8],b=t[9],a=t[10],z=t[11],v=new t.constructor(4),f=new t.constructor(4),d=new t.constructor(4);v[0]=1/((e-s)*(e-X)*(e-b)),v[1]=1/((s-e)*(s-X)*(s-b)),v[2]=1/((X-e)*(X-s)*(X-b)),v[3]=1/((b-e)*(b-s)*(b-X)),f[0]=1/((o-r)*(o-w)*(o-a)),f[1]=1/((r-o)*(r-w)*(r-a)),f[2]=1/((w-o)*(w-r)*(w-a)),f[3]=1/((a-o)*(a-r)*(a-w)),d[0]=1/((n-i)*(n-g)*(n-z)),d[1]=1/((i-n)*(i-g)*(i-z)),d[2]=1/((g-n)*(g-i)*(g-z)),d[3]=1/((z-n)*(z-i)*(z-g));let k=e*s,A=e*X,j=e*b,M=s*X,D=s*b,K=X*b,I=o*r,F=o*w,N=o*a,Q=r*w,P=r*a,V=w*a,R=n*i,q=n*g,S=n*z,Z=i*g,W=i*z,_=g*z,B=new Float32Array(16),C=new Float32Array(16),G=new Float32Array(16);B[0]=-M*b,B[1]=-A*b,B[2]=-k*b,B[3]=-k*X,B[4]=M+D+K,B[5]=A+j+K,B[6]=k+j+D,B[7]=k+A+M,B[8]=-(s+X+b),B[9]=-(e+X+b),B[10]=-(e+s+b),B[11]=-(e+s+X),B[12]=1,B[13]=1,B[14]=1,B[15]=1,C[0]=-Q*a,C[1]=-F*a,C[2]=-I*a,C[3]=-I*w,C[4]=Q+P+V,C[5]=F+N+V,C[6]=I+N+P,C[7]=I+F+Q,C[8]=-(r+w+a),C[9]=-(o+w+a),C[10]=-(o+r+a),C[11]=-(o+r+w),C[12]=1,C[13]=1,C[14]=1,C[15]=1,G[0]=-Z*z,G[1]=-q*z,G[2]=-R*z,G[3]=-R*g,G[4]=Z+W+_,G[5]=q+S+_,G[6]=R+S+W,G[7]=R+q+Z,G[8]=-(i+g+z),G[9]=-(n+g+z),G[10]=-(n+i+z),G[11]=-(n+i+g),G[12]=1,G[13]=1,G[14]=1,G[15]=1;let $=v[0]*f[0]*d[0],u=v[1]*f[0]*d[0],ec=v[2]*f[0]*d[0],sc=v[3]*f[0]*d[0],vc=v[0]*f[1]*d[0],gc=v[1]*f[1]*d[0],Ac=v[2]*f[1]*d[0],Hc=v[3]*f[1]*d[0],Fc=v[0]*f[2]*d[0],rc=v[1]*f[2]*d[0],cc=v[2]*f[2]*d[0],tc=v[3]*f[2]*d[0],lc=v[0]*f[3]*d[0],Mc=v[1]*f[3]*d[0],L=v[2]*f[3]*d[0],Ic=v[3]*f[3]*d[0],J=v[0]*f[0]*d[1],ac=v[1]*f[0]*d[1],zc=v[2]*f[0]*d[1],wc=v[3]*f[0]*d[1],qc=v[0]*f[1]*d[1],Zc=v[1]*f[1]*d[1],kc=v[2]*f[1]*d[1],Nc=v[3]*f[1]*d[1],Rc=v[0]*f[2]*d[1],Sc=v[1]*f[2]*d[1],Uc=v[2]*f[2]*d[1],Vc=v[3]*f[2]*d[1],Wc=v[0]*f[3]*d[1],_c=v[1]*f[3]*d[1],$c=v[2]*f[3]*d[1],Oc=v[3]*f[3]*d[1],jc=v[0]*f[0]*d[2],mc=v[1]*f[0]*d[2],Tc=v[2]*f[0]*d[2],bc=v[3]*f[0]*d[2],H=v[0]*f[1]*d[2],O=v[1]*f[1]*d[2],Dc=v[2]*f[1]*d[2],nc=v[3]*f[1]*d[2],p=v[0]*f[2]*d[2],pc=v[1]*f[2]*d[2],uc=v[2]*f[2]*d[2],ct=v[3]*f[2]*d[2],Jc=v[0]*f[3]*d[2],Pc=v[1]*f[3]*d[2],tt=v[2]*f[3]*d[2],nt=v[3]*f[3]*d[2],ot=v[0]*f[0]*d[3],Kc=v[1]*f[0]*d[3],Bc=v[2]*f[0]*d[3],Ec=v[3]*f[0]*d[3],Cc=v[0]*f[1]*d[3],Gc=v[1]*f[1]*d[3],Lc=v[2]*f[1]*d[3],Qc=v[3]*f[1]*d[3],fc=v[0]*f[2]*d[3],Yc=v[1]*f[2]*d[3],Xc=v[2]*f[2]*d[3],Yt=v[3]*f[2]*d[3],Xt=v[0]*f[3]*d[3],lt=v[1]*f[3]*d[3],wt=v[2]*f[3]*d[3],bt=v[3]*f[3]*d[3];for(let st=0,T=Y,E=c;st<T;st++){let m=st,rt=E[m]*$,et=E[m+=T]*u,gt=E[m+=T]*ec,Pt=E[m+=T]*sc,Bt=E[m+=T]*vc,Ct=E[m+=T]*gc,at=E[m+=T]*Ac,zt=E[m+=T]*Hc,qt=E[m+=T]*Fc,Zt=E[m+=T]*rc,kt=E[m+=T]*cc,Jt=E[m+=T]*tc,Kt=E[m+=T]*lc,Lt=E[m+=T]*Mc,Qt=E[m+=T]*L,Rt=E[m+=T]*Ic,St=E[m+=T]*J,Ut=E[m+=T]*ac,Vt=E[m+=T]*zc,Wt=E[m+=T]*wc,_t=E[m+=T]*qc,$t=E[m+=T]*Zc,Ot=E[m+=T]*kc,pt=E[m+=T]*Nc,ut=E[m+=T]*Rc,cn=E[m+=T]*Sc,tn=E[m+=T]*Uc,nn=E[m+=T]*Vc,on=E[m+=T]*Wc,sn=E[m+=T]*_c,rn=E[m+=T]*$c,en=E[m+=T]*Oc,vn=E[m+=T]*jc,xn=E[m+=T]*mc,hn=E[m+=T]*Tc,yn=E[m+=T]*bc,dn=E[m+=T]*H,fn=E[m+=T]*O,Yn=E[m+=T]*Dc,Xn=E[m+=T]*nc,ln=E[m+=T]*p,wn=E[m+=T]*pc,bn=E[m+=T]*uc,gn=E[m+=T]*ct,an=E[m+=T]*Jc,zn=E[m+=T]*Pc,qn=E[m+=T]*tt,Zn=E[m+=T]*nt,kn=E[m+=T]*ot,jn=E[m+=T]*Kc,mn=E[m+=T]*Bc,Tn=E[m+=T]*Ec,En=E[m+=T]*Cc,An=E[m+=T]*Gc,Fn=E[m+=T]*Lc,Mn=E[m+=T]*Qc,Nn=E[m+=T]*fc,Dn=E[m+=T]*Yc,Pn=E[m+=T]*Xc,Bn=E[m+=T]*Yt,Cn=E[m+=T]*Xt,Gn=E[m+=T]*lt,Hn=E[m+=T]*wt,In=E[m+=T]*bt;for(let Gt=0,vt=0,Jn=0;Gt<4;Gt++){let Kn=G[vt++],Ln=G[vt++],Qn=G[vt++],Rn=G[vt++];for(let Ht=0,xt=0;Ht<4;Ht++){let ht=C[xt++],it=C[xt++],yt=C[xt++],dt=C[xt++];for(let It=0,ft=0;It<4;It++){let xc=B[ft++],hc=B[ft++],ic=B[ft++],yc=B[ft++];l[h+64*st+Jn++]=Kn*(ht*(xc*rt+hc*et+ic*gt+yc*Pt)+it*(xc*Bt+hc*Ct+ic*at+yc*zt)+yt*(xc*qt+hc*Zt+ic*kt+yc*Jt)+dt*(xc*Kt+hc*Lt+ic*Qt+yc*Rt))+Ln*(ht*(xc*St+hc*Ut+ic*Vt+yc*Wt)+it*(xc*_t+hc*$t+ic*Ot+yc*pt)+yt*(xc*ut+hc*cn+ic*tn+yc*nn)+dt*(xc*on+hc*sn+ic*rn+yc*en))+Qn*(ht*(xc*vn+hc*xn+ic*hn+yc*yn)+it*(xc*dn+hc*fn+ic*Yn+yc*Xn)+yt*(xc*ln+hc*wn+ic*bn+yc*gn)+dt*(xc*an+hc*zn+ic*qn+yc*Zn))+Rn*(ht*(xc*kn+hc*jn+ic*mn+yc*Tn)+it*(xc*En+hc*An+ic*Fn+yc*Mn)+yt*(xc*Nn+hc*Dn+ic*Pn+yc*Bn)+dt*(xc*Cn+hc*Gn+ic*Hn+yc*In))}}}}return l}static evaluate(t,c,Y=1,l,h,e=0){h=h||new c.constructor(Y);let o=l[0],n=l[1],s=l[2],r=t[0],i=t[1],X=t[2],w=t[3],g=t[4],b=t[5],a=t[6],z=t[7],v=t[8],f=t[9],d=t[10],k=t[11],A=(o-w)*(o-a)*(o-f)/((r-w)*(r-a)*(r-f)),j=(o-r)*(o-a)*(o-f)/((w-r)*(w-a)*(w-f)),M=(o-r)*(o-w)*(o-f)/((a-r)*(a-w)*(a-f)),D=(o-r)*(o-w)*(o-a)/((f-r)*(f-w)*(f-a)),K=(n-g)*(n-z)*(n-d)/((i-g)*(i-z)*(i-d)),I=(n-i)*(n-z)*(n-d)/((g-i)*(g-z)*(g-d)),F=(n-i)*(n-g)*(n-d)/((z-i)*(z-g)*(z-d)),N=(n-i)*(n-g)*(n-z)/((d-i)*(d-g)*(d-z)),Q=(s-b)*(s-v)*(s-k)/((X-b)*(X-v)*(X-k)),P=(s-X)*(s-v)*(s-k)/((b-X)*(b-v)*(b-k)),V=(s-X)*(s-b)*(s-k)/((v-X)*(v-b)*(v-k)),R=(s-X)*(s-b)*(s-v)/((k-X)*(k-b)*(k-v)),q=Y;for(let S=0;S<q;S++){let Z=S,W=c[Z],_=c[Z+=q],B=c[Z+=q],C=c[Z+=q],G=c[Z+=q],$=c[Z+=q],u=c[Z+=q],ec=c[Z+=q],sc=c[Z+=q],vc=c[Z+=q],gc=c[Z+=q],Ac=c[Z+=q],Hc=c[Z+=q],Fc=c[Z+=q],rc=c[Z+=q],cc=c[Z+=q],tc=c[Z+=q],lc=c[Z+=q],Mc=c[Z+=q],L=c[Z+=q],Ic=c[Z+=q],J=c[Z+=q],ac=c[Z+=q],zc=c[Z+=q],wc=c[Z+=q],qc=c[Z+=q],Zc=c[Z+=q],kc=c[Z+=q],Nc=c[Z+=q],Rc=c[Z+=q],Sc=c[Z+=q],Uc=c[Z+=q],Vc=c[Z+=q],Wc=c[Z+=q],_c=c[Z+=q],$c=c[Z+=q],Oc=c[Z+=q],jc=c[Z+=q],mc=c[Z+=q],Tc=c[Z+=q],bc=c[Z+=q],H=c[Z+=q],O=c[Z+=q],Dc=c[Z+=q],nc=c[Z+=q],p=c[Z+=q],pc=c[Z+=q],uc=c[Z+=q],ct=c[Z+=q],Jc=c[Z+=q],Pc=c[Z+=q],tt=c[Z+=q],nt=c[Z+=q],ot=c[Z+=q],Kc=c[Z+=q],Bc=c[Z+=q],Ec=c[Z+=q],Cc=c[Z+=q],Gc=c[Z+=q],Lc=c[Z+=q],Qc=c[Z+=q],fc=c[Z+=q],Yc=c[Z+=q],Xc=c[Z+=q],Yt=W*A+_*j+B*M+C*D,Xt=G*A+$*j+u*M+ec*D,lt=sc*A+vc*j+gc*M+Ac*D,wt=sc*rx0+Fc*j+rc*M+cc*D,bt=tc*A+lc*j+Mc*M+L*D,st=Ic*A+J*j+ac*M+zc*D,T=wc*A+qc*j+Zc*M+kc*D,E=wc*rx0+Rc*j+Sc*M+Uc*D,m=Vc*A+Wc*j+_c*M+$c*D,rt=Oc*A+jc*j+mc*M+Tc*D,et=bc*A+H*j+O*M+Dc*D,gt=bc*rx0+p*j+pc*M+uc*D,Pt=ct*A+Jc*j+Pc*M+tt*D,Bt=nt*A+ot*j+Kc*M+Bc*D,Ct=Ec*A+Cc*j+Gc*M+Lc*D,at=Ec*rx0+fc*j+Yc*M+Xc*D,zt=Yt*K+Xt*I+lt*F+wt*N,qt=bt*K+st*I+T*F+E*N,Zt=m*K+rt*I+et*F+gt*N,kt=m*K+rt*I+et*F+at*N;h[e+S]=zt*Q+qt*P+Zt*V+kt*R}return Y===1?h[e]:h}constructor(t,c,Y){super(t,c,Y)}};globalThis.Tricubic=Dt;})();
