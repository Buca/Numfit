(()=>{var rc=class{static degree;static variables;constructor(t,c,v=1){this.positions=t,this.values=c,this.dimension=v;let Y=this.constructor.degree,d=this.constructor.variables,r=(Y+1)**d,o=this.values.constructor;this.coefficients=new o(v*r).fill(0),this.update()}update(){return this.coefficients=this.constructor.coefficients(this.positions,this.values,this.dimension,this.coefficients),this}translate(t){let c=this.constructor.variables,v=this.positions,Y=v.length;for(let d=0;d<Y;d+=c)if(c===1&&typeof scale=="number"&&typeof orgin=="number")v[d]+=t;else for(let r=0;r<c;r++)v[d+r]+=t[r];return this}scale(t,c){let v=this.constructor.variables,Y=this.positions,d=Y.length;for(let r=0;r<d;r+=v)if(v===1&&typeof t=="number"&&typeof c=="number"){let o=Y[r];Y[r]=(o-c)*t+c}else for(let o=0;o<v;o++){let n=Y[r+o],s=t[o],e=c[o];Y[r+o]=(n-e)*s+e}return this}evaluate(t,c=0,v,Y=0){let d=this.dimension,r=this.constructor.degree,o=this.constructor.variables,n=r+1,s=!v;v||(v=new this.values.constructor(d));let e=(r+1)**o;for(let h=0;h<d;h++){v[Y+h]=0;for(let l=0;l<e;l++){let a=this.coefficients[h*e+l],g=1;for(let w=0;w<o;w++){let b=Math.floor(l/n**w%n);typeof t=="number"?g*=t**b:g*=t[c+w]**b}v[Y+h]+=a*g}}return d===1&&s?v[0]:v}step(t,c,v,Y){let d=this.dimension,r=this.constructor.variables,o=0;for(let e=0;e<r;e++)o+=Math.floor(Math.abs(c[e]-t[e])/v[e]);o*=d;let n=new this.positions.constructor(r),s;Y?s=new this.values.constructor(d).fill(0):s=new this.values.constructor(o).fill(0);for(let e=0;e<o;e+=d){for(let h=0;h<r;h++){let l=Math.floor(e/r);n[h]=t[h]+l*v[h]}Y?Y(n,this.evaluate(n,0,s,0)):this.evaluate(n,0,s,e)}return Y?this:s}segment(t,c,v,Y){let d=this.dimension,r=this.constructor.variables,o=0;for(let e=0;e<r;e++)o+=v[e];o*=d;let n=new this.positions.constructor(d),s;Y?s=this.values.constructor(d).fill(0):s=this.values.constructor(o).fill(0);for(let e=0;e<o;e+=d){for(let h=0;h<d;h++){let l=(c[h]-t[h])/v[h],a=Math.floor(e/d);n[h]=t[h]+a*l}Y?Y(n,this.evaluate(n,0,s,0)):this.evaluate(n,0,s,e)}return Y?this:s}map(t,c){let v=this.constructor.variables,Y=this.dimension,d,r;c?(d=this.positions.constructor(v),r=this.values.constructor(Y)):r=this.values.constructor(length).fill(0);for(let o=0;o<t.length;o+=v){for(let n=0;n<v;n++)d[n]=t[o+n];c?c(d,this.evaluate(d,0,r,0)):this.evaluate(d,o,r,o*Y)}return c?this:r}};var At=class extends rc{static degree=1;static variables=1;static coefficients(t,c,v=1,Y,d=0){Y||(Y=new c.constructor(v*2));let r=t[0],n=t[1]-r;for(let s=0,e=0;s<v;s++){let h=c[s],a=(c[s+v]-h)/n,g=h-r*a;Y[d+e++]=g,Y[d+e++]=a}return Y}static evaluate(t,c,v=1,Y,d,r=0){d||(d=new c.constructor(v));let o=t[0],s=t[1]-o,e=0;for(let h=0;h<v;h++){let l=c[e++],g=(c[e++]-l)/s,w=l-o*g,b=Y[h];d[h+r]=g*b+w}return d}constructor(t,c,v=1){super(t,c,v)}};globalThis.Linear=At;var Ft=class extends rc{static degree=1;static variables=2;static coefficients(t,c,v=1,Y,d=0){Y||(Y=c.constructor(v*4));let r=t[0],o=t[1],n=t[2],s=t[3],e=1/((n-r)*(s-o)),h=0;for(let l=0;l<v;l++){let a=l,g=c[a],w=c[a+=v],b=c[a+=v],q=c[a+=v];Y[h++]=(n*s*g-n*o*b-r*s*w+r*o*q)*e,Y[h++]=(-s*g+o*b+s*w-o*q)*e,Y[h++]=(-n*g+n*b+r*w-r*q)*e,Y[h++]=(g-b-w+q)*e}return Y}static evaluate(t,c,v=1,Y,d,r=0){d||(d=new c.constructor(v));let o=Y[0],n=Y[1],s=t[0],e=t[1],h=t[2],l=t[3],a=(o-h)/(s-h),g=(o-s)/(h-s),w=(n-l)/(e-l),b=(n-e)/(l-e),q=0;for(let f=0;f<v;f++){let i=c[q++],X=c[q++],E=c[q++],z=c[q++],T=i*a+X*g,j=E*a+z*g;d[r+f]=T*w+j*b}return d}constructor(t=new Float32Array(4),c=new Float32Array(4),v=1){super(t,c,v)}};globalThis.Bilinear=Ft;var Tt=class extends rc{static degree=1;static variables=3;static evaluate(t,c,v=1,Y,d,r=0){d||(d=c.constructor(v));let o=Y[0],n=Y[1],s=Y[2],e=t[0],h=t[1],l=t[2],a=t[3],g=t[4],w=t[5],b=(o-a)/(e-a),q=(o-e)/(a-e),f=(n-g)/(h-g),i=(n-h)/(g-h),X=(s-w)/(l-w),E=(s-l)/(w-l),z=0;for(let T=0,j=0;T<v;T++){let M=T,H=c[M],D=c[M+=v],J=c[M+=v],K=c[M+=v],U=c[M+=v],$=c[M+=v],W=c[M+=v],I=c[M+=v],L=H*b+D*q,Z=J*b+K*q,_=U*b+$*q,Q=W*b+I*q,R=L*f+Z*i,m=_*f+Q*i;d[r+j++]=R*X+m*E}return d}static coefficients(t,c,v=1,Y,d,r=0){d||(d=new c.constructor(v*8));let o=t[0],n=t[1],s=t[2],e=t[3],h=t[4],l=t[5],a=1/((e-o)*(h-n)*(l-s));for(let g=0,w=0;g<v;g++){let b=g,q=c[b],f=c[b+=v],i=c[b+=v],X=c[b+=v],E=c[b+=v],z=c[b+=v],T=c[b+=v],j=c[b+=v],M=(-q*e*h*l+E*e*h*s+i*e*n*l-T*e*n*s+f*o*h*l-z*o*h*s-X*o*n*l+j*o*n*s)*a,H=(q*h*l-E*h*s-i*n*l+T*n*s-f*h*l+z*h*s+X*n*l-j*n*s)*a,D=(q*e*l-E*e*s-i*e*l+T*e*s-f*o*l+z*o*s+X*o*l-j*o*s)*a,J=(-q*l+E*s+i*l-T*s+f*l-z*s-X*l+j*s)*a,K=(q*e*h-E*e*h-i*e*n+T*e*n-f*o*h+z*o*h+X*o*n-j*o*n)*a,U=(-q*h+E*h+i*n-T*n+f*h-z*h-X*n+j*n)*a,$=(-q*e+E*e+i*e-T*e+f*o-z*o-X*o+j*o)*a,W=(q-E-i+T-f+z+X-j)*a;d[r+w++]=M,d[r+w++]=H,d[r+w++]=D,d[r+w++]=J,d[r+w++]=K,d[r+w++]=U,d[r+w++]=$,d[r+w++]=W}return d}constructor(t,c,v=1){super(t,c,v)}evaluate(t,c=0,v,Y=0){v||(v=new this.values.constructor(this.dimension));let d=t[c+0],r=t[c+1],o=t[c+2];for(let n=0;n<this.dimension;n++){let s=this.coefficients[8*n+0],e=this.coefficients[8*n+1],h=this.coefficients[8*n+2],l=this.coefficients[8*n+3],a=this.coefficients[8*n+4],g=this.coefficients[8*n+5],w=this.coefficients[8*n+6],b=this.coefficients[8*n+7];v[Y+n]=-(s+e*d+h*r+l*d*r+(a+g*d+w*r+b*d*r)*o)}return v}};globalThis.Trilinear=Tt;var jt=class extends rc{static degree=2;static variables=1;static coefficients(t,c,v=1,Y,d=0){Y||(Y=new c.constructor(3*v));let r=t[0],o=t[1],n=t[2],s=1/((r-o)*(r-n)),e=1/((o-r)*(o-n)),h=1/((n-r)*(n-o));for(let l=0,a=0,g=v;l<g;l++){let w=l,b=c[w]*s,q=c[w+=g]*e,f=c[w+=g]*h,i=b*o*n+q*r*n+f*r*o,X=-(b*(o+n)+q*(r+n)+f*(r+o)),E=b+q+f;Y[d+a++]=i,Y[d+a++]=X,Y[d+a++]=E}return Y}static evaluate(t,c,v,Y,d,r,o){let n=o-t,s=o-c,e=o-v,h=t-c,l=t-v,a=c-v;return s*e/(h*l)*Y-n*e/(h*a)*d+n*s/(h*l)*r}constructor(t,c,v=1){super(t,c,v)}};globalThis.Quadratic=jt;var Et=class extends rc{static degree=2;static variables=2;static evaluate(t,c,v,Y,d,r,o,n,s,e,h,l,a,g,w,b,q){let f=b-t,i=b-v,X=b-d,E=t-v,z=t-d,T=v-d,j=i*X/(d01*d02),M=-(i*X)/(d01*d02),H=i*X/(d01*d02),D=j*o-M*n+H*s,J=j*e-M*h+H*l,K=j*a-M*g+H*w,U=q-c,$=q-Y,W=q-r,I=c-Y,L=c-r,Z=Y-r;return $*W/(I*L)*D-U*W/(I*Z)*J+U*$/(I*L)*K}static coefficients(t,c,v=1,Y,d=0){Y||(Y=new c.constructor(v*9));let r=t[0],o=t[1],n=t[2],s=t[3],e=t[4],h=t[5],l=r*n,a=r*e,g=n*e,w=o*s,b=o*h,q=s*h,f=1/((r-n)*(r-e)),i=1/((n-r)*(n-e)),X=1/((e-r)*(e-n)),E=1/((o-s)*(o-h)),z=1/((s-o)*(s-h)),T=1/((h-o)*(h-s)),j=f*E,M=i*E,H=X*E,D=f*z,J=i*z,K=X*z,U=f*T,$=i*T,W=X*T,I=v,L=c;for(let Z=0,_=0;Z<I;Z++){let Q=Z,R=L[Q]*j,m=L[Q+=I]*D,N=L[Q+=I]*U,P=L[Q+=I]*M,S=L[Q+=I]*J,tc=L[Q+=I]*$,nc=L[Q+=I]*H,oc=L[Q+=I]*K,vc=L[Q+=I]*W,ac=q*(R*g+P*a+nc*l)+b*(m*g+S*a+oc*l)+w*(N*g+tc*a+vc*l),kc=-(s+h)*(R*g-P*a-nc*l)-(o+h)*(m*g-S*a-oc*l)-(o+s)*(N*g-tc*a-vc*l),wc=-(n+e)*(R*q-m*b-N*w)-(r+e)*(P*q-S*b-tc*w)-(r+n)*(nc*q-oc*b-vc*w),gc=R*q-P*q-nc*q+m*b-S*b-oc*b+N*w-tc*w-vc*w,u=R*g-m*g-N*g+P*a-S*a-tc*a+nc*l-oc*l-vc*l,O=(s+h)*(R*(n+e)+P*(r+e)+nc*(r+n))+(o+h)*(m*(n+e)+S*(r+e)+oc*(r+n))+(o+s)*(N*(n+e)+tc*(r+e)+vc*(r+n)),p=-(s+h)*(R+P+nc)-(o+h)*(m+S+oc)-(o+s)*(N+tc+vc),ec=-(n+e)*(R+m+N)-(r+e)*(P+S+tc)-(r+n)*(nc+oc+vc),qc=R+P+nc+m+S+oc+N+tc+vc;Y[d+_++]=ac,Y[d+_++]=kc,Y[d+_++]=gc,Y[d+_++]=wc,Y[d+_++]=O,Y[d+_++]=p,Y[d+_++]=u,Y[d+_++]=ec,Y[d+_++]=qc}return Y}constructor(t,c,v=1){super(t,c,v)}};globalThis.Biquadratic=Et;var zt=class extends rc{static degree=2;static variables=3;static coefficients(t,c,v=1,Y,d=0){Y||(Y=new c.constructor(v*27));let r=t[0],o=t[1],n=t[2],s=t[3],e=t[4],h=t[5],l=t[6],a=t[7],g=t[8],w=1/((r-s)*(r-l)),b=1/((s-r)*(s-l)),q=1/((l-r)*(l-s)),f=1/((o-e)*(o-a)),i=1/((e-o)*(e-a)),X=1/((a-o)*(a-e)),E=1/((n-h)*(n-g)),z=1/((h-n)*(h-g)),T=1/((g-n)*(g-h)),j=w*f*E,M=b*f*E,H=q*f*E,D=w*i*E,J=b*i*E,K=q*i*E,U=w*X*E,$=b*X*E,W=q*X*E,I=w*f*z,L=b*f*z,Z=q*f*z,_=w*i*z,Q=b*i*z,R=q*i*z,m=w*X*z,N=b*X*z,P=q*X*z,S=w*f*T,tc=b*f*T,nc=q*f*T,oc=w*i*T,vc=b*i*T,ac=q*i*T,kc=w*X*T,wc=b*X*T,gc=q*X*T,u=new Float32Array(9),O=new Float32Array(9),p=new Float32Array(9);u[0]=s*l,u[1]=r*l,u[2]=r*s,u[3]=-(s+l),u[4]=-(r+l),u[5]=-(r+s),u[6]=1,u[7]=1,u[8]=1,O[0]=e*a,O[1]=o*a,O[2]=o*e,O[3]=-(e+a),O[4]=-(o+a),O[5]=-(o+e),O[6]=1,O[7]=1,O[8]=1,p[0]=h*g,p[1]=n*g,p[2]=n*h,p[3]=-(h+g),p[4]=-(n+g),p[5]=-(n+h),p[6]=1,p[7]=1,p[8]=1;for(let ec=0,qc=c,G=v,Ac=0;ec<G;ec++){let B=ec,bc=c[B]*j,Yc=c[B+=G]*M,Fc=c[B+=G]*H,Tc=c[B+=G]*D,jc=c[B+=G]*J,mc=c[B+=G]*K,Ec=c[B+=G]*U,Lc=c[B+=G]*$,Qc=c[B+=G]*W,Rc=c[B+=G]*I,Sc=c[B+=G]*L,Uc=c[B+=G]*Z,Vc=c[B+=G]*_,Wc=c[B+=G]*Q,_c=c[B+=G]*R,zc=c[B+=G]*m,Mc=c[B+=G]*N,Zc=c[B+=G]*P,Nc=c[B+=G]*S,C=c[B+=G]*tc,Bc=c[B+=G]*nc,sc=c[B+=G]*oc,cc=c[B+=G]*vc,$c=c[B+=G]*ac,Oc=c[B+=G]*kc,pc=c[B+=G]*wc,uc=c[B+=G]*gc;for(let Jc=0,Cc=0;Jc<3;Jc++){let ct=p[Cc++],tt=p[Cc++],nt=p[Cc++];for(let Kc=0,Pc=0;Kc<3;Kc++){let Dc=O[Pc++],Gc=O[Pc++],Hc=O[Pc++];for(let ot=0,Ic=0;ot<3;ot++){let yc=u[Ic++],Xc=u[Ic++],lc=u[Ic++];Y[d+Ac++]=ct*(Dc*(yc*bc+Xc*Yc+lc*Fc)+Gc*(yc*Tc+Xc*jc+lc*mc)+Hc*(yc*Ec+Xc*Lc+lc*Qc))+tt*(Dc*(yc*Rc+Xc*Sc+lc*Uc)+Gc*(yc*Vc+Xc*Wc+lc*_c)+Hc*(yc*zc+Xc*Mc+lc*Zc))+nt*(Dc*(yc*Nc+Xc*C+lc*Bc)+Gc*(yc*sc+Xc*cc+lc*$c)+Hc*(yc*Oc+Xc*pc+lc*uc))}}}}return Y}static evaluate(t,c,v,Y,d,r,o,n,s,e,h,l,a,g,w,b,q,f,i,X,E,z,T,j,M,H,D,J,K,U,$,W,I,L,Z,_,Q,R,m){let N=(Q-Y)*(Q-o)/((t-Y)*(t-o)),P=(Q-t)*(Q-o)/((Y-t)*(Y-o)),S=(Q-t)*(Q-Y)/((o-t)*(o-Y)),tc=e*N+h*P+l*S,nc=a*N+g*P+w*S,oc=b*N+q*P+f*S,vc=i*N+X*P+E*S,ac=z*N+T*P+j*S,kc=M*N+H*P+D*S,wc=J*N+K*P+U*S,gc=$*N+W*P+I*S,u=L*N+Z*P+_*S,O=(R-d)*(R-n)/((c-d)*(c-n)),p=(R-c)*(R-n)/((d-c)*(d-n)),ec=(R-c)*(R-d)/((n-c)*(n-d)),qc=tc*O+nc*p+oc*ec,G=vc*O+ac*p+kc*ec,Ac=wc*O+gc*p+u*ec,B=(m-r)*(m-s)/((v-r)*(v-s)),bc=(m-v)*(m-s)/((r-v)*(r-s)),Yc=(m-v)*(m-r)/((s-v)*(s-r));return qc*B+G*bc+Ac*Yc}constructor(t,c,v=1){super(t,c,v)}};globalThis.Triquadratic=zt;var Mt=class extends rc{static degree=3;static variables=1;static evaluate(t,c,v=1,Y,d,r=0){d||(d=new c.constructor(v));let o=t[0],n=t[1],s=t[2],e=t[3],h=o-n,l=o-s,a=o-e,g=n-s,w=n-e,b=s-e,q=0;for(let f=0;f<v;f++){let i=Y[f],X=c[f],E=c[f+v],z=c[f+2*v],T=c[f+3*v],j=i-o,M=i-n,H=i-s,D=i-e,J=h*l*a,K=h*g*w,U=l*g*b,$=a*w*b;d[r+f]=X*(M*H*D)/J-E*(j*H*D)/K+z*(j*M*D)/U-T*(j*M*H)/$}return d}static coefficients(t,c,v=1,Y,d=0){Y||(Y=new c.constructor(4*v));let r=t[0],o=t[1],n=t[2],s=t[3],e=r*o,h=r*n,l=r*s,a=o*n,g=o*s,w=n*s,b=e*n,q=e*s,f=h*s,i=a*s,X=1/(r**3-(e+h+l)*r+(b+q+f)-i),E=1/(o**3-(e+a+g)*o+(b+q+i)-f),z=1/(n**3-(h+a+w)*n+(b+f+i)-q),T=1/(s**3-(l+g+w)*s+(q+f+i)-b);for(let j=0,M=0;j<v;j++){let H=c[j]*X,D=c[j+v]*E,J=c[j+2*v]*z,K=c[j+3*v]*T,U=-(H*i+D*f+J*q+K*b),$=H*(a+g+w)+D*(h+l+w)+J*(e+l+g)+K*(e+h+a),W=-(H*(o+n+s)+D*(r+n+s)+J*(r+o+s)+K*(r+o+n)),I=H+D+J+K;Y[d+M++]=U,Y[d+M++]=$,Y[d+M++]=W,Y[d+M++]=I}return Y}constructor(t,c,v=1){super(t,c,v)}};globalThis.Cubic=Mt;function dc(V,t,c){return(V[0]*t[0]+V[1]*t[1]+V[2]*t[2]+V[3]*t[3])*c[0]+(V[0]*t[4]+V[1]*t[5]+V[2]*t[6]+V[3]*t[7])*c[1]+(V[0]*t[8]+V[1]*t[9]+V[2]*t[10]+V[3]*t[11])*c[2]+(V[0]*t[12]+V[1]*t[13]+V[2]*t[14]+V[3]*t[15])*c[3]}var Nt=class extends rc{static degree=3;static variables=2;static coefficients(t,c,v=1,Y,d=0){Y||(Y=new c.constructor(v*16));let r=t[0],o=t[1],n=t[2],s=t[3],e=t[4],h=t[5],l=t[6],a=t[7],g=r*n,w=r*e,b=r*l,q=n*e,f=n*l,i=e*l,X=g*e,E=g*l,z=w*l,T=q*l,j=q+f+i,M=w+b+i,H=g+b+f,D=g+w+q,J=n+e+l,K=r+e+l,U=r+n+l,$=r+n+e,W=[-T,-z,-E,-X],I=[j,M,H,D],L=[-J,-K,-U,-$],Z=[1,1,1,1],_=r-n,Q=r-e,R=r-l,m=n-e,N=n-l,P=e-l,S=o*s,tc=o*h,nc=o*a,oc=s*h,vc=s*a,ac=h*a,kc=S*h,wc=S*a,gc=tc*a,u=oc*a,O=o-s,p=o-h,ec=o-a,qc=s-h,G=s-a,Ac=h-a,B=1/(_*Q*R),bc=-1/(_*m*N),Yc=1/(Q*m*P),Fc=-1/(R*N*P),Tc=1/(O*p*ec),jc=-1/(O*qc*G),mc=1/(p*qc*Ac),Ec=-1/(ec*G*Ac),Lc=oc+vc+ac,Qc=tc+nc+ac,Rc=S+nc+vc,Sc=S+tc+oc,Uc=s+h+a,Vc=o+h+a,Wc=o+s+a,_c=o+s+h,zc=[-u,-gc,-wc,-kc],Mc=[Lc,Qc,Rc,Sc],Zc=[-Uc,-Vc,-Wc,-_c],Nc=Z,C=new Float32Array(16);for(let Bc=0,sc=0;Bc<v;Bc++){let cc=Bc,$c=c[cc],Oc=c[cc+=v],pc=c[cc+=v],uc=c[cc+=v],Jc=c[cc+=v],Cc=c[cc+=v],ct=c[cc+=v],tt=c[cc+=v],nt=c[cc+=v],Kc=c[cc+=v],Pc=c[cc+=v],Dc=c[cc+=v],Gc=c[cc+=v],Hc=c[cc+=v],ot=c[cc+=v],Ic=c[cc+=v];C[0]=$c*B*Tc,C[1]=Oc*bc*Tc,C[2]=pc*Yc*Tc,C[3]=uc*Fc*Tc,C[4]=Jc*B*jc,C[5]=Cc*bc*jc,C[6]=ct*Yc*jc,C[7]=tt*Fc*jc,C[8]=nt*B*mc,C[9]=Kc*bc*mc,C[10]=Pc*Yc*mc,C[11]=Dc*Fc*mc,C[12]=Gc*B*Ec,C[13]=Hc*bc*Ec,C[14]=ot*Yc*Ec,C[15]=Ic*Fc*Ec,Y[d+sc++]=dc(W,C,zc),Y[d+sc++]=dc(I,C,zc),Y[d+sc++]=dc(L,C,zc),Y[d+sc++]=dc(Z,C,zc),Y[d+sc++]=dc(W,C,Mc),Y[d+sc++]=dc(I,C,Mc),Y[d+sc++]=dc(L,C,Mc),Y[d+sc++]=dc(Z,C,Mc),Y[d+sc++]=dc(W,C,Zc),Y[d+sc++]=dc(I,C,Zc),Y[d+sc++]=dc(L,C,Zc),Y[d+sc++]=dc(Z,C,Zc),Y[d+sc++]=dc(W,C,Nc),Y[d+sc++]=dc(I,C,Nc),Y[d+sc++]=dc(L,C,Nc),Y[d+sc++]=dc(Z,C,Nc)}return Y}static evaluate(t,c,v=1,Y,d,r=0){d||(d=new c.constructor(v));let o=x-x0,n=x-x1,s=x-x2,e=x-x3,h=x0-x1,l=x0-x1,a=x0-x2,g=x1-x2,w=x1-x3,b=x2-x3,q=y-y0,f=y-y1,i=y-y2,X=y-y3,E=y0-y1,z=y0-y1,T=y0-y2,j=y1-y2,M=y1-y3,H=y2-y3,D=n*s*e/(h*l*a),J=-o*s*e/(h*g*w),K=o*n*e/(l*g*b),U=-o*n*s/(a*w*b),$=f*i*X/(E*z*T),W=-q*i*X/(E*j*M),I=q*f*X/(z*j*H),L=-q*f*i/(T*M*H),Z=v00*D+v10*J+v20*K+v30*U,_=v01*D+v11*J+v21*K+v31*U,Q=v02*D+v12*J+v22*K+v32*U,R=v03*D+v13*J+v23*K+v33*U;return Z*$+_*W+Q*I+R*L}constructor(t,c,v=1){super(t,c,v)}evaluate(t,c=0,v,Y=0){let d=this.dimension;v||(v=new this.values.constructor(d));let r=t[0],o=t[1];for(let n=0,s=0;n<d;n++){let e=this.coefficients[s++],h=this.coefficients[s++],l=this.coefficients[s++],a=this.coefficients[s++],g=this.coefficients[s++],w=this.coefficients[s++],b=this.coefficients[s++],q=this.coefficients[s++],f=this.coefficients[s++],i=this.coefficients[s++],X=this.coefficients[s++],E=this.coefficients[s++],z=this.coefficients[s++],T=this.coefficients[s++],j=this.coefficients[s++],M=this.coefficients[s++];v[n]=e+h*r+l*r**2+a*r**3+(g+w*r+b*r**2+q*r**3)*o+(f+i*r+X*r**2+E*r**3)*o**2+(z+T*r+j*r**2+M*r**3)*o**3}return v}};globalThis.Bicubic=Nt;var Pt=class extends rc{static degree=3;static variables=3;static coefficients(t,c,v=1,Y,d=0){Y||(Y=new c.constructor(64));let r=t[0],o=t[1],n=t[2],s=t[3],e=t[4],h=t[5],l=t[6],a=t[7],g=t[8],w=t[9],b=t[10],q=t[11],f=new t.constructor(4),i=new t.constructor(4),X=new t.constructor(4);f[0]=1/((r-s)*(r-l)*(r-w)),f[1]=1/((s-r)*(s-l)*(s-w)),f[2]=1/((l-r)*(l-s)*(l-w)),f[3]=1/((w-r)*(w-s)*(w-l)),i[0]=1/((o-e)*(o-a)*(o-b)),i[1]=1/((e-o)*(e-a)*(e-b)),i[2]=1/((a-o)*(a-e)*(a-b)),i[3]=1/((b-o)*(b-e)*(b-a)),X[0]=1/((n-h)*(n-g)*(n-q)),X[1]=1/((h-n)*(h-g)*(h-q)),X[2]=1/((g-n)*(g-h)*(g-q)),X[3]=1/((q-n)*(q-h)*(q-g));let E=r*s,z=r*l,T=r*w,j=s*l,M=s*w,H=l*w,D=o*e,J=o*a,K=o*b,U=e*a,$=e*b,W=a*b,I=n*h,L=n*g,Z=n*q,_=h*g,Q=h*q,R=g*q,m=new Float32Array(16),N=new Float32Array(16),P=new Float32Array(16);m[0]=-j*w,m[1]=-z*w,m[2]=-E*w,m[3]=-E*l,m[4]=j+M+H,m[5]=z+T+H,m[6]=E+T+M,m[7]=E+z+j,m[8]=-(s+l+w),m[9]=-(r+l+w),m[10]=-(r+s+w),m[11]=-(r+s+l),m[12]=1,m[13]=1,m[14]=1,m[15]=1,N[0]=-U*b,N[1]=-J*b,N[2]=-D*b,N[3]=-D*a,N[4]=U+$+W,N[5]=J+K+W,N[6]=D+K+$,N[7]=D+J+U,N[8]=-(e+a+b),N[9]=-(o+a+b),N[10]=-(o+e+b),N[11]=-(o+e+a),N[12]=1,N[13]=1,N[14]=1,N[15]=1,P[0]=-_*q,P[1]=-L*q,P[2]=-I*q,P[3]=-I*g,P[4]=_+Q+R,P[5]=L+Z+R,P[6]=I+Z+Q,P[7]=I+L+_,P[8]=-(h+g+q),P[9]=-(n+g+q),P[10]=-(n+h+q),P[11]=-(n+h+g),P[12]=1,P[13]=1,P[14]=1,P[15]=1;let S=f[0]*i[0]*X[0],tc=f[1]*i[0]*X[0],nc=f[2]*i[0]*X[0],oc=f[3]*i[0]*X[0],vc=f[0]*i[1]*X[0],ac=f[1]*i[1]*X[0],kc=f[2]*i[1]*X[0],wc=f[3]*i[1]*X[0],gc=f[0]*i[2]*X[0],u=f[1]*i[2]*X[0],O=f[2]*i[2]*X[0],p=f[3]*i[2]*X[0],ec=f[0]*i[3]*X[0],qc=f[1]*i[3]*X[0],G=f[2]*i[3]*X[0],Ac=f[3]*i[3]*X[0],B=f[0]*i[0]*X[1],bc=f[1]*i[0]*X[1],Yc=f[2]*i[0]*X[1],Fc=f[3]*i[0]*X[1],Tc=f[0]*i[1]*X[1],jc=f[1]*i[1]*X[1],mc=f[2]*i[1]*X[1],Ec=f[3]*i[1]*X[1],Lc=f[0]*i[2]*X[1],Qc=f[1]*i[2]*X[1],Rc=f[2]*i[2]*X[1],Sc=f[3]*i[2]*X[1],Uc=f[0]*i[3]*X[1],Vc=f[1]*i[3]*X[1],Wc=f[2]*i[3]*X[1],_c=f[3]*i[3]*X[1],zc=f[0]*i[0]*X[2],Mc=f[1]*i[0]*X[2],Zc=f[2]*i[0]*X[2],Nc=f[3]*i[0]*X[2],C=f[0]*i[1]*X[2],Bc=f[1]*i[1]*X[2],sc=f[2]*i[1]*X[2],cc=f[3]*i[1]*X[2],$c=f[0]*i[2]*X[2],Oc=f[1]*i[2]*X[2],pc=f[2]*i[2]*X[2],uc=f[3]*i[2]*X[2],Jc=f[0]*i[3]*X[2],Cc=f[1]*i[3]*X[2],ct=f[2]*i[3]*X[2],tt=f[3]*i[3]*X[2],nt=f[0]*i[0]*X[3],Kc=f[1]*i[0]*X[3],Pc=f[2]*i[0]*X[3],Dc=f[3]*i[0]*X[3],Gc=f[0]*i[1]*X[3],Hc=f[1]*i[1]*X[3],ot=f[2]*i[1]*X[3],Ic=f[3]*i[1]*X[3],yc=f[0]*i[2]*X[3],Xc=f[1]*i[2]*X[3],lc=f[2]*i[2]*X[3],Yt=f[3]*i[2]*X[3],yt=f[0]*i[3]*X[3],Xt=f[1]*i[3]*X[3],lt=f[2]*i[3]*X[3],at=f[3]*i[3]*X[3];for(let st=0,F=v,k=c;st<F;st++){let A=st,rt=k[A]*S,bt=k[A+=F]*tc,mt=k[A+=F]*nc,Bt=k[A+=F]*oc,Ct=k[A+=F]*vc,wt=k[A+=F]*ac,gt=k[A+=F]*kc,qt=k[A+=F]*wc,Zt=k[A+=F]*gc,kt=k[A+=F]*u,It=k[A+=F]*O,Jt=k[A+=F]*p,Kt=k[A+=F]*ec,Lt=k[A+=F]*qc,Qt=k[A+=F]*G,Rt=k[A+=F]*Ac,St=k[A+=F]*B,Ut=k[A+=F]*bc,Vt=k[A+=F]*Yc,Wt=k[A+=F]*Fc,_t=k[A+=F]*Tc,$t=k[A+=F]*jc,Ot=k[A+=F]*mc,pt=k[A+=F]*Ec,ut=k[A+=F]*Lc,cn=k[A+=F]*Qc,tn=k[A+=F]*Rc,nn=k[A+=F]*Sc,on=k[A+=F]*Uc,sn=k[A+=F]*Vc,rn=k[A+=F]*Wc,vn=k[A+=F]*_c,en=k[A+=F]*zc,hn=k[A+=F]*Mc,xn=k[A+=F]*Zc,fn=k[A+=F]*Nc,dn=k[A+=F]*C,Yn=k[A+=F]*Bc,yn=k[A+=F]*sc,Xn=k[A+=F]*cc,ln=k[A+=F]*$c,an=k[A+=F]*Oc,bn=k[A+=F]*pc,wn=k[A+=F]*uc,gn=k[A+=F]*Jc,qn=k[A+=F]*Cc,Zn=k[A+=F]*ct,kn=k[A+=F]*tt,An=k[A+=F]*nt,Fn=k[A+=F]*Kc,Tn=k[A+=F]*Pc,jn=k[A+=F]*Dc,En=k[A+=F]*Gc,zn=k[A+=F]*Hc,Mn=k[A+=F]*ot,Nn=k[A+=F]*Ic,Pn=k[A+=F]*yc,mn=k[A+=F]*Xc,Bn=k[A+=F]*lc,Cn=k[A+=F]*Yt,Dn=k[A+=F]*yt,Gn=k[A+=F]*Xt,Hn=k[A+=F]*lt,In=k[A+=F]*at;for(let Dt=0,vt=0,Jn=0;Dt<4;Dt++){let Kn=P[vt++],Ln=P[vt++],Qn=P[vt++],Rn=P[vt++];for(let Gt=0,et=0;Gt<4;Gt++){let ht=N[et++],xt=N[et++],ft=N[et++],it=N[et++];for(let Ht=0,dt=0;Ht<4;Ht++){let hc=m[dt++],xc=m[dt++],fc=m[dt++],ic=m[dt++];Y[d+64*st+Jn++]=Kn*(ht*(hc*rt+xc*bt+fc*mt+ic*Bt)+xt*(hc*Ct+xc*wt+fc*gt+ic*qt)+ft*(hc*Zt+xc*kt+fc*It+ic*Jt)+it*(hc*Kt+xc*Lt+fc*Qt+ic*Rt))+Ln*(ht*(hc*St+xc*Ut+fc*Vt+ic*Wt)+xt*(hc*_t+xc*$t+fc*Ot+ic*pt)+ft*(hc*ut+xc*cn+fc*tn+ic*nn)+it*(hc*on+xc*sn+fc*rn+ic*vn))+Qn*(ht*(hc*en+xc*hn+fc*xn+ic*fn)+xt*(hc*dn+xc*Yn+fc*yn+ic*Xn)+ft*(hc*ln+xc*an+fc*bn+ic*wn)+it*(hc*gn+xc*qn+fc*Zn+ic*kn))+Rn*(ht*(hc*An+xc*Fn+fc*Tn+ic*jn)+xt*(hc*En+xc*zn+fc*Mn+ic*Nn)+ft*(hc*Pn+xc*mn+fc*Bn+ic*Cn)+it*(hc*Dn+xc*Gn+fc*Hn+ic*In))}}}}return Y}static evaluate(t,c,v=1,Y,d,r=0){let o=Y[0],n=Y[1],s=Y[2],e=t[0],h=t[1],l=t[2],a=t[3],g=t[4],w=t[5],b=t[6],q=t[7],f=t[8],i=t[9],X=t[10],E=t[11],z=(o-a)*(o-b)*(o-i)/((e-a)*(e-b)*(e-i)),T=(o-e)*(o-b)*(o-i)/((a-e)*(a-b)*(a-i)),j=(o-e)*(o-a)*(o-i)/((b-e)*(b-a)*(b-i)),M=(o-e)*(o-a)*(o-b)/((i-e)*(i-a)*(i-b)),H=(n-g)*(n-q)*(n-X)/((h-g)*(h-q)*(h-X)),D=(n-h)*(n-q)*(n-X)/((g-h)*(g-q)*(g-X)),J=(n-h)*(n-g)*(n-X)/((q-h)*(q-g)*(q-X)),K=(n-h)*(n-g)*(n-q)/((X-h)*(X-g)*(X-q)),U=(s-w)*(s-f)*(s-E)/((l-w)*(l-f)*(l-E)),$=(s-l)*(s-f)*(s-E)/((w-l)*(w-f)*(w-E)),W=(s-l)*(s-w)*(s-E)/((f-l)*(f-w)*(f-E)),I=(s-l)*(s-w)*(s-f)/((E-l)*(E-w)*(E-f));for(let L=0,Z=0;L<v;L++){let _=c[Z++],Q=c[Z++],R=c[Z++],m=c[Z++],N=c[Z++],P=c[Z++],S=c[Z++],tc=c[Z++],nc=c[Z++],oc=c[Z++],vc=c[Z++],ac=c[Z++],kc=c[Z++],wc=c[Z++],gc=c[Z++],u=c[Z++],O=c[Z++],p=c[Z++],ec=c[Z++],qc=c[Z++],G=c[Z++],Ac=c[Z++],B=c[Z++],bc=c[Z++],Yc=c[Z++],Fc=c[Z++],Tc=c[Z++],jc=c[Z++],mc=c[Z++],Ec=c[Z++],Lc=c[Z++],Qc=c[Z++],Rc=c[Z++],Sc=c[Z++],Uc=c[Z++],Vc=c[Z++],Wc=c[Z++],_c=c[Z++],zc=c[Z++],Mc=c[Z++],Zc=c[Z++],Nc=c[Z++],C=c[Z++],Bc=c[Z++],sc=c[Z++],cc=c[Z++],$c=c[Z++],Oc=c[Z++],pc=c[Z++],uc=c[Z++],Jc=c[Z++],Cc=c[Z++],ct=c[Z++],tt=c[Z++],nt=c[Z++],Kc=c[Z++],Pc=c[Z++],Dc=c[Z++],Gc=c[Z++],Hc=c[Z++],ot=c[Z++],Ic=c[Z++],yc=c[Z++],Xc=c[Z++],lc=_*z+Q*T+R*j+m*M,Yt=N*z+P*T+S*j+tc*M,yt=nc*z+oc*T+vc*j+ac*M,Xt=nc*rx0+wc*T+gc*j+u*M,lt=O*z+p*T+ec*j+qc*M,at=G*z+Ac*T+B*j+bc*M,st=Yc*z+Fc*T+Tc*j+jc*M,F=Yc*rx0+Ec*T+Lc*j+Qc*M,k=Rc*z+Sc*T+Uc*j+Vc*M,A=Wc*z+_c*T+zc*j+Mc*M,rt=Zc*z+Nc*T+C*j+Bc*M,bt=Zc*rx0+cc*T+$c*j+Oc*M,mt=pc*z+uc*T+Jc*j+Cc*M,Bt=ct*z+tt*T+nt*j+Kc*M,Ct=Pc*z+Dc*T+Gc*j+Hc*M,wt=Pc*rx0+Ic*T+yc*j+Xc*M,gt=lc*H+Yt*D+yt*J+Xt*K,qt=lt*H+at*D+st*J+F*K,Zt=k*H+A*D+rt*J+bt*K,kt=k*H+A*D+rt*J+wt*K;d[r+L]=gt*U+qt*$+Zt*W+kt*I}return d}constructor(t,c,v){super(t,c,v)}};globalThis.Tricubic=Pt;})();
